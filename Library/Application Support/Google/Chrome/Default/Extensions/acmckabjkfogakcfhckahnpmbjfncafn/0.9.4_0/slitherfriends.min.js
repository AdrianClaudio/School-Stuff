!function(a,b){function C(){M("Friends Id: n/a"),document.referrer.startsWith("http://slitherfriends.pw")&&(q=!0),connectServer=b.extend({},connect),connectServer=connect,connect=H,t=max_skin_cv,v=max_skin_cv,setVanillaSkin=setSkin,setSkin=P,vanillaNewSnake=newSnake,newSnake=S,vanillaPrevSkin=psk.onclick,psk.onclick=ma,vanillaNextSkin=nsk.onclick,nsk.onclick=la,gameResize=resize,resize=G,vanillaMouseDown=a.onmousedown,a.onmousedown=qa,vanillaCheckNick=gdnm,gdnm=T,p=sos,"undefined"==typeof adsController&&(adsController={initialize:function(){return console.log("Slither Friends Extension- Please support slither.io and add slither.io to your AdBlocker's whitelist."),!0},requestAds:function(){ga('<a style="color:#ADADAD;" href="javascript:alert(\'Slither.io has added ads that load every 3 times you click play. For users that used AdBlock, the game just froze when it attempted to load ads and they had to refresh the page. Slither Friends fixed this problem but as a penalty for users using AdBlock, every time Slither.io tries to load an ad, you have to wait 5 seconds. Please note that these are official ads by Slither.io, not for the extension!\');"> Slither Friends Saved you From Reloading.</a><br/>But as a penalty for using AdBlock, you have to wait 5 seconds...',"#FF5757"),setTimeout(function(){ha(),shoa=!1,play_count=0},5e3)}}),D(function(){b(document).trigger("groupPlayReady"),b(document).trigger("broadcasterInjectionReady")}),E(function(){G(),Y()}),X(function(){if(localStorage.snakeant>0)for(var a=0;a<antennas.length;a++)if(antennas[a].antennaid==localStorage.snakeant){selectedAntennaIndex=a;break}ha("gameload-overlay")})}function D(b){if(f=document.getElementById("nick"),g=f.cloneNode(!0),g.id="previewNick",f.type="hidden",f.parentElement.appendChild(g),Z("input_friends","Friends Id or ip:port",50,function(){h=document.getElementById("input_friends")}),i=document.createElement("p"),i.id="friends_tip",i.className="nsi",i.style.marginTop="0px",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.width="500px",i.style.height="25px",i.style.color="rgb(128, 104, 192)",i.style.textAlign="center",i.style.fontSize="12px",i.style.fontFamily="'Lucida Sans Unicode', 'Lucida Grande', sans-serif",i.style.opacity="0.89455",i.innerHTML="<i>"+s.tutorial+"</i><br/>"+s.footer,document.getElementById("tips").parentElement.appendChild(i),a.screen.width>=860&&a.screen.height>=930&&!q){var c=document.createElement("iframe");c.src="http://agar.pw/slitherfriends/extension/slid.php?i="+Math.floor(1e3*Math.random()+1),c.width="160px",c.height="615px",c.style.left="0px",c.style.top="120px",c.style.position="fixed",c.style.margin="0px",c.style.border="0",document.getElementById("login").appendChild(c)}e=document.createElement("div"),e.style.position="fixed",e.style.left="20px",e.style.bottom="16px",e.style.zIndex="50",e.style.display="none",e.id="skinDesignerBtn";var d=document.createElement("a");d.className="btn btnt",d.draggable=!1,d.id="skinDesignerLink",d.style.width="95px",d.style.height="89px",d.href="http://slitherfriends.pw/extension/skindesigner/?v=1",d.target="_blank";var j=document.createElement("img");j.className="nsi",j.border="0",j.draggable=!1,j.width="95",j.height="89",j.src="http://slitherfriends.pw/extension/skindesigner/skindesigner_btn.png",d.appendChild(j),e.appendChild(d),document.getElementById("smh").appendChild(e),smh=document.getElementById("smh"),"undefined"!=typeof b&&b()}function E(a){j="skin",k=document.createElement("div"),k.id="csmsh",k.style.display="none",k.style.opacity="0.8",k.style.position="fixed",k.style.zIndex="52",k.style.textAlign="center",k.style.top="200px",k.style.left="300px";var c=document.createElement("div");c.style.width="244px";var d=document.createElement("h1");d.style.color="white",d.style.fontFamily="Arial",d.innerHTML="Choosing:",c.appendChild(d),c.appendChild(F("csms","skin","Skin","skin"==j,pa)),c.appendChild(F("csms","antenna","Antenna","antenna"==j,pa)),k.appendChild(c),b(k).insertBefore("#pskh"),l=document.createElement("div"),l.id="csoh",l.style.display="none",l.style.opacity="0.8",l.style.position="fixed",l.style.zIndex="52",l.style.top="300px",l.style.left="300px";var e=document.createElement("div");e.className="taho",e.style.width="250px",e.style.boxShadow="rgb(0,0,0) 0px 6px 50px",e.style.background="rgb(76,68,124)",m=document.createElement("input"),m.id="cso",m.className="sumsginp",m.style.width="244px",m.style.height="24px",m.style.zIndex="53",m.placeholder="Skin Search (tag, id, or 0=reset)",m.maxLength="25",e.appendChild(m),l.appendChild(e),b(l).insertAfter("#nskh"),"undefined"!=typeof a&&a()}function F(a,b,c,d,e){var f=a+"_"+b,g=document.createElement("input");g.type="radio",g.name=a,g.style.zIndex="53",g.id=f,"boolean"==typeof d&&d&&(g.checked=d),"function"==typeof e&&(g.onclick=e);var h=document.createElement("label");return h.htmlFor=f,h.style.marginRight="15px",h.style.color="white",h.style.fontFamily="Arial",h.appendChild(g),h.appendChild(document.createTextNode(c)),h}function G(){width=Math.ceil(a.innerWidth),height=Math.ceil(a.innerHeight),width==lww&&height==lhh||(k.style.left=Math.round(width/2-k.offsetWidth/2)+"px",k.style.top=Math.round(height/2-200)+"px",l.style.left=Math.round(width/2-l.offsetWidth/2)+"px",l.style.top=Math.round(height/2+180)+"px"),gameResize()}function H(){if((localStorage.snakercv>t||localStorage.snakeant>0)&&nick.value.substring(0,z.length)!=z)nickUnencoded=nick.value,nick.value.length<1||!T(nick.value)?(nick.value=z+","+(localStorage.snakercv>t?localStorage.snakercv:"0")+(localStorage.snakeant>0?","+localStorage.snakeant:""),nickUnencoded="",I()):ca(nick.value,function(a){if(a=JSON.parse(a),1!=a.success)nick.value=z+","+(localStorage.snakercv>t?localStorage.snakercv:"0")+(localStorage.snakeant>0?","+localStorage.snakeant:"");else{var c=b.grep(x,function(b){return b.id==a.sfcs});0==c.length&&x.push({id:a.sfcs,nick:nick.value}),nick.value=z+a.sfcs+","+(localStorage.snakercv>t?localStorage.snakercv:"0")+(localStorage.snakeant>0?","+localStorage.snakeant:"")}I()});else{if(nickUnencoded="",A.test(nick.value)){console.log("Slow down on that play button! Attemping to reuse last game's session.");var a=nick.value.split(",");if(a=a[0].substring(z.length,a[0].length),a.length>0){var c=b.grep(x,function(b){return b.id==a});c.length>0&&(nickUnencoded=c[0].nick)}}I()}}function I(){y=setInterval(V,1==want_quality?100:300),h.disabled=!0,null!=o.id||null!=o.ip&&null!=o.port?1!=d.streamerRegex.test(o.id)&&null!=o.id&&null!=o.ip&&null!=o.port?("undefined"!=typeof bso&&bso.ip==o.ip&&bso.ip==o.port||forceServer(o.ip,o.port),J()):null!=o.id?aa(o.id,function(a){if(a=JSON.parse(a),null==a||0==a.length||1!=a.success)return n||($(),h.value=""),"undefined"!=typeof a&&null!=a.message&&a.message.length>0?N(o,'<span style="color:#FF7878;">'+a.message+"</span>"):N(o,'<span style="color:#FF7878;">The server encountered an error. Try again or contact support.</span>'),h.disabled=!1,nick.disabled=!1,void play_btn.setEnabled(!0);"undefined"!=typeof a.data.group_channel&&(o.group.name=a.data.group_channel,o.group.lastupdate=a.data.group_lastseen,N(o));var b=a.data.ip,c=a.data.port;forceServer(b,c),o.ip=b,o.port=c,J()}):_(o.ip,o.port,function(a){return null==a||0==a.length?(n||($(),h.value=""),N(o,'<span style="color:#FF7878;">This server ip is unavailable. Try another server.</span>'),h.disabled=!1,nick.disabled=!1,void play_btn.setEnabled(!0)):(o.id=a,void J())}):(connectServer(),q&&L("hide"),setTimeout(function(){h.disabled=!1,connected&&(K(),r.streaming&&O())},5e3))}function J(){0!=d.idRegex.test(o.id)&&N(o),connectServer(),q&&L("hide"),setTimeout(function(){console.log("Checking server"),h.disabled=!1,1==connecting?(q&&L("show"),connecting=!1,n||($(),h.value=""),N(o,'<span style="color:#FF7878;">Took too long to connect. Try another server.</span>'),nick.disabled=!1,play_btn.setEnabled(!0)):r.streaming&&O()},5e3)}function K(){_(bso.ip,bso.po,function(a){h.value=a,o.id=a,o.ip=bso.ip,o.port=bso.po,forceServer(o.ip,o.port),N(o)})}function L(a){"hide"!=a&&"show"!=a||parent.postMessage({type:"reqSidebar",display:a},"http://slitherfriends.pw")}function M(a){a.length<1||(q?parent.postMessage({type:"winTitle",title:a},"http://slitherfriends.pw"):document.title=a)}function N(a,b){if("object"!=typeof a)return void(i.innerHTML=a);var c=null,d=null;"undefined"!=typeof a.group&&null!=a.group.name?(c="Joining same server with: "+a.group.name+" ("+a.id+")",d=null!=a.group.lastupdate?"Group last switched servers: "+a.group.lastupdate:""):(c="Your friends id is: "+(null!=a.id?'<a href="#" style="color:#EBEBEB;" onclick="prompt(\'This is your direct link. If someone goes to this url with the extension installed, they will immedately connect to the same server.\', \'http://slitherfriends.pw/groupplay.php?id='+a.id+"');\">"+a.id+"</a>":"n/a"),d="Your game ip is: "+(null!=a.ip&&null!=a.port?a.ip+":"+a.port:"n/a"));var e=r.streaming?"<br/>"+s["streamer-footer"]:"";i.innerHTML=c+"<br/>"+d+("undefined"!=typeof b?"<br/>"+b:"")+e,M("Friends Id: "+(null!=a.id?a.id:"n/a"))}function O(){return 64!=r.token.length?(r.streaming=!1,void(r.token=null)):void b.post("http://slitherfriends.pw/extension/groups/stream.php",{ip:bso.ip,port:bso.po,token:r.token,v:"1"},function(a){})}function P(a,c){if(setVanillaSkin(a,c),!(c<=t)){var d=c-t,e=b.grep(u.patterns,function(a){return a.skinid==c});return 1==e.length?(e[0].pattern&&(c=e[0].pattern[0]),a.rbcs=e[0].pattern,void(a.cv=c)):void R(d,5,!0,function(b){b.pattern&&(c=b.pattern[0]),a.rbcs=b.pattern,a.cv=c})}}function Q(a,c){if(c<1)return!1;var d=b.grep(antennas,function(a){return a.antennaid==c});if(d.length>0){antenna=d[0],a.antenna=!0,a.atba=0,a.atc1=antenna.stroke,a.atc2=antenna.fill,a.atwg=!0,a.atia=.5,a.abrot=!0;var e=antenna.length;for(a.atx=new Float32Array(e),a.aty=new Float32Array(e),a.atvx=new Float32Array(e),a.atvy=new Float32Array(e),a.atax=new Float32Array(e),a.atay=new Float32Array(e),e--;e>=0;e--)a.atx[e]=a.xx,a.aty[e]=a.yy;a.bulb=antenna.canvas,a.blbx=antenna.positionX,a.blby=antenna.positionY,a.blbw=antenna.width,a.blbh=antenna.height,a.bsc=antenna.scale,a.blba=antenna.alpha}}function R(a,c,d,e){b.post("http://slitherfriends.pw/extension/skindesigner/getSkin.php",{skinid:a,range:c,token:u.token,v:"1"},function(c){if(c=JSON.parse(c),1!=c.success)return void console.log("[1] Failed to fetch custom skin(s) from server.");for(var f=JSON.parse(c.data),g=0;g<f.length;g++){var h=JSON.parse(f[g]);h.skinid+=t;for(var i=h.pattern.split(","),j=[],k=0;k<i.length;k++)j[k]=parseInt(i[k]);h.pattern=j;var l=b.grep(u.patterns,function(a){return a.skinid==h.skinid});0==l.length&&u.patterns.push(h),h.skinid>v&&h.skinid>t&&(max_skin_cv=v=h.skinid),"function"==typeof e&&d&&h.skinid==a+t&&e(h)}"function"!=typeof e||d||e()})}function S(a,b,c,d,e,f){var g=vanillaNewSnake(a,b,c,d,e,f);return g}function T(a){return A.test(a)?(U(a),!0):vanillaCheckNick(a)}function U(a,c){if(a=a.substring(z.length,a.length-1).split(","),!(a[0].length<1)){var d=b.grep(x,function(b){return b.id==a[0]});d.length>0||ba(a[0],function(b){b=JSON.parse(b);var d="SlitherFriends.pw";1!=b.success?console.log("Could not fetch nick from server. ("+a[0]+")"):d=b.nick;var e={id:a[0],nick:d};x.push(e),"function"==typeof c&&c(e)})}}function V(){if(playing||connecting||(q&&L("show"),A.test(nick.value)&&(nick.value=nickUnencoded),play_btn.setEnabled(!0),clearInterval(y)),!("undefined"==typeof snakes||snakes.length<1)){for(var a=0;a<snakes.length;a++)if(A.test(snakes[a].nk)){var b=snakes[a].nk.split(",");"undefined"!=typeof b[1]&&(b[1]=parseInt(b[1]),isNaN(b[1])||0==b[1]||P(snakes[a],b[1])),"undefined"!=typeof b[2]&&(b[2]=parseInt(b[2]),isNaN(b[2])||Q(snakes[a],b[2])),b[0]=b[0].substring(z.length,b[0].length),b[0].length>0?snakes[a].nk=fa(b[0]):snakes[a].nk=""}for(var a=0;a<lbn.children.length;a+=2)if(A.test(lbn.children[a].innerHTML)){var b=lbn.children[a].innerHTML.split(",");b[0]=b[0].substring(z.length,b[0].length),lbn.children[a].innerHTML=fa(b[0])}}}function X(a){"undefined"==typeof localStorage.snakeant&&(localStorage.snakeant=0),ea(function(b){if(b=JSON.parse(b),1==b.success){for(var d=JSON.parse(b.data),e=0;e<d.length;e++){var f=JSON.parse(d[e]);if(!f.debug||c){f.width+=42,f.height+=42;var g=document.createElement("canvas");g.width=f.width,g.height=f.height;var h=document.createElement("img");h.onload=function(a,b){return function(){var c=document.createElement("canvas");c.width=a.width,c.height=a.height;var d=c.getContext("2d");d.drawImage(b,21,21),d=a.getContext("2d"),d.shadowColor="#000000",d.shadowBlur=20,d.drawImage(c,0,0)}}(g,h),h.src=f.url,f.canvas=g,antennas.push(f)}}"function"==typeof a&&a()}})}function Y(){b(g).on("input",ia),b(h).on("input",ja),b(m).on("input",ka);var a=csk.onclick;csk.onclick=function(){a(),choosing_skin&&(Q(snake,localStorage.snakeant),null!=u.token&&b(e).fadeIn("slow"),b(k).fadeIn("slow"),k.style.left=Math.round(ww/2-k.offsetWidth/2)+"px",k.style.top=Math.round(hh/2-200)+"px",b(l).fadeIn("slow"),l.style.left=Math.round(ww/2-l.offsetWidth/2)+"px",l.style.top=Math.round(hh/2+180)+"px")};var c=resetGame;resetGame=function(){c(),choosing_skin||(b(e).hide(),b(k).fadeOut("fast"),b(l).fadeOut("fast"))}}function Z(a,b,c,d){var e=document.createElement("div");e.id=a+"_holder",e.className="taho",e.style.width="244px",e.style.marginTop="34px",e.style.boxShadow="rgb(0, 0, 0) 0px 6px 50px",e.style.opacity="1",e.style.background="rgb(76, 68, 124)";var f=document.createElement("input");f.id=a,f.className="sumsginp",f.style.width="220px",f.style.height="24px",f.placeholder=b,f.maxlength=c,e.appendChild(f),document.getElementById("nick_holder").parentElement.appendChild(e),"undefined"!=typeof d&&d()}function $(){o={id:null,ip:null,port:null,group:{tag:null,name:null,lastupdate:null}},sos=p,forcing=!1}function _(a,c,d){b.post("http://slitherfriends.pw/extension/reportip.php",{serverip:a,serverport:c,v:1},function(a){d(a)})}function aa(a,c){b.post("http://slitherfriends.pw/extension/idlookup2.php",{serverid:a,v:2},function(a){c(a)})}function ba(a,c){b.post("http://slitherfriends.pw/extension/nick.php",{sfcsid:a,v:1},function(a){c(a)})}function ca(a,c){b.post("http://slitherfriends.pw/extension/nick.php",{nick:a,v:1},function(a){c(a)})}function da(a,c){b.post("http://slitherfriends.pw/extension/skindesigner/getSkin.php",{tag:a,v:1},function(a){c(a)})}function ea(a){b.post("http://slitherfriends.pw/extension/skindesigner/getAntennas.php",{v:1},function(b){a(b)})}function fa(a){var c=b.grep(x,function(b){return b.id==a});return c.length>=1?c[0].nick:""}function ga(a,b){var c=document.createElement("div");c.id="overlay",c.style.overflow="hidden",c.style.margin="0",c.style.padding="0",c.style.backgroundColor="rgba(20, 25, 30, 0.7)",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.zIndex="999",c.style.fontFamily='"Arial", Verdana, sans-serif',c.style.color="white",c.style.textAlign="center";var d=document.createElement("h1");d.style.zIndex="1000",d.style.marginTop="12%",d.style.lineHeight="50px",c.style.color="undefined"!=typeof b?b:"white",d.innerHTML=a,c.appendChild(d),document.body.appendChild(c)}function ha(a){a="undefined"==typeof a?"#overlay":"#"+a,b(a).fadeOut("fast",function(){b(a).remove()})}function ia(){f.value=g.value}function ja(){$();var a=h.value;if(0==a.length)return N({}),void play_btn.setEnabled(!0);if(play_btn.setEnabled(!1),d.idRegex.test(a))o.id=a,N({id:a},"IP Address will be found after you click play."),play_btn.setEnabled(!0);else if(d.ipv4Regex.test(a)){var b=a.split(":");o.ip=b[0],o.port=b[1],N({ip:b[0],port:b[1]},"Id will be generated after you click play."),play_btn.setEnabled(!0)}else if(d.streamerRegex.test(a)){o.id=a;a.substring(3);N({id:a,group:{name:""}},"Info will be generated on play."),play_btn.setEnabled(!0)}else N("Invalid Format")}function ka(a){if(choosing_skin){var b=m.value;if(b.length<1)return P(snake,localStorage.snakercv),void Q(snake,localStorage.snakeant);if(isNaN(b))da(b,function(a){return a=JSON.parse(a),1!=a.success?void console.log("[2] Failed to fetch custom skin(s) from server."):(w.selectedQueryIndex=0,w.queryResult=JSON.parse(a.data),w.byTag=!0,P(snake,JSON.parse(w.queryResult[w.selectedQueryIndex]).skinid+t),void Q(snake,localStorage.snakeant))});else{w.byTag=!1;var c=parseInt(b);0==c?m.value="":c+=t,P(snake,c),Q(snake,localStorage.snakeant)}}}function la(){if("skin"!=j)switch(j){case"antenna":return na()}if(m.value.length<1){var a=vanillaNextSkin();return Q(snake,antennas[selectedAntennaIndex].antennaid),a}return!(!playing||null==snake)&&(0==w.byTag?m.value<v-t+1&&(m.value++,ka(),!0):(w.selectedQueryIndex>=w.queryResult.length-1?w.selectedQueryIndex=0:w.selectedQueryIndex++,P(snake,JSON.parse(w.queryResult[w.selectedQueryIndex]).skinid+t),Q(snake,antennas[selectedAntennaIndex].antennaid),!0))}function ma(){if("skin"!=j)switch(j){case"antenna":return oa()}if(m.value.length<1){var a=vanillaPrevSkin();return Q(snake,antennas[selectedAntennaIndex].antennaid),a}return!(!playing||null==snake)&&(0==w.byTag?m.value>1&&(m.value--,ka(),!0):(w.selectedQueryIndex<=0?w.selectedQueryIndex=w.queryResult.length-1:w.selectedQueryIndex--,P(snake,JSON.parse(w.queryResult[w.selectedQueryIndex]).skinid+t),Q(snake,antennas[selectedAntennaIndex].antennaid),!0))}function na(){return!(antennas.length<1)&&(!(!playing||null==snake)&&(antennas.length>selectedAntennaIndex+1?(selectedAntennaIndex++,Q(snake,antennas[selectedAntennaIndex].antennaid),localStorage.snakeant=antennas[selectedAntennaIndex].antennaid,!0):(selectedAntennaIndex=-1,localStorage.snakeant=0,P(snake,snake.rcv),Q(snake,localStorage.snakeant),!0)))}function oa(){if(antennas.length<1)return!1;if(!playing||null==snake)return!1;if(selectedAntennaIndex>0)selectedAntennaIndex--;else{if(0==selectedAntennaIndex)return selectedAntennaIndex=-1,localStorage.snakeant=0,P(snake,snake.rcv),Q(snake,localStorage.snakeant),!0;selectedAntennaIndex=antennas.length-1}return Q(snake,antennas[selectedAntennaIndex].antennaid),localStorage.snakeant=antennas[selectedAntennaIndex].antennaid,!0}function pa(a){if(a.target.checked)switch(a.target.id){case"csms_skin":j="skin";break;case"csms_antenna":j="antenna"}}function qa(a){choosing_skin||vanillaMouseDown(a)}var c=!0,d={ipv4Regex:new RegExp("^(?:[0-9]{1,3}.){3}[0-9]{1,3}:[0-9]{1,5}$"),idRegex:new RegExp("^[1-9][0-9]{0,4}$"),streamerRegex:new RegExp("^gt:..*$")},e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=!1,o={id:null,ip:null,port:null,group:{tag:null,name:null,lastupdate:null}},p=null,q=!1,r={streaming:!1,token:null},s={tutorial:"Type in a friends id, ip or just click play to generate your own friends id to share.",footer:"<b>Like the extension?</b> Please rate us 5 stars on the <a style='color:#ADADAD;' href='https://chrome.google.com/webstore/detail/%F0%9F%90%8D-slither-friends-by-cre/acmckabjkfogakcfhckahnpmbjfncafn/reviews' target='_blank'>Chrome Web Store</a>.<br/><b>Wanna design your own skins?</b> <a style='color:#ADADAD' href='http://slitherfriends.pw/skindesigner' target='_blank'>Click here</a> to learn more!<br/><b>Are you a streamer?</b> <a style='color:#ADADAD;' href='http://slitherfriends.pw/streamsolution/#learn' target='_blank'>Click here</a> to learn about group tags!","streamer-footer":"<span style='color:rgb(192, 104, 120);'>You are broadcasting your server info to your group tag(s).</span>"},t=null,u={token:null,patterns:[]},v=0,w={byTag:!1,queryResult:[],selectedQueryIndex:0},x=[],y=null,z="sf~:",A=new RegExp("^sf~:(|[A-Fa-f0-9]{10})(|,[0-9]{1,4})(|,[0-9]{1,4})$");nickUnencoded="",antennas=[],selectedAntennaIndex=-1;var B=null;document.addEventListener("initGroupPlayId",function(a){b(document).on("groupPlayReady",function(){N({id:a.detail},"IP Address will be found after you click play."),$(),o.id=a.detail,h.value=a.detail,play_btn.setEnabled(!0)})}),document.addEventListener("initGroupPlayTag",function(a){b(document).on("groupPlayReady",function(){n=!0;var b=a.detail;N({id:b,group:{name:""}},"Info will be generated on play."),$(),o.id="gt:"+b,h.readOnly=!0,h.style.color="#969696",h.value=b+" [GROUP LINK]",play_btn.setEnabled(!0)})}),document.addEventListener("startTagBroadcaster",function(a){b(document).on("broadcasterInjectionReady",function(){var b=a.detail;r.token=b,r.streaming=!0,i.innerHTML=s.tutorial+"<br/>"+s["streamer-footer"]})}),document.addEventListener("initSkinsToken",function(a){u.token=a.detail}),document.addEventListener("initGamepad",function(a){var c=new Gamepad;c.bind(Gamepad.Event.CONNECTED,function(a){if(console.log("Gamepad connected"),null==B){B=document.createElement("div"),B.style.position="fixed",B.style.left="135px",B.style.bottom="16px",B.style.zIndex="50",B.style.display="inline";var c=document.createElement("a");c.className="btn btnt",c.draggable=!1,c.style.width="95px",c.style.height="89px",c.href="#",c.title="Click to hide",c.onclick=function(){b(B).fadeOut("slow")};var d=document.createElement("img");d.className="nsi",d.border="0",d.draggable=!1,d.width="95",d.height="89",d.src="http://slitherfriends.pw/extension/media/gamepad_connected.png",c.appendChild(d),B.appendChild(c),document.getElementById("smh").appendChild(B)}}),c.bind(Gamepad.Event.DISCONNECTED,function(a){console.log("Gamepad disconnected"),null!=B&&(b(B).remove(),B=null)}),c.bind(Gamepad.Event.UNSUPPORTED,function(a){console.log("Gamepad unsupported"),null!=B&&(b(B).remove(),B=null)}),c.bind(Gamepad.Event.BUTTON_DOWN,function(a){"FACE_1"==a.control?setAcceleration(1):"FACE_4"==a.control&&play_btn.elem.onclick()}),c.bind(Gamepad.Event.BUTTON_UP,function(a){"FACE_1"==a.control&&setAcceleration(0)}),c.bind(Gamepad.Event.AXIS_CHANGED,function(a){(a.value>.3||a.value<-.3)&&("LEFT_STICK_X"==a.axis?xm=1e3*a.value:"LEFT_STICK_Y"==a.axis&&(ym=1e3*a.value))}),c.init()||console.log("This browser does not support gamepads.")}),a.onload=C}(window,jQuery);