/*Copyright (c) 2016 ksoft http://www.dummysoftware.com*/function ovAIv(e){var t=!1;if(e)for(var n=document.querySelectorAll("iframe"),u=0;u<n.length;u++){var s=n[u];try{if(s.contentDocument&&(t=e(s.contentDocument)))break}catch(e){}}return t}chrome.runtime.onMessage.addListener(function autoClickStatusUpdate(request,sender,sendResponse){if(request.action.indexOf("getAutoClickIdStatus")!=-1){var status="",autoClickId=request.action.replace("getAutoClickIdStatus","");if(null!=autoClickId&&autoClickId.length>0){var link=null;try{link=0==autoClickId.indexOf("document.")?eval(autoClickId):document.querySelector(autoClickId)}catch(e){}status=null!=link?"OK":"Error"}sendResponse({result:status})}else if(request.action.indexOf("findText")!=-1){var status=!1,text=request.action.replace("findText","").trim();if(null!=text&&text.length>0){var element=null;try{element=document.querySelector(text)}catch(e){}if(element||(element=ovAIv(function(e){return null!=e.querySelector(text)})||null),status=null!=element,!status){var regEx=new RegExp(text,"i"),matches=request.isText?document.body.innerText.match(regEx):document.body.innerHTML.match(regEx);status=matches&&matches.length>0,status||(status=ovAIv(function(e){return matches=request.isText?e.body.innerText.match(regEx):e.body.innerHTML.match(regEx),matches&&matches.length>0}))}}sendResponse({result:status})}chrome.runtime.onMessage.removeListener(autoClickStatusUpdate)});