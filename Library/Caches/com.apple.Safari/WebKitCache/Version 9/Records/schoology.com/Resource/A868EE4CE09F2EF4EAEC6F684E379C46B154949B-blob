window.tinyMCEPreInit={suffix:"",base:window.location.protocol+"//"+window.location.host+"/sites/all/libraries/tinymce/jscripts/tiny_mce",query:""};(function(f){var a=/^\s*|\s*$/g,b,e="B".replace(/A(.)|B/,"$1")==="$1";var d={majorVersion:"3",minorVersion:"5.8",releaseDate:"2012-11-20",_init:function(){var z=this,s=document,r=navigator,h=r.userAgent,q,g,o,m,l,u;z.isOpera=f.opera&&opera.buildNumber;z.isWebKit=/WebKit/.test(h);z.isIE=!z.isWebKit&&!z.isOpera&&(/MSIE/gi).test(h)&&(/Explorer/gi).test(r.appName);z.isIE6=z.isIE&&/MSIE [56]/.test(h);z.isIE7=z.isIE&&/MSIE [7]/.test(h);z.isIE8=z.isIE&&/MSIE [8]/.test(h);z.isIE9=z.isIE&&/MSIE [9]/.test(h);z.isIE11=h.indexOf("Trident/")!=-1&&(h.indexOf("rv:")!=-1||r.appName.indexOf("Netscape")!=-1);z.isGecko=!z.isWebKit&&!z.isIE11&&/Gecko/.test(h);z.isMac=h.indexOf("Mac")!=-1;z.isAir=/adobeair/i.test(h);z.isIDevice=/(iPad|iPhone)/.test(h);z.isIOS5=z.isIDevice&&h.match(/AppleWebKit\/(\d*)/)[1]>=534;if(f.tinyMCEPreInit){z.suffix=tinyMCEPreInit.suffix;
z.baseURL=tinyMCEPreInit.base;z.query=tinyMCEPreInit.query;return}z.suffix="";g=s.getElementsByTagName("base");for(q=0;q<g.length;q++){u=g[q].href;if(u){if(/^https?:\/\/[^\/]+$/.test(u)){u+="/"}m=u?u.match(/.*\//)[0]:""}}function k(p){if(p.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(p.src)){if(/_(src|dev)\.js/g.test(p.src)){z.suffix="_src"}if((l=p.src.indexOf("?"))!=-1){z.query=p.src.substring(l+1)}z.baseURL=p.src.substring(0,p.src.lastIndexOf("/"));if(m&&z.baseURL.indexOf("://")==-1&&z.baseURL.indexOf("/")!==0){z.baseURL=m+z.baseURL}return z.baseURL}return null}g=s.getElementsByTagName("script");for(q=0;q<g.length;q++){if(k(g[q])){return}}o=s.getElementsByTagName("head")[0];if(o){g=o.getElementsByTagName("script");for(q=0;q<g.length;q++){if(k(g[q])){return}}}return},is:function(h,g){if(!g){return h!==b}if(g=="array"&&d.isArray(h)){return true}return typeof(h)==g},isArray:Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"},makeMap:function(g,l,k){var h;
g=g||[];l=l||",";if(typeof(g)=="string"){g=g.split(l)}k=k||{};h=g.length;while(h--){k[g[h]]={}}return k},each:function(m,g,k){var p,h;if(!m){return 0}k=k||m;if(m.length!==b){for(p=0,h=m.length;p<h;p++){if(g.call(k,m[p],p,m)===false){return 0}}}else{for(p in m){if(m.hasOwnProperty(p)){if(g.call(k,m[p],p,m)===false){return 0}}}}return 1},map:function(g,h){var k=[];d.each(g,function(l){k.push(h(l))});return k},grep:function(g,h){var k=[];d.each(g,function(l){if(!h||h(l)){k.push(l)}});return k},inArray:function(h,k){var m,g;if(h){for(m=0,g=h.length;m<g;m++){if(h[m]===k){return m}}}return -1},extend:function(p,n){var m,g,k,h=arguments,o;for(m=1,g=h.length;m<g;m++){n=h[m];for(k in n){if(n.hasOwnProperty(k)){o=n[k];if(o!==b){p[k]=o}}}}return p},trim:function(g){return(g?""+g:"").replace(a,"")},create:function(u,g,m){var r=this,h,l,n,o,k,q=0;u=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(u);n=u[3].match(/(^|\.)(\w+)$/i)[2];l=r.createNS(u[3].replace(/\.\w+$/,""),m);if(l[n]){return}if(u[2]=="static"){l[n]=g;
if(this.onCreate){this.onCreate(u[2],u[3],l[n])}return}if(!g[n]){g[n]=function(){};q=1}l[n]=g[n];r.extend(l[n].prototype,g);if(u[5]){h=r.resolve(u[5]).prototype;o=u[5].match(/\.(\w+)$/i)[1];k=l[n];if(q){l[n]=function(){return h[o].apply(this,arguments)}}else{l[n]=function(){this.parent=h[o];return k.apply(this,arguments)}}l[n].prototype[n]=l[n];r.each(h,function(p,s){l[n].prototype[s]=h[s]});r.each(g,function(p,s){if(h[s]){l[n].prototype[s]=function(){this.parent=h[s];return p.apply(this,arguments)}}else{if(s!=n){l[n].prototype[s]=p}}})}r.each(g["static"],function(p,s){l[n][s]=p});if(this.onCreate){this.onCreate(u[2],u[3],l[n].prototype)}},walk:function(k,h,l,g){g=g||this;if(k){if(l){k=k[l]}d.each(k,function(n,m){if(h.call(g,n,m,l)===false){return false}d.walk(n,h,l,g)})}},createNS:function(l,k){var h,g;k=k||f;l=l.split(".");for(h=0;h<l.length;h++){g=l[h];if(!k[g]){k[g]={}}k=k[g]}return k},resolve:function(m,k){var h,g;k=k||f;m=m.split(".");for(h=0,g=m.length;h<g;h++){k=k[m[h]];if(!k){break
}}return k},addUnload:function(l,k){var h=this,g;g=function(){var p=h.unloads,q,r;if(p){for(r in p){q=p[r];if(q&&q.func){q.func.call(q.scope,1)}}if(f.detachEvent){f.detachEvent("onbeforeunload",m);f.detachEvent("onunload",g)}else{if(f.removeEventListener){f.removeEventListener("unload",g,false)}}h.unloads=q=p=w=g=0;if(f.CollectGarbage){CollectGarbage()}}};function m(){var o=document;function n(){o.detachEvent("onstop",n);if(g){g()}o=0}if(o.readyState=="interactive"){if(o){o.attachEvent("onstop",n)}f.setTimeout(function(){if(o){o.detachEvent("onstop",n)}},0)}}l={func:l,scope:k||this};if(!h.unloads){if(f.attachEvent){f.attachEvent("onunload",g);f.attachEvent("onbeforeunload",m)}else{if(f.addEventListener){f.addEventListener("unload",g,false)}}h.unloads=[l]}else{h.unloads.push(l)}return l},removeUnload:function(k){var g=this.unloads,h=null;d.each(g,function(m,l){if(m&&m.func==k){g.splice(l,1);h=k;return false}});return h},explode:function(g,h){if(!g||d.is(g,"array")){return g}return d.map(g.split(h||","),d.trim)
},_addVer:function(h){var g;if(!this.query){return h}g=(h.indexOf("?")==-1?"?":"&")+this.query;if(h.indexOf("#")==-1){return h+g}return h.replace("#",g+"#")},_replace:function(k,g,h){if(e){return h.replace(k,function(){var n=g,l=arguments,m;for(m=0;m<l.length-2;m++){if(l[m]===b){n=n.replace(new RegExp("\\$"+m,"g"),"")}else{n=n.replace(new RegExp("\\$"+m,"g"),l[m])}}return n})}return h.replace(k,g)}};d._init();f.tinymce=f.tinyMCE=d})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:false,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(b,a){this.listeners.push({cb:b,scope:a||this.scope});return b},addToTop:function(e,b){var a=this,d={cb:e,scope:b||a.scope};if(a.inDispatch){a.listeners=[d].concat(a.listeners)}else{a.listeners.unshift(d)}return e},remove:function(d){var b=this.listeners,a=null;tinymce.each(b,function(f,e){if(d==f.cb){a=f;b.splice(e,1);return false}});return a},dispatch:function(){var a=this,f,b=arguments,d,e=a.listeners,g;
a.inDispatch=true;for(d=0;d<e.length;d++){g=e[d];f=g.cb.apply(g.scope,b.length>0?b:[g.scope]);if(f===false){break}}a.inDispatch=false;return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(f,h){var g=this,l,e,d,k;f=tinymce.trim(f);h=g.settings=h||{};if(/^([\w\-]+):([^\/]{2})/i.test(f)||/^\s*#/.test(f)){g.source=f;return}if(f.indexOf("/")===0&&f.indexOf("//")!==0){f=(h.base_uri?h.base_uri.protocol||"http":"http")+"://mce_host"+f}if(!/^[\w\-]*:?\/\//.test(f)){k=h.base_uri?h.base_uri.path:new tinymce.util.URI(location.href).directory;f=((h.base_uri&&h.base_uri.protocol)||"http")+"://mce_host"+g.toAbsPath(k,f)}f=f.replace(/@@/g,"(mce_at)");f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(f);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,m){var n=f[m];
if(n){n=n.replace(/\(mce_at\)/g,"@@")}g[b]=n});d=h.base_uri;if(d){if(!g.protocol){g.protocol=d.protocol}if(!g.userInfo){g.userInfo=d.userInfo}if(!g.port&&g.host==="mce_host"){g.port=d.port}if(!g.host||g.host==="mce_host"){g.host=d.host}g.source=""}},setPath:function(d){var b=this;d=/^(.*?)\/?(\w+)?$/.exec(d);b.path=d[0];b.directory=d[1];b.file=d[2];b.source="";b.getURI()},toRelative:function(b){var e=this,g;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:e});if((b.host!="mce_host"&&e.host!=b.host&&b.host)||e.port!=b.port||e.protocol!=b.protocol){return b.getURI()}var d=e.getURI(),f=b.getURI();if(d==f||(d.charAt(d.length-1)=="/"&&d.substr(0,d.length-1)==f)){return d}g=e.toRelPath(e.path,b.path);if(b.query){g+="?"+b.query}if(b.anchor){g+="#"+b.anchor}return g},toAbsolute:function(b,d){b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?d:0)},toRelPath:function(h,k){var d,g=0,e="",f,b;h=h.substring(0,h.lastIndexOf("/"));h=h.split("/");
d=k.split("/");if(h.length>=d.length){for(f=0,b=h.length;f<b;f++){if(f>=d.length||h[f]!=d[f]){g=f+1;break}}}if(h.length<d.length){for(f=0,b=d.length;f<b;f++){if(f>=h.length||h[f]!=d[f]){g=f+1;break}}}if(g===1){return k}for(f=0,b=h.length-(g-1);f<b;f++){e+="../"}for(f=g-1,b=d.length;f<b;f++){if(f!=g-1){e+="/"+d[f]}else{e+=d[f]}}return e},toAbsPath:function(f,g){var d,b=0,k=[],e,h;e=/\/$/.test(g)?"/":"";f=f.split("/");g=g.split("/");a(f,function(l){if(l){k.push(l)}});f=k;for(d=g.length-1,k=[];d>=0;d--){if(g[d].length===0||g[d]==="."){continue}if(g[d]===".."){b++;continue}if(b>0){b--;continue}k.push(g[d])}d=f.length-b;if(d<=0){h=k.reverse().join("/")}else{h=f.slice(0,d).join("/")+"/"+k.reverse().join("/")}if(h.indexOf("/")!==0){h="/"+h}if(e&&h.lastIndexOf("/")!==h.length-1){h+=e}return h},getURI:function(e){var d,b=this;if(!b.source||e){d="";if(!e){if(b.protocol){d+=b.protocol+"://"}if(b.userInfo){d+=b.userInfo+"@"}if(b.host){d+=b.host}if(b.port){d+=":"+b.port}}if(b.path){d+=b.path}if(b.query){d+="?"+b.query
}if(b.anchor){d+="#"+b.anchor}b.source=d}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var b=this.get(e),d;if(b){a(b.split("&"),function(f){f=f.split("=");d=d||{};d[unescape(f[0])]=unescape(f[1])})}return d},setHash:function(m,b,h,g,l,f){var k="";a(b,function(e,d){k+=(!k?"":"&")+escape(d)+"="+escape(e)});this.set(m,k,h,g,l,f)},get:function(k){var h=document.cookie,g,f=k+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!==0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(l,b,h,g,k,f){document.cookie=l+"="+escape(b)+((h)?"; expires="+h.toGMTString():"")+((g)?"; path="+escape(g):"")+((k)?"; domain="+k:"")+((f)?"; secure":"")},remove:function(d,f,e){var b=new Date();b.setTime(b.getTime()-1000);this.set(d,"",b,f,e)}})})();(function(){function serialize(o,quote){var i,v,t,name;quote=quote||'"';if(o==null){return"null"}t=typeof o;
if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&Object.prototype.toString.call(o)==="[object Array]"){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(name in o){if(o.hasOwnProperty(name)){v+=typeof o[name]!="function"?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):""}}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)
}}a=null}else{b.setTimeout(f,10)}}g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(l){a=0;try{a=new ActiveXObject(l)}catch(k){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var d=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=d({},e);this.count=0},send:function(g){var f=g.error,e=g.success;g=d(this.settings,g);g.success=function(k,h){k=b.parse(k);if(typeof(k)=="undefined"){k={error:"JSON Parse error."}}if(k.error){f.call(g.error_scope||g.scope,k.error,h)
}else{e.call(g.success_scope||g.scope,k.result)}};g.error=function(k,h){if(f){f.call(g.error_scope||g.scope,k,h)}};g.data=b.serialize({id:g.id||"c"+(this.count++),method:g.method,params:g.params});g.content_type="application/json";a.send(g)},"static":{sendRPC:function(e){return new tinymce.util.JSONRequest().send(e)}}})}());(function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey},metaKeyPressed:function(b){return a.isMac?b.metaKey:b.ctrlKey&&!b.altKey}}})(tinymce);tinymce.util.Quirks=function(a){var m=tinymce.VK,g=m.BACKSPACE,n=m.DELETE,f=a.dom,o=a.selection,M=a.settings,B=a.parser,r=a.serializer,J=tinymce.each;function F(S,R){try{a.getDoc().execCommand(S,false,R)}catch(Q){}}function q(){var Q=a.getDoc().documentMode;return Q?Q:6}function E(Q){return Q.isDefaultPrevented()}function O(){function Q(U){var S,X,V,T,R,W;function Y(){if(R.nodeType==3){if(U&&W==R.length){return true}if(!U&&W===0){return true
}}}S=o.getRng();R=S[(U?"start":"end")+"Container"];W=S[(U?"start":"end")+"Offset"];if(R.nodeType==3){X=f.getParent(S.startContainer,f.isBlock);if(U){X=f.getNext(X,f.isBlock)}if(X&&Y()){V=f.create("em",{id:"__mceDel"});J(tinymce.grep(X.childNodes),function(Z){V.appendChild(Z)});X.appendChild(V)}}a.getDoc().execCommand(U?"ForwardDelete":"Delete",false,null);if(V){T=o.getBookmark();f.remove(f.get("__mceDel"),true);o.moveToBookmark(T)}}a.onKeyDown.add(function(R,T){var S;S=T.keyCode==n;if(!E(T)&&(S||T.keyCode==g)&&!m.modifierPressed(T)){T.preventDefault();Q(S)}});a.addCommand("Delete",function(){Q()})}function t(){function Q(T){var S=f.create("body");var U=T.cloneContents();S.appendChild(U);return o.serializer.serialize(S,{format:"html"})}function R(S){var U=Q(S);var V=f.createRng();V.selectNode(a.getBody());var T=Q(V);return U===T}a.onKeyDown.add(function(T,V){var U=V.keyCode,S;if(!E(V)&&(U==n||U==g)){S=T.selection.isCollapsed();if(S&&!f.isEmpty(T.getBody())){return}if(tinymce.isIE&&!S){return
}if(!S&&!R(T.selection.getRng())){return}T.setContent("");T.selection.setCursorLocation(T.getBody(),0);T.nodeChanged()}})}function N(){a.onKeyDown.add(function(Q,R){if(!E(R)&&R.keyCode==65&&m.metaKeyPressed(R)){R.preventDefault();Q.execCommand("SelectAll")}})}function P(){if(!a.settings.content_editable){f.bind(a.getDoc(),"focusin",function(Q){o.setRng(o.getRng())});f.bind(a.getDoc(),"mousedown",function(Q){if(Q.target==a.getDoc().documentElement){a.getWin().focus();o.setRng(o.getRng())}})}}function G(){a.onKeyDown.add(function(Q,T){if(!E(T)&&T.keyCode===g){if(o.isCollapsed()&&o.getRng(true).startOffset===0){var S=o.getNode();var R=S.previousSibling;if(R&&R.nodeName&&R.nodeName.toLowerCase()==="hr"){f.remove(R);tinymce.dom.Event.cancel(T)}}}})}function D(){if(!Range.prototype.getClientRects){a.onMouseDown.add(function(R,S){if(!E(S)&&S.target.nodeName==="HTML"){var Q=R.getBody();Q.blur();setTimeout(function(){Q.focus()},0)}})}}function k(){a.onClick.add(function(Q,R){R=R.target;if(/^(IMG|HR)$/.test(R.nodeName)){o.getSel().setBaseAndExtent(R,0,R,1)
}if(R.nodeName=="A"&&f.hasClass(R,"mceItemAnchor")){o.select(R)}Q.nodeChanged()})}function d(){function R(){var T=f.getAttribs(o.getStart().cloneNode(false));return function(){var U=o.getStart();if(U!==a.getBody()){f.setAttrib(U,"style",null);J(T,function(V){U.setAttributeNode(V.cloneNode(true))})}}}function Q(){return !o.isCollapsed()&&f.getParent(o.getStart(),f.isBlock)!=f.getParent(o.getEnd(),f.isBlock)}function S(T,U){U.preventDefault();return false}a.onKeyPress.add(function(T,V){var U;if(!E(V)&&(V.keyCode==8||V.keyCode==46)&&Q()){U=R();T.getDoc().execCommand("delete",false,null);U();V.preventDefault();return false}});f.bind(a.getDoc(),"cut",function(U){var T;if(!E(U)&&Q()){T=R();a.onKeyUp.addToTop(S);setTimeout(function(){T();a.onKeyUp.remove(S)},0)}})}function b(){var R,Q;f.bind(a.getDoc(),"selectionchange",function(){if(Q){clearTimeout(Q);Q=0}Q=window.setTimeout(function(){var S=o.getRng();if(!R||!tinymce.dom.RangeUtils.compareRanges(S,R)){a.nodeChanged();R=S}},50)})}function C(){document.body.setAttribute("role","application")
}function z(){a.onKeyDown.add(function(Q,S){if(!E(S)&&S.keyCode===g){if(o.isCollapsed()&&o.getRng(true).startOffset===0){var R=o.getNode().previousSibling;if(R&&R.nodeName&&R.nodeName.toLowerCase()==="table"){return tinymce.dom.Event.cancel(S)}}}})}function H(){if(q()>7){return}F("RespectVisibilityInDesign",true);a.contentStyles.push(".mceHideBrInPre pre br {display: none}");f.addClass(a.getBody(),"mceHideBrInPre");B.addNodeFilter("pre",function(Q,S){var T=Q.length,V,R,W,U;while(T--){V=Q[T].getAll("br");R=V.length;while(R--){W=V[R];U=W.prev;if(U&&U.type===3&&U.value.charAt(U.value-1)!="\n"){U.value+="\n"}else{W.parent.insert(new tinymce.html.Node("#text",3),W,true).value="\n"}}}});r.addNodeFilter("pre",function(Q,S){var T=Q.length,V,R,W,U;while(T--){V=Q[T].getAll("br");R=V.length;while(R--){W=V[R];U=W.prev;if(U&&U.type==3){U.value=U.value.replace(/\r?\n$/,"")}}}})}function h(){f.bind(a.getBody(),"mouseup",function(S){var R,Q=o.getNode();if(Q.nodeName=="IMG"){if(R=f.getStyle(Q,"width")){f.setAttrib(Q,"width",R.replace(/[^0-9%]+/g,""));
f.setStyle(Q,"width","")}if(R=f.getStyle(Q,"height")){f.setAttrib(Q,"height",R.replace(/[^0-9%]+/g,""));f.setStyle(Q,"height","")}}})}function e(){a.onKeyDown.add(function(W,X){var V,Q,R,T,U,Y,S;V=X.keyCode==n;if(!E(X)&&(V||X.keyCode==g)&&!m.modifierPressed(X)){Q=o.getRng();R=Q.startContainer;T=Q.startOffset;S=Q.collapsed;if(R.nodeType==3&&R.nodeValue.length>0&&((T===0&&!S)||(S&&T===(V?0:1)))){nonEmptyElements=W.schema.getNonEmptyElements();X.preventDefault();U=f.create("br",{id:"__tmp"});R.parentNode.insertBefore(U,R);W.getDoc().execCommand(V?"ForwardDelete":"Delete",false,null);R=o.getRng().startContainer;Y=R.previousSibling;if(Y&&Y.nodeType==1&&!f.isBlock(Y)&&f.isEmpty(Y)&&!nonEmptyElements[Y.nodeName.toLowerCase()]){f.remove(Y)}f.remove("__tmp")}}})}function L(){a.onKeyDown.add(function(U,V){var S,R,W,Q,T;if(E(V)||V.keyCode!=m.BACKSPACE){return}S=o.getRng();R=S.startContainer;W=S.startOffset;Q=f.getRoot();T=R;if(!S.collapsed||W!==0){return}while(T&&T.parentNode&&T.parentNode.firstChild==T&&T.parentNode!=Q){T=T.parentNode
}if(T.tagName==="BLOCKQUOTE"){U.formatter.toggle("blockquote",null,T);S=f.createRng();S.setStart(R,0);S.setEnd(R,0);o.setRng(S)}})}function K(){function Q(){a._refreshContentEditable();F("StyleWithCSS",false);F("enableInlineTableEditing",false);if(!M.object_resizing){F("enableObjectResizing",false)}}if(!M.readonly){a.onBeforeExecCommand.add(Q);a.onMouseDown.add(Q)}}function v(){function Q(R,S){J(f.select("a"),function(V){var T=V.parentNode,U=f.getRoot();if(T.lastChild===V){while(T&&!f.isBlock(T)){if(T.parentNode.lastChild!==T||T===U){return}T=T.parentNode}f.add(T,"br",{"data-mce-bogus":1})}})}a.onExecCommand.add(function(R,S){if(S==="CreateLink"){Q(R)}});a.onSetContent.add(o.onSetContent.add(Q))}function p(){if(M.forced_root_block){a.onInit.add(function(){F("DefaultParagraphSeparator",M.forced_root_block)})}}function s(){function Q(S,R){if(!S||!R.initial){a.execCommand("mceRepaint")}}a.onUndo.add(Q);a.onRedo.add(Q);a.onSetContent.add(Q)}function l(){a.onKeyDown.add(function(R,S){var Q;if(!E(S)&&S.keyCode==g){Q=R.getDoc().selection.createRange();
if(Q&&Q.item){S.preventDefault();R.undoManager.beforeChange();f.remove(Q.item(0));R.undoManager.add()}}})}function u(){var Q;if(q()>=10){Q="";J("p div h1 h2 h3 h4 h5 h6".split(" "),function(R,S){Q+=(S>0?",":"")+R+":empty"});a.contentStyles.push(Q+"{padding-right: 1px !important}")}}function A(){var S,R,ai,Q,ad,ag,ae,ah,T,U,af,ab,aa,ac=document,Y=a.getDoc();if(!M.object_resizing||M.webkit_fake_resize===false){return}F("enableObjectResizing",false);af={n:[0.5,0,0,-1],e:[1,0.5,1,0],s:[0.5,1,0,1],w:[0,0.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};function W(am){var al,ak;al=am.screenX-ag;ak=am.screenY-ae;ab=al*ad[2]+ah;aa=ak*ad[3]+T;ab=ab<5?5:ab;aa=aa<5?5:aa;if(m.modifierPressed(am)||(ai.nodeName=="IMG"&&ad[2]*ad[3]!==0)){ab=Math.round(aa/U);aa=Math.round(ab*U)}f.setStyles(Q,{width:ab,height:aa});if(ad[2]<0&&Q.clientWidth<=ab){f.setStyle(Q,"left",S+(ah-ab))}if(ad[3]<0&&Q.clientHeight<=aa){f.setStyle(Q,"top",R+(T-aa))}}function aj(){function ak(al,am){if(am){if(ai.style[al]||!a.schema.isValid(ai.nodeName.toLowerCase(),al)){f.setStyle(ai,al,am)
}else{f.setAttrib(ai,al,am)}}}ak("width",ab);ak("height",aa);f.unbind(Y,"mousemove",W);f.unbind(Y,"mouseup",aj);if(ac!=Y){f.unbind(ac,"mousemove",W);f.unbind(ac,"mouseup",aj)}f.remove(Q);V(ai)}function V(an){var al,am,ak;X();al=f.getPos(an);S=al.x;R=al.y;am=an.offsetWidth;ak=an.offsetHeight;if(ai!=an){ai=an;ab=aa=0}J(af,function(aq,ao){var ap;ap=f.get("mceResizeHandle"+ao);if(!ap){ap=f.add(Y.documentElement,"div",{id:"mceResizeHandle"+ao,"class":"mceResizeHandle",style:"cursor:"+ao+"-resize; margin:0; padding:0"});f.bind(ap,"mousedown",function(ar){ar.preventDefault();aj();ag=ar.screenX;ae=ar.screenY;ah=ai.clientWidth;T=ai.clientHeight;U=T/ah;ad=aq;Q=ai.cloneNode(true);f.addClass(Q,"mceClonedResizable");f.setStyles(Q,{left:S,top:R,margin:0});Y.documentElement.appendChild(Q);f.bind(Y,"mousemove",W);f.bind(Y,"mouseup",aj);if(ac!=Y){f.bind(ac,"mousemove",W);f.bind(ac,"mouseup",aj)}})}else{f.show(ap)}f.setStyles(ap,{left:(am*aq[0]+S)-(ap.offsetWidth/2),top:(ak*aq[1]+R)-(ap.offsetHeight/2)})
});if(!tinymce.isOpera&&ai.nodeName=="IMG"){ai.setAttribute("data-mce-selected","1")}}function X(){if(ai){ai.removeAttribute("data-mce-selected")}for(var ak in af){f.hide("mceResizeHandle"+ak)}}a.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}");function Z(){var ak=f.getParent(o.getNode(),"table,img");J(f.select("img[data-mce-selected]"),function(al){al.removeAttribute("data-mce-selected")});if(ak){V(ak)}else{X()}}a.onNodeChange.add(Z);f.bind(Y,"selectionchange",Z);a.serializer.addAttributeFilter("data-mce-selected",function(ak,al){var am=ak.length;while(am--){ak[am].attr(al,null)}})}function I(){if(q()<9){B.addNodeFilter("noscript",function(Q){var R=Q.length,S,T;while(R--){S=Q[R];T=S.firstChild;
if(T){S.attr("data-mce-innertext",T.value)}}});r.addNodeFilter("noscript",function(Q){var R=Q.length,S,U,T;while(R--){S=Q[R];U=Q[R].firstChild;if(U){U.value=tinymce.html.Entities.decode(U.value)}else{T=S.attributes.map["data-mce-innertext"];if(T){S.attr("data-mce-innertext",null);U=new tinymce.html.Node("#text",3);U.value=T;U.raw=true;S.append(U)}}}})}}z();L();t();if(tinymce.isWebKit){e();O();P();k();p();if(tinymce.isIDevice){b()}else{A();N()}}if(tinymce.isIE){G();C();H();h();l();u();I()}if(tinymce.isGecko){G();D();d();K();v();s()}if(tinymce.isOpera){A()}};(function(m){var a,h,e,n=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,l={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};
h={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};e={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function k(o){var p;p=document.createElement("div");p.innerHTML=o;return p.textContent||p.innerText||o}function f(p,s){var q,r,o,t={};if(p){p=p.split(",");s=s||10;for(q=0;q<p.length;q+=2){r=String.fromCharCode(parseInt(p[q],s));if(!h[r]){o="&"+p[q+1]+";";t[r]=o;t[o]=r}}return t}}a=f("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);
m.html=m.html||{};m.html.Entities={encodeRaw:function(p,o){return p.replace(o?n:b,function(q){return h[q]||q})},encodeAllRaw:function(o){return(""+o).replace(g,function(p){return h[p]||p})},encodeNumeric:function(p,o){return p.replace(o?n:b,function(q){if(q.length>1){return"&#"+(((q.charCodeAt(0)-55296)*1024)+(q.charCodeAt(1)-56320)+65536)+";"}return h[q]||"&#"+q.charCodeAt(0)+";"})},encodeNamed:function(q,o,p){p=p||a;return q.replace(o?n:b,function(r){return h[r]||p[r]||r})},getEncodeFunc:function(o,r){var s=m.html.Entities;r=f(r)||a;function p(u,t){return u.replace(t?n:b,function(v){return h[v]||r[v]||"&#"+v.charCodeAt(0)+";"||v})}function q(u,t){return s.encodeNamed(u,t,r)}o=m.makeMap(o.replace(/\+/g,","));if(o.named&&o.numeric){return p}if(o.named){if(r){return q}return s.encodeNamed}if(o.numeric){return s.encodeNumeric}return s.encodeRaw},decode:function(o){return o.replace(d,function(q,p,r){if(p){r=parseInt(r,p.length===2?16:10);if(r>65535){r-=65536;return String.fromCharCode(55296+(r>>10),56320+(r&1023))
}else{return l[r]||String.fromCharCode(r)}}return e[q]||a[q]||k(q)})}}})(tinymce);tinymce.html.Styles=function(e,g){var m=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,k=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,n=/\s+$/,o=/rgb/,f,h,a={},l;e=e||{};l="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(h=0;h<l.length;h++){a[l[h]]="\uFEFF"+h;a["\uFEFF"+h]=l[h]}function d(q,u,t,p){function s(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}return"#"+s(u)+s(t)+s(p)}return{toHex:function(p){return p.replace(m,d)},parse:function(v){var E={},t,q,C,u,B=e.url_converter,D=e.url_converter_scope||this;function s(I,L){var K,H,G,J;K=E[I+"-top"+L];if(!K){return}H=E[I+"-right"+L];if(K!=H){return}G=E[I+"-bottom"+L];if(H!=G){return}J=E[I+"-left"+L];if(G!=J){return}E[I+L]=J;delete E[I+"-top"+L];delete E[I+"-right"+L];delete E[I+"-bottom"+L];delete E[I+"-left"+L]}function A(H){var I=E[H],G;
if(!I||I.indexOf(" ")<0){return}I=I.split(" ");G=I.length;while(G--){if(I[G]!==I[0]){return false}}E[H]=I[0];return true}function F(I,H,G,J){if(!A(H)){return}if(!A(G)){return}if(!A(J)){return}E[I]=E[H]+" "+E[G]+" "+E[J];delete E[H];delete E[G];delete E[J]}function z(G){u=true;return a[G]}function p(H,G){if(u){H=H.replace(/\uFEFF[0-9]/g,function(I){return a[I]})}if(!G){H=H.replace(/\\([\'\";:])/g,"$1")}return H}function r(H,G,K,J,L,I){L=L||I;if(L){L=p(L);return"'"+L.replace(/\'/g,"\\'")+"'"}G=p(G||K||J);if(B){G=B.call(D,G,"style")}return"url('"+G.replace(/\'/g,"\\'")+"')"}if(v){v=v.replace(/\\[\"\';:\uFEFF]/g,z).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(G){return G.replace(/[;:]/g,z)});while(t=b.exec(v)){q=t[1].replace(n,"").toLowerCase();C=t[2].replace(n,"");if(q&&C.length>0){if(q==="font-weight"&&C==="700"){C="bold"}else{if(q==="color"||q==="background-color"){C=C.toLowerCase()}}C=C.replace(m,d);C=C.replace(k,r);E[q]=u?p(C,true):C}b.lastIndex=t.index+t[0].length}s("border","");s("border","-width");
s("border","-color");s("border","-style");s("padding","");s("margin","");F("border","border-width","border-style","border-color");if(E.border==="medium none"){delete E.border}}return E},serialize:function(s,u){var r="",q,t;function p(z){var C,A,v,B;C=g.styles[z];if(C){for(A=0,v=C.length;A<v;A++){z=C[A];B=s[z];if(B!==f&&B.length>0){r+=(r.length>0?" ":"")+z+": "+B+";"}}}}if(u&&g&&g.styles){p("*");p(u)}else{for(q in s){t=s[q];if(t!==f&&t.length>0){r+=(r.length>0?" ":"")+q+": "+t+";"}}}return r}}};(function(g){var a={},f=g.makeMap,h=g.each;function e(m,l){return m.split(l||",")}function k(p,o){var m,n={};function l(q){return q.replace(/[A-Z]+/g,function(r){return l(p[r])})}for(m in p){if(p.hasOwnProperty(m)){p[m]=l(p[m])}}l(o).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(t,r,q,s){q=e(q,"|");n[r]={attributes:f(q),attributesOrder:q,children:f(s,"|",{"#comment":{}})}});return n}function b(){var l=a.html5;if(!l){l=a.html5=k({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")
}return l}function d(){var l=a.html4;if(!l){l=a.html4=k({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height|allowfullscreen][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")
}return l}g.html.Schema=function(F){var A=this,v={},n={},m=[],I,D;var r,t,E,u,B,q,s={};function p(K,J,M){var L=F[K];if(!L){L=a[K];if(!L){L=f(J," ",f(J.toUpperCase()," "));L=g.extend(L,M);a[K]=L}}else{L=f(L,",",f(L.toUpperCase()," "))}return L}F=F||{};D=F.schema=="html5"?b():d();if(F.verify_html===false){F.valid_elements="*[*]"}if(F.valid_styles){I={};h(F.valid_styles,function(K,J){I[J]=g.explode(K)})}r=p("whitespace_elements","pre script noscript style textarea");t=p("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");E=p("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr");u=p("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");q=p("non_empty_elements","td th iframe video audio object",E);textBlockElementsMap=p("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");
B=p("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap);function l(J){return new RegExp("^"+J.replace(/([?+*])/g,".$1")+"$")}function H(Q){var P,L,ae,aa,af,K,N,Z,ac,V,ad,ah,T,O,ab,J,X,M,ag,aj,U,Y,S=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,W=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,R=/[*?+]/;if(Q){Q=e(Q);if(v["@"]){X=v["@"].attributes;M=v["@"].attributesOrder}for(P=0,L=Q.length;P<L;P++){K=S.exec(Q[P]);if(K){ab=K[1];V=K[2];J=K[3];ac=K[4];T={};O=[];N={attributes:T,attributesOrder:O};if(ab==="#"){N.paddEmpty=true}if(ab==="-"){N.removeEmpty=true}if(X){for(aj in X){T[aj]=X[aj]}O.push.apply(O,M)}if(ac){ac=e(ac,"|");for(ae=0,aa=ac.length;ae<aa;ae++){K=W.exec(ac[ae]);if(K){Z={};ah=K[1];ad=K[2].replace(/::/g,":");ab=K[3];Y=K[4];if(ah==="!"){N.attributesRequired=N.attributesRequired||[];N.attributesRequired.push(ad);Z.required=true}if(ah==="-"){delete T[ad];O.splice(g.inArray(O,ad),1);
continue}if(ab){if(ab==="="){N.attributesDefault=N.attributesDefault||[];N.attributesDefault.push({name:ad,value:Y});Z.defaultValue=Y}if(ab===":"){N.attributesForced=N.attributesForced||[];N.attributesForced.push({name:ad,value:Y});Z.forcedValue=Y}if(ab==="<"){Z.validValues=f(Y,"?")}}if(R.test(ad)){N.attributePatterns=N.attributePatterns||[];Z.pattern=l(ad);N.attributePatterns.push(Z)}else{if(!T[ad]){O.push(ad)}T[ad]=Z}}}}if(!X&&V=="@"){X=T;M=O}if(J){N.outputName=V;v[J]=N}if(R.test(V)){N.pattern=l(V);m.push(N)}else{v[V]=N}}}}}function z(J){v={};m=[];H(J);h(D,function(L,K){n[K]=L.children})}function o(K){var J=/^(~)?(.+)$/;if(K){h(e(K),function(O){var M=J.exec(O),N=M[1]==="~",P=N?"span":"div",L=M[2];n[L]=n[P];s[L]=P;if(!N){B[L.toUpperCase()]={};B[L]={}}if(!v[L]){v[L]=v[P]}h(n,function(Q,R){if(Q[P]){Q[L]=Q[P]}})})}}function C(K){var J=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(K){h(e(K),function(O){var N=J.exec(O),L,M;if(N){M=N[1];if(M){L=n[N[2]]}else{L=n[N[2]]={"#comment":{}}}L=n[N[2]];h(e(N[3],"|"),function(P){if(M==="-"){delete L[P]
}else{L[P]={}}})}})}}function G(J){var L=v[J],K;if(L){return L}K=m.length;while(K--){L=m[K];if(L.pattern.test(J)){return L}}}if(!F.valid_elements){h(D,function(K,J){v[J]={attributes:K.attributes,attributesOrder:K.attributesOrder};n[J]=K.children});if(F.schema!="html5"){h(e("strong/b,em/i"),function(J){J=e(J,"/");v[J[1]].outputName=J[0]})}v.img.attributesDefault=[{name:"alt",value:""}];h(e("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(J){if(v[J]){v[J].removeEmpty=true}});h(e("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(J){v[J].paddEmpty=true})}else{z(F.valid_elements)}o(F.custom_elements);C(F.valid_children);H(F.extended_valid_elements);C("+ol[ul|ol],+ul[ul|ol]");if(F.invalid_elements){g.each(g.explode(F.invalid_elements),function(J){if(v[J]){delete v[J]}})}if(!G("span")){H("span[!data-mce-type|*]")}A.children=n;A.styles=I;A.getBoolAttrs=function(){return u};A.getBlockElements=function(){return B};A.getTextBlockElements=function(){return textBlockElementsMap
};A.getShortEndedElements=function(){return E};A.getSelfClosingElements=function(){return t};A.getNonEmptyElements=function(){return q};A.getWhiteSpaceElements=function(){return r};A.isValidChild=function(J,L){var K=n[J];return !!(K&&K[L])};A.isValid=function(K,J){var M,L,N=G(K);if(N){if(J){if(N.attributes[J]){return true}M=N.attributePatterns;if(M){L=M.length;while(L--){if(M[L].pattern.test(K)){return true}}}}else{return true}}return false};A.getElementRule=G;A.getCustomElements=function(){return s};A.addValidElements=H;A.setValidElements=z;A.addCustomElements=o;A.addValidChildren=C;A.elements=v}})(tinymce);(function(a){a.html.SaxParser=function(d,f){var b=this,e=function(){};d=d||{};b.schema=f=f||new a.html.Schema();if(d.fix_self_closing!==false){d.fix_self_closing=true}a.each("comment cdata text start end pi doctype".split(" "),function(g){if(g){b[g]=d[g]||e}});b.parse=function(I){var p=this,h,K=0,M,F,E=[],R,U,G,t,D,u,Q,L,S,A,o,m,v,V,q,T,J,W,P,g,N,n,H,O,k,B=0,l=a.html.Entities.decode,C,s;
function z(X){var Z,Y;Z=E.length;while(Z--){if(E[Z].name===X){break}}if(Z>=0){for(Y=E.length-1;Y>=Z;Y--){X=E[Y];if(X.valid){p.end(X.name)}}E.length=Z}}function r(Y,X,ac,ab,aa){var ad,Z;X=X.toLowerCase();ac=X in L?X:l(ac||ab||aa||"");if(A&&!D&&X.indexOf("data-")!==0){ad=T[X];if(!ad&&J){Z=J.length;while(Z--){ad=J[Z];if(ad.pattern.test(X)){break}}if(Z===-1){ad=null}}if(!ad){return}if(ad.validValues&&!(ac in ad.validValues)){return}}R.map[X]=ac;R.push({name:X,value:ac})}n=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;O={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};Q=f.getShortEndedElements();N=d.self_closing_elements||f.getSelfClosingElements();L=f.getBoolAttrs();
A=d.validate;u=d.remove_internals;C=d.fix_self_closing;s=a.isIE;q=/^:/;while(h=n.exec(I)){if(K<h.index){p.text(l(I.substr(K,h.index-K)))}if(M=h[6]){M=M.toLowerCase();if(s&&q.test(M)){M=M.substr(1)}z(M)}else{if(M=h[7]){M=M.toLowerCase();if(s&&q.test(M)){M=M.substr(1)}S=M in Q;if(C&&N[M]&&E.length>0&&E[E.length-1].name===M){z(M)}if(!A||(o=f.getElementRule(M))){m=true;if(A){T=o.attributes;J=o.attributePatterns}if(V=h[8]){D=V.indexOf("data-mce-type")!==-1;if(D&&u){m=false}R=[];R.map={};V.replace(H,r)}else{R=[];R.map={}}if(A&&!D){W=o.attributesRequired;P=o.attributesDefault;g=o.attributesForced;if(g){U=g.length;while(U--){v=g[U];t=v.name;k=v.value;if(k==="{$uid}"){k="mce_"+B++}R.map[t]=k;R.push({name:t,value:k})}}if(P){U=P.length;while(U--){v=P[U];t=v.name;if(!(t in R.map)){k=v.value;if(k==="{$uid}"){k="mce_"+B++}R.map[t]=k;R.push({name:t,value:k})}}}if(W){U=W.length;while(U--){if(W[U] in R.map){break}}if(U===-1){m=false}}if(R.map["data-mce-bogus"]){m=false}}if(m){p.start(M,R,S)}}else{m=false
}if(F=O[M]){F.lastIndex=K=h.index+h[0].length;if(h=F.exec(I)){if(m){G=I.substr(K,h.index-K)}K=h.index+h[0].length}else{G=I.substr(K);K=I.length}if(m&&G.length>0){p.text(G,true)}if(m){p.end(M)}n.lastIndex=K;continue}if(!S){if(!V||V.indexOf("/")!=V.length-1){E.push({name:M,valid:m})}else{if(m){p.end(M)}}}}else{if(M=h[1]){p.comment(M)}else{if(M=h[2]){p.cdata(M)}else{if(M=h[3]){p.doctype(M)}else{if(M=h[4]){p.pi(M,h[5])}}}}}}K=h.index+h[0].length}if(K<I.length){p.text(l(I.substr(K)))}for(U=E.length-1;U>=0;U--){M=E[U];if(M.valid){p.end(M.name)}}}}})(tinymce);(function(e){var d=/^[ \t\r\n]*$/,f={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(n,o,m){var l,k,g=m?"lastChild":"firstChild",h=m?"prev":"next";if(n[g]){return n[g]}if(n!==o){l=n[h];if(l){return l}for(k=n.parent;k&&k!==o;k=k.parent){l=k[h];if(l){return l}}}}function b(g,h){this.name=g;this.type=h;if(h===1){this.attributes=[];this.attributes.map={}}}e.extend(b.prototype,{replace:function(h){var g=this;
if(h.parent){h.remove()}g.insert(h,g);g.remove();return g},attr:function(k,n){var g=this,h,l,m;if(typeof k!=="string"){for(l in k){g.attr(l,k[l])}return g}if(h=g.attributes){if(n!==m){if(n===null){if(k in h.map){delete h.map[k];l=h.length;while(l--){if(h[l].name===k){h=h.splice(l,1);return g}}}return g}if(k in h.map){l=h.length;while(l--){if(h[l].name===k){h[l].value=n;break}}}else{h.push({name:k,value:n})}h.map[k]=n;return g}else{return h.map[k]}}},clone:function(){var h=this,p=new b(h.name,h.type),k,g,o,m,n;if(o=h.attributes){n=[];n.map={};for(k=0,g=o.length;k<g;k++){m=o[k];if(m.name!=="id"){n[n.length]={name:m.name,value:m.value};n.map[m.name]=m.value}}p.attributes=n}p.value=h.value;p.shortEnded=h.shortEnded;return p},wrap:function(h){var g=this;g.parent.insert(h,g);h.append(g);return g},unwrap:function(){var g=this,k,h;for(k=g.firstChild;k;){h=k.next;g.insert(k,g,true);k=h}g.remove()},remove:function(){var g=this,k=g.parent,h=g.next,l=g.prev;if(k){if(k.firstChild===g){k.firstChild=h;
if(h){h.prev=null}}else{l.next=h}if(k.lastChild===g){k.lastChild=l;if(l){l.next=null}}else{h.prev=l}g.parent=g.next=g.prev=null}return g},append:function(k){var g=this,h;if(k.parent){k.remove()}h=g.lastChild;if(h){h.next=k;k.prev=h;g.lastChild=k}else{g.lastChild=g.firstChild=k}k.parent=g;return k},insert:function(k,g,l){var h;if(k.parent){k.remove()}h=g.parent||this;if(l){if(g===h.firstChild){h.firstChild=k}else{g.prev.next=k}k.prev=g.prev;k.next=g;g.prev=k}else{if(g===h.lastChild){h.lastChild=k}else{g.next.prev=k}k.next=g.next;k.prev=g;g.next=k}k.parent=h;return k},getAll:function(h){var g=this,k,l=[];for(k=g.firstChild;k;k=a(k,g)){if(k.name===h){l.push(k)}}return l},empty:function(){var h=this,g,k,l;if(h.firstChild){g=[];for(l=h.firstChild;l;l=a(l,h)){g.push(l)}k=g.length;while(k--){l=g[k];l.parent=l.firstChild=l.lastChild=l.next=l.prev=null}}h.firstChild=h.lastChild=null;return h},isEmpty:function(m){var g=this,l=g.firstChild,k,h;if(l){do{if(l.type===1){if(l.attributes.map["data-mce-bogus"]){continue
}if(m[l.name]){return false}k=l.attributes.length;while(k--){h=l.attributes[k].name;if(h==="name"||h.indexOf("data-mce-")===0){return false}}}if(l.type===8){return false}if((l.type===3&&!d.test(l.value))){return false}}while(l=a(l,g))}return true},walk:function(g){return a(this,null,g)}});e.extend(b,{create:function(h,g){var l,k;l=new b(h,f[h]||1);if(g){for(k in g){l.attr(k,g[k])}}return l}});e.html.Node=b})(tinymce);(function(b){var a=b.html.Node;b.html.DomParser=function(h,k){var g=this,f={},e=[],l={},d={};h=h||{};h.validate="validate" in h?h.validate:true;h.root_name=h.root_name||"body";g.schema=k=k||new b.html.Schema();function m(q){var s,t,D,C,F,r,u,o,A,B,n,z,p,E,v;z=b.makeMap("tr,td,th,tbody,thead,tfoot,table");n=k.getNonEmptyElements();p=k.getTextBlockElements();for(s=0;s<q.length;s++){t=q[s];if(!t.parent||t.fixed){continue}if(p[t.name]&&t.parent.name=="li"){E=t.next;while(E){if(p[E.name]){E.name="li";E.fixed=true;t.parent.insert(E,t.parent)}else{break}E=E.next}t.unwrap(t);continue
}C=[t];for(D=t.parent;D&&!k.isValidChild(D.name,t.name)&&!z[D.name];D=D.parent){C.push(D)}if(D&&C.length>1){C.reverse();F=r=g.filterNode(C[0].clone());for(A=0;A<C.length-1;A++){if(k.isValidChild(r.name,C[A].name)){u=g.filterNode(C[A].clone());r.append(u)}else{u=r}for(o=C[A].firstChild;o&&o!=C[A+1];){v=o.next;u.append(o);o=v}r=u}if(!F.isEmpty(n)){D.insert(F,C[0],true);D.insert(t,F)}else{D.insert(t,C[0],true)}D=C[0];if(D.isEmpty(n)||D.firstChild===D.lastChild&&D.firstChild.name==="br"){D.empty().remove()}}else{if(t.parent){if(t.name==="li"){E=t.prev;if(E&&(E.name==="ul"||E.name==="ul")){E.append(t);continue}E=t.next;if(E&&(E.name==="ul"||E.name==="ul")){E.insert(t,E.firstChild,true);continue}t.wrap(g.filterNode(new a("ul",1)));continue}if(k.isValidChild(t.parent.name,"div")&&k.isValidChild("div",t.name)){t.wrap(g.filterNode(new a("div",1)))}else{if(t.name==="style"||t.name==="script"){t.empty().remove()}else{t.unwrap()}}}}}}g.filterNode=function(p){var o,n,q;if(n in f){q=l[n];if(q){q.push(p)
}else{l[n]=[p]}}o=e.length;while(o--){n=e[o].name;if(n in p.attributes.map){q=d[n];if(q){q.push(p)}else{d[n]=[p]}}}return p};g.addNodeFilter=function(n,o){b.each(b.explode(n),function(p){var q=f[p];if(!q){f[p]=q=[]}q.push(o)})};g.addAttributeFilter=function(n,o){b.each(b.explode(n),function(p){var q;for(q=0;q<e.length;q++){if(e[q].name===p){e[q].callbacks.push(o);return}}e.push({name:p,callbacks:[o]})})};g.parse=function(A,o){var p,N,F,E,H,G,B,t,J,R,D,q,I,Q=[],P,v,n,C,u,r,z,s;o=o||{};l={};d={};q=b.extend(b.makeMap("script,style,head,html,body,title,meta,param"),k.getBlockElements());z=k.getNonEmptyElements();r=k.children;D=h.validate;s="forced_root_block" in o?o.forced_root_block:h.forced_root_block;u=k.getWhiteSpaceElements();I=/^[ \t\r\n]+/;v=/[ \t\r\n]+$/;n=/[ \t\r\n]+/g;C=/^[ \t\r\n]+$/;function K(){var T=N.firstChild,S,U;while(T){S=T.next;if(T.type==3||(T.type==1&&T.name!=="p"&&!q[T.name]&&!T.attr("data-mce-type"))){if(!U){U=O(s,1);N.insert(U,T);U.append(T)}else{U.append(T)}}else{U=null
}T=S}}function O(S,T){var U=new a(S,T),V;if(S in f){V=l[S];if(V){V.push(U)}else{l[S]=[U]}}return U}function M(U){var V,S,T;for(V=U.prev;V&&V.type===3;){S=V.value.replace(v,"");if(S.length>0){V.value=S;V=V.prev}else{T=V.prev;V.remove();V=T}}}function L(T){var U,S={};for(U in T){if(U!=="li"&&U!="p"){S[U]=T[U]}}return S}p=new b.html.SaxParser({validate:D,self_closing_elements:L(k.getSelfClosingElements()),cdata:function(S){F.append(O("#cdata",4)).value=S},text:function(U,S){var T;if(!P){U=U.replace(n," ");if(F.lastChild&&q[F.lastChild.name]){U=U.replace(I,"")}}if(U.length!==0){T=O("#text",3);T.raw=!!S;F.append(T).value=U}},comment:function(S){F.append(O("#comment",8)).value=S},pi:function(S,T){F.append(O(S,7)).value=T;M(F)},doctype:function(T){var S;S=F.append(O("#doctype",10));S.value=T;M(F)},start:function(S,ab,U){var Z,W,V,T,X,ac,aa,Y;V=D?k.getElementRule(S):{};if(V){Z=O(V.outputName||S,1);Z.attributes=ab;Z.shortEnded=U;F.append(Z);Y=r[F.name];if(Y&&r[Z.name]&&!Y[Z.name]){Q.push(Z)}W=e.length;
while(W--){X=e[W].name;if(X in ab.map){J=d[X];if(J){J.push(Z)}else{d[X]=[Z]}}}if(q[S]){M(Z)}if(!U){F=Z}if(!P&&u[S]){P=true}}},end:function(S){var X,U,W,T,V;U=D?k.getElementRule(S):{};if(U){if(q[S]){if(!P){X=F.firstChild;if(X&&X.type===3){W=X.value.replace(I,"");if(W.length>0){X.value=W;X=X.next}else{T=X.next;X.remove();X=T}while(X&&X.type===3){W=X.value;T=X.next;if(W.length===0||C.test(W)){X.remove();X=T}X=T}}X=F.lastChild;if(X&&X.type===3){W=X.value.replace(v,"");if(W.length>0){X.value=W;X=X.prev}else{T=X.prev;X.remove();X=T}while(X&&X.type===3){W=X.value;T=X.prev;if(W.length===0||C.test(W)){X.remove();X=T}X=T}}}}if(P&&u[S]){P=false}if(U.removeEmpty||U.paddEmpty){if(F.isEmpty(z)){if(U.paddEmpty){F.empty().append(new a("#text","3")).value="\u00a0"}else{if(!F.attributes.map.name&&!F.attributes.map.id){V=F.parent;F.empty().remove();F=V;return}}}}F=F.parent}}},k);N=F=new a(o.context||h.root_name,11);p.parse(A);if(D&&Q.length){if(!o.context){m(Q)}else{o.invalid=true}}if(s&&N.name=="body"){K()
}if(!o.invalid){for(R in l){J=f[R];E=l[R];B=E.length;while(B--){if(!E[B].parent){E.splice(B,1)}}for(H=0,G=J.length;H<G;H++){J[H](E,R,o)}}for(H=0,G=e.length;H<G;H++){J=e[H];if(J.name in d){E=d[J.name];B=E.length;while(B--){if(!E[B].parent){E.splice(B,1)}}for(B=0,t=J.callbacks.length;B<t;B++){J.callbacks[B](E,J.name,o)}}}}return N};if(h.remove_trailing_brs){g.addNodeFilter("br",function(p,o){var t,s=p.length,q,A=b.extend({},k.getBlockElements()),n=k.getNonEmptyElements(),v,u,r,z;A.body=1;for(t=0;t<s;t++){q=p[t];v=q.parent;if(A[q.parent.name]&&q===v.lastChild){r=q.prev;while(r){z=r.name;if(z!=="span"||r.attr("data-mce-type")!=="bookmark"){if(z!=="br"){break}if(z==="br"){q=null;break}}r=r.prev}if(q){q.remove();if(v.isEmpty(n)){elementRule=k.getElementRule(v.name);if(elementRule){if(elementRule.removeEmpty){v.remove()}else{if(elementRule.paddEmpty){v.empty().append(new b.html.Node("#text",3)).value="\u00a0"}}}}}}else{u=q;while(v.firstChild===u&&v.lastChild===u){u=v;if(A[v.name]){break}v=v.parent
}if(u===v){textNode=new b.html.Node("#text",3);textNode.value="\u00a0";q.replace(textNode)}}}})}if(!h.allow_html_in_named_anchor){g.addAttributeFilter("id,name",function(n,o){var q=n.length,s,p,r,t;while(q--){t=n[q];if(t.name==="a"&&t.firstChild&&!t.attr("href")){r=t.parent;s=t.lastChild;do{p=s.prev;r.insert(s,t);s=p}while(s)}}})}}})(tinymce);tinymce.html.Writer=function(f){var d=[],a,b,e,g,h;f=f||{};a=f.indent;b=tinymce.makeMap(f.indent_before||"");e=tinymce.makeMap(f.indent_after||"");g=tinymce.html.Entities.getEncodeFunc(f.entity_encoding||"raw",f.entities);h=f.element_format=="html";return{start:function(o,n,r){var p,m,k,q;if(a&&b[o]&&d.length>0){q=d[d.length-1];if(q.length>0&&q!=="\n"){d.push("\n")}}d.push("<",o);if(n){for(p=0,m=n.length;p<m;p++){k=n[p];d.push(" ",k.name,'="',g(k.value,true),'"')}}if(!r||h){d[d.length]=">"}else{d[d.length]=" />"}if(r&&a&&e[o]&&d.length>0){q=d[d.length-1];if(q.length>0&&q!=="\n"){d.push("\n")}}},end:function(k){var l;d.push("</",k,">");if(a&&e[k]&&d.length>0){l=d[d.length-1];
if(l.length>0&&l!=="\n"){d.push("\n")}}},text:function(l,k){if(l.length>0){d[d.length]=k?l:g(l)}},cdata:function(k){d.push("<![CDATA[",k,"]]>")},comment:function(k){d.push("<!--",k,"-->")},pi:function(k,l){if(l){d.push("<?",k," ",l,"?>")}else{d.push("<?",k,"?>")}if(a){d.push("\n")}},doctype:function(k){d.push("<!DOCTYPE",k,">",a?"\n":"")},reset:function(){d.length=0},getContent:function(){return d.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(d,e){var b=this,f=new a.html.Writer(d);d=d||{};d.validate="validate" in d?d.validate:true;b.schema=e=e||new a.html.Schema();b.writer=f;b.serialize=function(k){var h,l;l=d.validate;h={3:function(n,m){f.text(n.value,n.raw)},8:function(m){f.comment(m.value)},7:function(m){f.pi(m.name,m.value)},10:function(m){f.doctype(m.value)},4:function(m){f.cdata(m.value)},11:function(m){if((m=m.firstChild)){do{g(m)}while(m=m.next)}}};f.reset();function g(n){var v=h[n.type],m,q,u,t,r,z,p,o,s;if(!v){m=n.name;q=n.shortEnded;u=n.attributes;if(l&&u&&u.length>1){z=[];
z.map={};s=e.getElementRule(n.name);for(p=0,o=s.attributesOrder.length;p<o;p++){t=s.attributesOrder[p];if(t in u.map){r=u.map[t];z.map[t]=r;z.push({name:t,value:r})}}for(p=0,o=u.length;p<o;p++){t=u[p].name;if(!(t in z.map)){r=u.map[t];z.map[t]=r;z.push({name:t,value:r})}}u=z}f.start(n.name,u,q);if(!q){if((n=n.firstChild)){do{g(n)}while(n=n.next)}f.end(m)}}else{v(n)}}if(k.type==1&&!d.inner){g(k)}else{h[11](k)}return f.getContent()}}})(tinymce);tinymce.dom={};(function(b,k){var h=!!document.addEventListener;function d(n,m,o,l){if(n.addEventListener){n.addEventListener(m,o,l||false)}else{if(n.attachEvent){n.attachEvent("on"+m,o)}}}function f(n,m,o,l){if(n.removeEventListener){n.removeEventListener(m,o,l||false)}else{if(n.detachEvent){n.detachEvent("on"+m,o)}}}function a(q,o){var l,n=o||{};function m(){return false}function p(){return true}for(l in q){if(l!=="layerX"&&l!=="layerY"){n[l]=q[l]}}if(!n.target){n.target=n.srcElement||document}n.preventDefault=function(){n.isDefaultPrevented=p;if(q){if(q.preventDefault){q.preventDefault()
}else{q.returnValue=false}}};n.stopPropagation=function(){n.isPropagationStopped=p;if(q){if(q.stopPropagation){q.stopPropagation()}else{q.cancelBubble=true}}};n.stopImmediatePropagation=function(){n.isImmediatePropagationStopped=p;n.stopPropagation()};if(!n.isDefaultPrevented){n.isDefaultPrevented=m;n.isPropagationStopped=m;n.isImmediatePropagationStopped=m}return n}function e(p,q,o){var n=p.document,m={type:"ready"};function l(){if(!o.domLoaded){o.domLoaded=true;q(m)}}if(n.readyState=="complete"){l();return}if(h){d(p,"DOMContentLoaded",l)}else{d(n,"readystatechange",function(){if(n.readyState==="complete"){f(n,"readystatechange",arguments.callee);l()}});if(n.documentElement.doScroll&&p===p.top){(function(){try{n.documentElement.doScroll("left")}catch(r){setTimeout(arguments.callee,0);return}l()})()}}d(p,"load",l)}function g(n){var t=this,s={},l,r,q,p,o;p="onmouseenter" in document.documentElement;q="onfocusin" in document.documentElement;o={mouseenter:"mouseover",mouseleave:"mouseout"};
l=1;t.domLoaded=false;t.events=s;function m(z,C){var v,A,u,B;v=s[C][z.type];if(v){for(A=0,u=v.length;A<u;A++){B=v[A];if(B&&B.func.call(B.scope,z)===false){z.preventDefault()}if(z.isImmediatePropagationStopped()){return}}}}t.bind=function(C,F,I,J){var v,z,A,u,G,E,H,B=window;function D(K){m(a(K||B.event),v)}if(!C||C.nodeType===3||C.nodeType===8){return}if(!C[k]){v=l++;C[k]=v;s[v]={}}else{v=C[k];if(!s[v]){s[v]={}}}J=J||C;F=F.split(" ");A=F.length;while(A--){u=F[A];E=D;G=H=false;if(u==="DOMContentLoaded"){u="ready"}if((t.domLoaded||C.readyState=="complete")&&u==="ready"){t.domLoaded=true;I.call(J,a({type:u}));continue}if(!p){G=o[u];if(G){E=function(K){var M,L;M=K.currentTarget;L=K.relatedTarget;if(L&&M.contains){L=M.contains(L)}else{while(L&&L!==M){L=L.parentNode}}if(!L){K=a(K||B.event);K.type=K.type==="mouseout"?"mouseleave":"mouseenter";K.target=M;m(K,v)}}}}if(!q&&(u==="focusin"||u==="focusout")){H=true;G=u==="focusin"?"focus":"blur";E=function(K){K=a(K||B.event);K.type=K.type==="focus"?"focusin":"focusout";
m(K,v)}}z=s[v][u];if(!z){s[v][u]=z=[{func:I,scope:J}];z.fakeName=G;z.capture=H;z.nativeHandler=E;if(!h){z.proxyHandler=n(v)}if(u==="ready"){e(C,E,t)}else{d(C,G||u,h?E:z.proxyHandler,H)}}else{z.push({func:I,scope:J})}}C=z=0;return I};t.unbind=function(C,E,F){var v,A,B,G,u,z;if(!C||C.nodeType===3||C.nodeType===8){return t}v=C[k];if(v){z=s[v];if(E){E=E.split(" ");B=E.length;while(B--){u=E[B];A=z[u];if(A){if(F){G=A.length;while(G--){if(A[G].func===F){A.splice(G,1)}}}if(!F||A.length===0){delete z[u];f(C,A.fakeName||u,h?A.nativeHandler:A.proxyHandler,A.capture)}}}}else{for(u in z){A=z[u];f(C,A.fakeName||u,h?A.nativeHandler:A.proxyHandler,A.capture)}z={}}for(u in z){return t}delete s[v];try{delete C[k]}catch(D){C[k]=null}}return t};t.fire=function(A,v,u){var B,z;if(!A||A.nodeType===3||A.nodeType===8){return t}z=a(null,u);z.type=v;do{B=A[k];if(B){m(z,B)}A=A.parentNode||A.ownerDocument||A.defaultView||A.parentWindow}while(A&&!z.isPropagationStopped());return t};t.clean=function(A){var v,u,z=t.unbind;
if(!A||A.nodeType===3||A.nodeType===8){return t}if(A[k]){z(A)}if(!A.getElementsByTagName){A=A.document}if(A&&A.getElementsByTagName){z(A);u=A.getElementsByTagName("*");v=u.length;while(v--){A=u[v];if(A[k]){z(A)}}}return t};t.callNativeHandler=function(v,u){if(s){s[v][u.type].nativeHandler(u)}};t.destory=function(){s={}};t.add=function(B,v,A,z){if(typeof(B)==="string"){B=document.getElementById(B)}if(B&&B instanceof Array){var u=B.length;while(u--){t.add(B[u],v,A,z)}return}if(v==="init"){v="ready"}return t.bind(B,v instanceof Array?v.join(" "):v,A,z)};t.remove=function(B,v,A,z){if(!B){return t}if(typeof(B)==="string"){B=document.getElementById(B)}if(B instanceof Array){var u=B.length;while(u--){t.remove(B[u],v,A,z)}return t}return t.unbind(B,v instanceof Array?v.join(" "):v,A)};t.clear=function(u){if(typeof(u)==="string"){u=document.getElementById(u)}return t.clean(u)};t.cancel=function(u){if(u){t.prevent(u);t.stop(u)}return false};t.prevent=function(u){if(!u.preventDefault){u=a(u)}u.preventDefault();
return false};t.stop=function(u){if(!u.stopPropagation){u=a(u)}u.stopPropagation();return false}}b.EventUtils=g;b.Event=new g(function(l){return function(m){tinymce.dom.Event.callNativeHandler(l,m)}});b.Event.bind(window,"ready",function(){});b=0})(tinymce.dom,"data-mce-expando");tinymce.dom.TreeWalker=function(a,d){var b=a;function e(l,g,f,m){var k,h;if(l){if(!m&&l[g]){return l[g]}if(l!=d){k=l[f];if(k){return k}for(h=l.parentNode;h&&h!=d;h=h.parentNode){k=h[f];if(k){return k}}}}}this.current=function(){return b};this.next=function(f){return(b=e(b,"firstChild","nextSibling",f))};this.prev=function(f){return(b=e(b,"lastChild","previousSibling",f))}};(function(f){var h=f.each,e=f.is,g=f.isWebKit,b=f.isIE,k=f.html.Entities,d=/^([a-z0-9],?)+$/i,a=/^[ \t\r\n]*$/;f.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(r,o){var n=this,l,m,q;
n.doc=r;n.win=window;n.files={};n.cssFlicker=false;n.counter=0;n.stdMode=!f.isIE||r.documentMode>=8;n.boxModel=!f.isIE||r.compatMode=="CSS1Compat"||n.stdMode;n.hasOuterHTML="outerHTML" in r.createElement("a");n.settings=o=f.extend({keep_values:false,hex_colors:1},o);n.schema=o.schema;n.styles=new f.html.Styles({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema);if(f.isIE6){try{r.execCommand("BackgroundImageCache",false,true)}catch(p){n.cssFlicker=true}}n.fixDoc(r);n.events=o.ownEvents?new f.dom.EventUtils(o.proxy):f.dom.Event;f.addUnload(n.destroy,n);q=o.schema?o.schema.getBlockElements():{};n.isBlock=function(t){if(!t){return false}var s=t.nodeType;if(s){return !!(s===1&&q[t.nodeName])}return !!q[t]}},fixDoc:function(n){var m=this.settings,l;if(b&&m.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(o){n.createElement(o)});for(l in m.schema.getCustomElements()){n.createElement(l)
}}},clone:function(n,l){var m=this,p,o;if(!b||n.nodeType!==1||l){return n.cloneNode(l)}o=m.doc;if(!l){p=o.createElement(n.nodeName);h(m.getAttribs(n),function(q){m.setAttrib(p,q.nodeName,m.getAttrib(n,q.nodeName))});return p}return p.firstChild},getRoot:function(){var l=this,m=l.settings;return(m&&l.get(m.root_element))||l.doc.body},getViewPort:function(m){var n,l;m=!m?this.win:m;n=m.document;l=this.boxModel?n.documentElement:n.body;return{x:m.pageXOffset||l.scrollLeft,y:m.pageYOffset||l.scrollTop,w:m.innerWidth||l.clientWidth,h:m.innerHeight||l.clientHeight}},getRect:function(o){var n,l=this,m;o=l.get(o);n=l.getPos(o);m=l.getSize(o);return{x:n.x,y:n.y,w:m.w,h:m.h}},getSize:function(o){var m=this,l,n;o=m.get(o);l=m.getStyle(o,"width");n=m.getStyle(o,"height");if(l.indexOf("px")===-1){l=0}if(n.indexOf("px")===-1){n=0}return{w:parseInt(l,10)||o.offsetWidth||o.clientWidth,h:parseInt(n,10)||o.offsetHeight||o.clientHeight}},getParent:function(o,m,l){return this.getParents(o,m,l,false)},getParents:function(z,s,p,v){var m=this,l,q=m.settings,u=[];
z=m.get(z);v=v===undefined;if(q.strict_root){p=p||m.getRoot()}if(e(s,"string")){l=s;if(s==="*"){s=function(o){return o.nodeType==1}}else{s=function(o){return m.is(o,l)}}}while(z){if(z==p||!z.nodeType||z.nodeType===9){break}if(!s||s(z)){if(v){u.push(z)}else{return z}}z=z.parentNode}return v?u:null},get:function(l){var m;if(l&&this.doc&&typeof(l)=="string"){m=l;l=this.doc.getElementById(l);if(l&&l.id!==m){return this.doc.getElementsByName(m)[1]}}return l},getNext:function(m,l){return this._findSib(m,l,"nextSibling")},getPrev:function(m,l){return this._findSib(m,l,"previousSibling")},select:function(n,m){var l=this;return f.dom.Sizzle(n,l.get(m)||l.get(l.settings.root_element)||l.doc,[])},is:function(o,l){var m;if(o.length===undefined){if(l==="*"){return o.nodeType==1}if(d.test(l)){l=l.toLowerCase().split(/,/);o=o.nodeName.toLowerCase();for(m=l.length-1;m>=0;m--){if(l[m]==o){return true}}return false}}return f.dom.Sizzle.matches(l,o.nodeType?[o]:o).length>0},add:function(q,s,l,o,r){var m=this;
return this.run(q,function(u){var t,n;t=e(s,"string")?m.doc.createElement(s):s;m.setAttribs(t,l);if(o){if(o.nodeType){t.appendChild(o)}else{m.setHTML(t,o)}}return !r?u.appendChild(t):t})},create:function(o,l,m){return this.add(this.doc.createElement(o),o,l,m,1)},createHTML:function(s,l,q){var r="",p=this,m;r+="<"+s;for(m in l){if(l.hasOwnProperty(m)){r+=" "+m+'="'+p.encode(l[m])+'"'}}if(typeof(q)!="undefined"){return r+">"+q+"</"+s+">"}return r+" />"},remove:function(l,m){return this.run(l,function(o){var p,n=o.parentNode;if(!n){return null}if(m){while(p=o.firstChild){if(!f.isIE||p.nodeType!==3||p.nodeValue){n.insertBefore(p,o)}else{o.removeChild(p)}}}return n.removeChild(o)})},setStyle:function(p,l,m){var o=this;return o.run(p,function(r){var q,n;q=r.style;l=l.replace(/-(\D)/g,function(t,s){return s.toUpperCase()});if(o.pixelStyles.test(l)&&(f.is(m,"number")||/^[\-0-9\.]+$/.test(m))){m+="px"}switch(l){case"opacity":if(b){q.filter=m===""?"":"alpha(opacity="+(m*100)+")";if(!p.currentStyle||!p.currentStyle.hasLayout){q.display="inline-block"
}}q[l]=q["-moz-opacity"]=q["-khtml-opacity"]=m||"";break;case"float":b?q.styleFloat=m:q.cssFloat=m;break;default:q[l]=m||""}if(o.settings.update_styles){o.setAttrib(r,"data-mce-style")}})},getStyle:function(p,l,o){p=this.get(p);if(!p){return}if(this.doc.defaultView&&o){l=l.replace(/[A-Z]/g,function(n){return"-"+n});try{return this.doc.defaultView.getComputedStyle(p,null).getPropertyValue(l)}catch(m){return null}}l=l.replace(/-(\D)/g,function(q,n){return n.toUpperCase()});if(l=="float"){l=b?"styleFloat":"cssFloat"}if(p.currentStyle&&o){return p.currentStyle[l]}return p.style?p.style[l]:undefined},setStyles:function(p,q){var m=this,n=m.settings,l;l=n.update_styles;n.update_styles=0;h(q,function(o,r){m.setStyle(p,r,o)});n.update_styles=l;if(n.update_styles){m.setAttrib(p,n.cssText)}},removeAllAttribs:function(l){return this.run(l,function(o){var n,m=o.attributes;for(n=m.length-1;n>=0;n--){o.removeAttributeNode(m.item(n))}})},setAttrib:function(o,p,l){var m=this;if(!o||!p){return}if(m.settings.strict){p=p.toLowerCase()
}return this.run(o,function(t){var r=m.settings;var n=t.getAttribute(p);if(l!==null){switch(p){case"style":if(!e(l,"string")){h(l,function(s,u){m.setStyle(t,u,s)});return}if(r.keep_values){if(l&&!m._isRes(l)){t.setAttribute("data-mce-style",l,2)}else{t.removeAttribute("data-mce-style",2)}}t.style.cssText=l;break;case"class":t.className=l||"";break;case"src":case"href":if(r.keep_values){if(r.url_converter){l=r.url_converter.call(r.url_converter_scope||m,l,p,t)}m.setAttrib(t,"data-mce-"+p,l,2)}break;case"shape":t.setAttribute("data-mce-style",l);break}}if(e(l)&&l!==null&&l.length!==0){t.setAttribute(p,""+l,2)}else{t.removeAttribute(p,2)}if(tinyMCE.activeEditor&&n!=l){var q=tinyMCE.activeEditor;q.onSetAttrib.dispatch(q,t,p,l)}})},setAttribs:function(m,n){var l=this;return this.run(m,function(o){h(n,function(p,q){l.setAttrib(o,q,p)})})},getAttrib:function(q,r,o){var l,m=this,p;q=m.get(q);if(!q||q.nodeType!==1){return o===p?false:o}if(!e(o)){o=""}if(/^(src|href|style|coords|shape)$/.test(r)){l=q.getAttribute("data-mce-"+r);
if(l){return l}}if(b&&m.props[r]){l=q[m.props[r]];l=l&&l.nodeValue?l.nodeValue:l}if(!l){l=q.getAttribute(r,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(r)){if(q[m.props[r]]===true&&l===""){return r}return l?r:""}if(q.nodeName==="FORM"&&q.getAttributeNode(r)){return q.getAttributeNode(r).nodeValue}if(r==="style"){l=l||q.style.cssText;if(l){l=m.serializeStyle(m.parseStyle(l),q.nodeName);if(m.settings.keep_values&&!m._isRes(l)){q.setAttribute("data-mce-style",l)}}}if(g&&r==="class"&&l){l=l.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(b){switch(r){case"rowspan":case"colspan":if(l===1){l=""}break;case"size":if(l==="+0"||l===20||l===0){l=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(l===0){l=""}break;case"hspace":if(l===-1){l=""}break;case"maxlength":case"tabindex":if(l===32768||l===2147483647||l==="32768"){l=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(l===65535){return r
}return o;case"shape":l=l.toLowerCase();break;default:if(r.indexOf("on")===0&&l){l=f._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+l)}}}return(l!==p&&l!==null&&l!=="")?""+l:o},getPos:function(v,p){var m=this,l=0,u=0,q,s=m.doc,o;v=m.get(v);p=p||s.body;if(v){if(v.getBoundingClientRect){v=v.getBoundingClientRect();q=m.boxModel?s.documentElement:s.body;l=v.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-q.clientTop;u=v.top+(s.documentElement.scrollTop||s.body.scrollTop)-q.clientLeft;return{x:l,y:u}}o=v;while(o&&o!=p&&o.nodeType){l+=o.offsetLeft||0;u+=o.offsetTop||0;o=o.offsetParent}o=v.parentNode;while(o&&o!=p&&o.nodeType){l-=o.scrollLeft||0;u-=o.scrollTop||0;o=o.parentNode}}return{x:l,y:u}},parseStyle:function(l){return this.styles.parse(l)},serializeStyle:function(m,l){return this.styles.serialize(m,l)},addStyle:function(m){var n=this.doc,l;styleElm=n.getElementById("mceDefaultStyles");if(!styleElm){styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles";styleElm.type="text/css";
l=n.getElementsByTagName("head")[0];if(l.firstChild){l.insertBefore(styleElm,l.firstChild)}else{l.appendChild(styleElm)}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=m}else{styleElm.appendChild(n.createTextNode(m))}},loadCSS:function(l){var n=this,o=n.doc,m;if(!l){l=""}m=o.getElementsByTagName("head")[0];h(l.split(","),function(p){var q;if(n.files[p]){return}n.files[p]=true;q=n.create("link",{rel:"stylesheet",href:f._addVer(p)});if(b&&o.documentMode&&o.recalc){q.onload=function(){if(o.recalc){o.recalc()}q.onload=null}}m.appendChild(q)})},addClass:function(l,m){return this.run(l,function(n){var p;if(!m){return 0}if(this.hasClass(n,m)){return n.className}p=this.removeClass(n,m);return n.className=(p!=""?(p+" "):"")+m})},removeClass:function(n,o){var l=this,m;return l.run(n,function(q){var p;if(l.hasClass(q,o)){if(!m){m=new RegExp("(^|\\s+)"+o+"(\\s+|$)","g")}p=q.className.replace(m," ");p=f.trim(p!=" "?p:"");q.className=p;if(!p){q.removeAttribute("class");q.removeAttribute("className")
}return p}return q.className})},hasClass:function(m,l){m=this.get(m);if(!m||!l){return false}return(" "+m.className+" ").indexOf(" "+l+" ")!==-1},show:function(l){return this.setStyle(l,"display","block")},hide:function(l){return this.setStyle(l,"display","none")},isHidden:function(l){l=this.get(l);return !l||l.style.display=="none"||this.getStyle(l,"display")=="none"},uniqueId:function(l){return(!l?"mce_":l)+(this.counter++)},setHTML:function(n,m){var l=this;return l.run(n,function(p){if(b){while(p.firstChild){p.removeChild(p.firstChild)}try{p.innerHTML="<br />"+m;p.removeChild(p.firstChild)}catch(o){var q=l.create("div");q.innerHTML="<br />"+m;h(f.grep(q.childNodes),function(s,r){if(r&&p.canHaveHTML){p.appendChild(s)}})}}else{p.innerHTML=m}return m})},getOuterHTML:function(n){var m,l=this;n=l.get(n);if(!n){return null}if(n.nodeType===1&&l.hasOuterHTML){return n.outerHTML}m=(n.ownerDocument||l.doc).createElement("body");m.appendChild(n.cloneNode(true));return m.innerHTML},setOuterHTML:function(o,m,p){var l=this;
function n(r,q,t){var u,s;s=t.createElement("body");s.innerHTML=q;u=s.lastChild;while(u){l.insertAfter(u.cloneNode(true),r);u=u.previousSibling}l.remove(r)}return this.run(o,function(r){r=l.get(r);if(r.nodeType==1){p=p||r.ownerDocument||l.doc;if(b){try{if(b&&r.nodeType==1){r.outerHTML=m}else{n(r,m,p)}}catch(q){n(r,m,p)}}else{n(r,m,p)}}})},decode:k.decode,encode:k.encodeAllRaw,insertAfter:function(l,m){m=this.get(m);return this.run(l,function(o){var n,p;n=m.parentNode;p=m.nextSibling;if(p){n.insertBefore(o,p)}else{n.appendChild(o)}return o})},replace:function(q,p,l){var m=this;if(e(p,"array")){q=q.cloneNode(true)}return m.run(p,function(n){if(l){h(f.grep(n.childNodes),function(o){q.appendChild(o)})}return n.parentNode.replaceChild(q,n)})},rename:function(o,l){var n=this,m;if(o.nodeName!=l.toUpperCase()){m=n.create(l);h(n.getAttribs(o),function(p){n.setAttrib(m,p.nodeName,n.getAttrib(o,p.nodeName))});n.replace(m,o,1)}return m||o},findCommonAncestor:function(n,l){var o=n,m;while(o){m=l;while(m&&o!=m){m=m.parentNode
}if(o==m){break}o=o.parentNode}if(!o&&n.ownerDocument){return n.ownerDocument.documentElement}return o},toHex:function(l){var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(l);function m(o){o=parseInt(o,10).toString(16);return o.length>1?o:"0"+o}if(n){l="#"+m(n[1])+m(n[2])+m(n[3]);return l}return l},getClasses:function(){var p=this,l=[],o,q={},r=p.settings.class_filter,n;if(p.classes){return p.classes}function s(t){h(t.imports,function(u){s(u)});h(t.cssRules||t.rules,function(u){switch(u.type||1){case 1:if(u.selectorText){h(u.selectorText.split(","),function(z){z=z.replace(/^\s*|\s*$|^\s\./g,"");if(/\.(mce|s_)/.test(z)||!/\.[\w\-]+$/.test(z)){return}n=z;z=f._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",z);if(r&&!(z=r(z,n))){return}if(!q[z]){l.push({"class":z});q[z]=1}})}break;case 3:s(u.styleSheet);break}})}try{h(p.doc.styleSheets,s)}catch(m){}if(l.length>0){p.classes=l}return l},run:function(p,n,m){var l=this,q;if(l.doc&&typeof(p)==="string"){p=l.get(p)}if(!p){return false
}m=m||this;if(!p.nodeType&&(p.length||p.length===0)){q=[];h(p,function(r,o){if(r){if(typeof(r)=="string"){r=l.doc.getElementById(r)}q.push(n.call(m,r,o))}});return q}return n.call(m,p)},getAttribs:function(m){var l;m=this.get(m);if(!m){return[]}if(b){l=[];if(m.nodeName=="OBJECT"){return m.attributes}if(m.nodeName==="OPTION"&&this.getAttrib(m,"selected")){l.push({specified:1,nodeName:"selected"})}m.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(n){l.push({specified:1,nodeName:n})});return l}return m.attributes},isEmpty:function(o,m){var t=this,q,p,s,l,n,r=0;o=o.firstChild;if(o){l=new f.dom.TreeWalker(o,o.parentNode);m=m||t.schema?t.schema.getNonEmptyElements():null;do{s=o.nodeType;if(s===1){if(o.getAttribute("data-mce-bogus")){continue}n=o.nodeName.toLowerCase();if(m&&m[n]){if(n==="br"){r++;continue}return false}p=t.getAttribs(o);q=o.attributes.length;while(q--){n=o.attributes[q].nodeName;if(n==="name"||n==="data-mce-bookmark"){return false
}}}if(s==8){return false}if((s===3&&!a.test(o.nodeValue))){return false}}while(o=l.next())}return r<=1},destroy:function(m){var l=this;l.win=l.doc=l.root=l.events=l.frag=null;if(!m){f.removeUnload(l.destroy)}},createRng:function(){var l=this.doc;return l.createRange?l.createRange():new f.dom.Range(this)},nodeIndex:function(p,q){var l=0,n,o,m;if(p){for(n=p.nodeType,p=p.previousSibling,o=p;p;p=p.previousSibling){m=p.nodeType;if(q&&m==3){if(m==n||!p.nodeValue.length){continue}}l++;n=m}}return l},split:function(p,o,u){var v=this,l=v.createRng(),q,n,s;function m(B){var z,t=B.childNodes,A=B.nodeType;function C(F){var E=F.previousSibling&&F.previousSibling.nodeName=="SPAN";var D=F.nextSibling&&F.nextSibling.nodeName=="SPAN";return E&&D}if(A==1&&B.getAttribute("data-mce-type")=="bookmark"){return}for(z=t.length-1;z>=0;z--){m(t[z])}if(A!=9){if(A==3&&B.nodeValue.length>0){var r=f.trim(B.nodeValue).length;if(!v.isBlock(B.parentNode)||r>0||r===0&&C(B)){return}}else{if(A==1){t=B.childNodes;if(t.length==1&&t[0]&&t[0].nodeType==1&&t[0].getAttribute("data-mce-type")=="bookmark"){B.parentNode.insertBefore(t[0],B)
}if(t.length||/^(br|hr|input|img)$/i.test(B.nodeName)){return}}}v.remove(B)}return B}if(p&&o){l.setStart(p.parentNode,v.nodeIndex(p));l.setEnd(o.parentNode,v.nodeIndex(o));q=l.extractContents();l=v.createRng();l.setStart(o.parentNode,v.nodeIndex(o)+1);l.setEnd(p.parentNode,v.nodeIndex(p)+1);n=l.extractContents();s=p.parentNode;s.insertBefore(m(q),p);if(u){s.replaceChild(u,o)}else{s.insertBefore(o,p)}s.insertBefore(m(n),p);v.remove(p);return u||o}},bind:function(o,l,n,m){return this.events.add(o,l,n,m||this)},unbind:function(n,l,m){return this.events.remove(n,l,m)},fire:function(n,m,l){return this.events.fire(n,m,l)},getContentEditable:function(m){var l;if(m.nodeType!=1){return null}l=m.getAttribute("data-mce-contenteditable");if(l&&l!=="inherit"){return l}return m.contentEditable!=="inherit"?m.contentEditable:null},_findSib:function(o,l,m){var n=this,p=l;if(o){if(e(p,"string")){p=function(q){return n.is(q,l)}}for(o=o[m];o;o=o[m]){if(p(o)){return o}}}return null},_isRes:function(l){return/^(top|left|bottom|right|width|height)/i.test(l)||/;\s*(top|left|bottom|right|width|height)/i.test(l)
}});f.DOM=new f.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(d){var T=this,f=d.doc,Z=0,K=1,m=2,J=true,X=false,ab="startOffset",k="startContainer",V="endContainer",F="endOffset",n=tinymce.extend,q=d.nodeIndex;n(T,{startContainer:f,startOffset:0,endContainer:f,endOffset:0,collapsed:J,commonAncestorContainer:f,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:u,setEnd:z,setStartBefore:h,setStartAfter:O,setEndBefore:P,setEndAfter:A,collapse:G,selectNode:D,selectNodeContents:L,compareBoundaryPoints:B,deleteContents:s,extractContents:N,cloneContents:e,insertNode:I,surroundContents:S,cloneRange:Q,toStringIE:Y});function C(){return f.createDocumentFragment()}function u(ac,t){H(J,ac,t)}function z(ac,t){H(X,ac,t)}function h(t){u(t.parentNode,q(t))}function O(t){u(t.parentNode,q(t)+1)}function P(t){z(t.parentNode,q(t))}function A(t){z(t.parentNode,q(t)+1)}function G(t){if(t){T[V]=T[k];T[F]=T[ab]}else{T[k]=T[V];T[ab]=T[F]}T.collapsed=J}function D(t){h(t);
A(t)}function L(t){u(t,0);z(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length)}function B(af,t){var ai=T[k],ad=T[ab],ah=T[V],ac=T[F],ag=t.startContainer,ak=t.startOffset,ae=t.endContainer,aj=t.endOffset;if(af===0){return M(ai,ad,ag,ak)}if(af===1){return M(ah,ac,ag,ak)}if(af===2){return M(ah,ac,ae,aj)}if(af===3){return M(ai,ad,ae,aj)}}function s(){o(m)}function N(){return o(Z)}function e(){return o(K)}function I(af){var ac=this[k],t=this[ab],ae,ad;if((ac.nodeType===3||ac.nodeType===4)&&ac.nodeValue){if(!t){ac.parentNode.insertBefore(af,ac)}else{if(t>=ac.nodeValue.length){d.insertAfter(af,ac)}else{ae=ac.splitText(t);ac.parentNode.insertBefore(af,ae)}}}else{if(ac.childNodes.length>0){ad=ac.childNodes[t]}if(ad){ac.insertBefore(af,ad)}else{ac.appendChild(af)}}}function S(ac){var t=T.extractContents();T.insertNode(ac);ac.appendChild(t);T.selectNode(ac)}function Q(){return n(new b(d),{startContainer:T[k],startOffset:T[ab],endContainer:T[V],endOffset:T[F],collapsed:T.collapsed,commonAncestorContainer:T.commonAncestorContainer})
}function U(t,ac){var ad;if(t.nodeType==3){return t}if(ac<0){return t}ad=t.firstChild;while(ad&&ac>0){--ac;ad=ad.nextSibling}if(ad){return ad}return t}function p(){return(T[k]==T[V]&&T[ab]==T[F])}function M(ae,ag,ac,af){var ah,ad,t,ai,ak,aj;if(ae==ac){if(ag==af){return 0}if(ag<af){return -1}return 1}ah=ac;while(ah&&ah.parentNode!=ae){ah=ah.parentNode}if(ah){ad=0;t=ae.firstChild;while(t!=ah&&ad<ag){ad++;t=t.nextSibling}if(ag<=ad){return -1}return 1}ah=ae;while(ah&&ah.parentNode!=ac){ah=ah.parentNode}if(ah){ad=0;t=ac.firstChild;while(t!=ah&&ad<af){ad++;t=t.nextSibling}if(ad<af){return -1}return 1}ai=d.findCommonAncestor(ae,ac);ak=ae;while(ak&&ak.parentNode!=ai){ak=ak.parentNode}if(!ak){ak=ai}aj=ac;while(aj&&aj.parentNode!=ai){aj=aj.parentNode}if(!aj){aj=ai}if(ak==aj){return 0}t=ai.firstChild;while(t){if(t==ak){return -1}if(t==aj){return 1}t=t.nextSibling}}function H(ac,af,ae){var t,ad;if(ac){T[k]=af;T[ab]=ae}else{T[V]=af;T[F]=ae}t=T[V];while(t.parentNode){t=t.parentNode}ad=T[k];while(ad.parentNode){ad=ad.parentNode
}if(ad==t){if(M(T[k],T[ab],T[V],T[F])>0){T.collapse(ac)}}else{T.collapse(ac)}T.collapsed=p();T.commonAncestorContainer=d.findCommonAncestor(T[k],T[V])}function o(ai){var ah,ae=0,ak=0,ac,ag,ad,af,t,aj;if(T[k]==T[V]){return g(ai)}for(ah=T[V],ac=ah.parentNode;ac;ah=ac,ac=ac.parentNode){if(ac==T[k]){return v(ah,ai)}++ae}for(ah=T[k],ac=ah.parentNode;ac;ah=ac,ac=ac.parentNode){if(ac==T[V]){return aa(ah,ai)}++ak}ag=ak-ae;ad=T[k];while(ag>0){ad=ad.parentNode;ag--}af=T[V];while(ag<0){af=af.parentNode;ag++}for(t=ad.parentNode,aj=af.parentNode;t!=aj;t=t.parentNode,aj=aj.parentNode){ad=t;af=aj}return r(ad,af,ai)}function g(ah){var aj,ak,t,ad,ae,ai,af,ac,ag;if(ah!=m){aj=C()}if(T[ab]==T[F]){return aj}if(T[k].nodeType==3){ak=T[k].nodeValue;t=ak.substring(T[ab],T[F]);if(ah!=K){ad=T[k];ac=T[ab];ag=T[F]-T[ab];if(ac===0&&ag>=ad.nodeValue.length-1){ad.parentNode.removeChild(ad)}else{ad.deleteData(ac,ag)}T.collapse(J)}if(ah==m){return}if(t.length>0){aj.appendChild(f.createTextNode(t))}return aj}ad=U(T[k],T[ab]);
ae=T[F]-T[ab];while(ad&&ae>0){ai=ad.nextSibling;af=E(ad,ah);if(aj){aj.appendChild(af)}--ae;ad=ai}if(ah!=K){T.collapse(J)}return aj}function v(ai,af){var ah,ag,ac,t,ae,ad;if(af!=m){ah=C()}ag=l(ai,af);if(ah){ah.appendChild(ag)}ac=q(ai);t=ac-T[ab];if(t<=0){if(af!=K){T.setEndBefore(ai);T.collapse(X)}return ah}ag=ai.previousSibling;while(t>0){ae=ag.previousSibling;ad=E(ag,af);if(ah){ah.insertBefore(ad,ah.firstChild)}--t;ag=ae}if(af!=K){T.setEndBefore(ai);T.collapse(X)}return ah}function aa(ag,af){var ai,ac,ah,t,ae,ad;if(af!=m){ai=C()}ah=W(ag,af);if(ai){ai.appendChild(ah)}ac=q(ag);++ac;t=T[F]-ac;ah=ag.nextSibling;while(ah&&t>0){ae=ah.nextSibling;ad=E(ah,af);if(ai){ai.appendChild(ad)}--t;ah=ae}if(af!=K){T.setStartAfter(ag);T.collapse(J)}return ai}function r(ag,t,aj){var ad,al,af,ah,ai,ac,ak,ae;if(aj!=m){al=C()}ad=W(ag,aj);if(al){al.appendChild(ad)}af=ag.parentNode;ah=q(ag);ai=q(t);++ah;ac=ai-ah;ak=ag.nextSibling;while(ac>0){ae=ak.nextSibling;ad=E(ak,aj);if(al){al.appendChild(ad)}ak=ae;--ac}ad=l(t,aj);
if(al){al.appendChild(ad)}if(aj!=K){T.setStartAfter(ag);T.collapse(J)}return al}function l(ah,ai){var ad=U(T[V],T[F]-1),aj,ag,af,t,ac,ae=ad!=T[V];if(ad==ah){return R(ad,ae,X,ai)}aj=ad.parentNode;ag=R(aj,X,X,ai);while(aj){while(ad){af=ad.previousSibling;t=R(ad,ae,X,ai);if(ai!=m){ag.insertBefore(t,ag.firstChild)}ae=J;ad=af}if(aj==ah){return ag}ad=aj.previousSibling;aj=aj.parentNode;ac=R(aj,X,X,ai);if(ai!=m){ac.appendChild(ag)}ag=ac}}function W(ah,ai){var ae=U(T[k],T[ab]),af=ae!=T[k],aj,ag,ad,t,ac;if(ae==ah){return R(ae,af,J,ai)}aj=ae.parentNode;ag=R(aj,X,J,ai);while(aj){while(ae){ad=ae.nextSibling;t=R(ae,af,J,ai);if(ai!=m){ag.appendChild(t)}af=J;ae=ad}if(aj==ah){return ag}ae=aj.nextSibling;aj=aj.parentNode;ac=R(aj,X,J,ai);if(ai!=m){ac.appendChild(ag)}ag=ac}}function R(t,af,ai,aj){var ae,ad,ag,ac,ah;if(af){return E(t,aj)}if(t.nodeType==3){ae=t.nodeValue;if(ai){ac=T[ab];ad=ae.substring(ac);ag=ae.substring(0,ac)}else{ac=T[F];ad=ae.substring(0,ac);ag=ae.substring(ac)}if(aj!=K){t.nodeValue=ag}if(aj==m){return
}ah=d.clone(t,X);ah.nodeValue=ad;return ah}if(aj==m){return}return d.clone(t,X)}function E(ac,t){if(t!=m){return t==K?d.clone(ac,J):ac}ac.parentNode.removeChild(ac)}function Y(){return d.create("body",null,e()).outerText}return T}a.Range=b;b.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);(function(){function a(e){var b=this,k=e.dom,d=true,g=false;function f(l,m){var n,z=0,t,q,p,o,r,u,s=-1,v;n=l.duplicate();n.collapse(m);v=n.parentElement();if(v.ownerDocument!==e.dom.doc){return}while(v.contentEditable==="false"){v=v.parentNode}if(!v.hasChildNodes()){return{node:v,inside:1}}p=v.children;t=p.length-1;while(z<=t){u=Math.floor((z+t)/2);o=p[u];n.moveToElementText(o);s=n.compareEndPoints(m?"StartToStart":"EndToEnd",l);if(s>0){t=u-1}else{if(s<0){z=u+1}else{return{node:o}}}}if(s<0){if(!o){n.moveToElementText(v);n.collapse(true);o=v;q=true}else{n.collapse(false)}r=0;while(n.compareEndPoints(m?"StartToStart":"StartToEnd",l)!==0){if(n.move("character",1)===0||v!=n.parentElement()){break
}r++}}else{n.collapse(true);r=0;while(n.compareEndPoints(m?"StartToStart":"StartToEnd",l)!==0){if(n.move("character",-1)===0||v!=n.parentElement()){break}r++}}return{node:o,position:s,offset:r,inside:q}}function h(){var l=e.getRng(),u=k.createRng(),o,n,s,t,p,m;o=l.item?l.item(0):l.parentElement();if(o.ownerDocument!=k.doc){return u}n=e.isCollapsed();if(l.item){u.setStart(o.parentNode,k.nodeIndex(o));u.setEnd(u.startContainer,u.startOffset+1);return u}function r(F){var A=f(l,F),v,D,E=0,C,B,z;v=A.node;D=A.offset;if(A.inside&&!v.hasChildNodes()){u[F?"setStart":"setEnd"](v,0);return}if(D===B){u[F?"setStartBefore":"setEndAfter"](v);return}if(A.position<0){C=A.inside?v.firstChild:v.nextSibling;if(!C){u[F?"setStartAfter":"setEndAfter"](v);return}if(!D){if(C.nodeType==3){u[F?"setStart":"setEnd"](C,0)}else{u[F?"setStartBefore":"setEndBefore"](C)}return}while(C){z=C.nodeValue;E+=z.length;if(E>=D){v=C;E-=D;E=z.length-E;break}C=C.nextSibling}}else{C=v.previousSibling;if(!C){return u[F?"setStartBefore":"setEndBefore"](v)
}if(!D){if(v.nodeType==3){u[F?"setStart":"setEnd"](C,v.nodeValue.length)}else{u[F?"setStartAfter":"setEndAfter"](C)}return}while(C){E+=C.nodeValue.length;if(E>=D){v=C;E-=D;break}C=C.previousSibling}}u[F?"setStart":"setEnd"](v,E)}try{r(true);if(!n){r()}}catch(q){if(q.number==-2147024809){p=b.getBookmark(2);s=l.duplicate();s.collapse(true);o=s.parentElement();if(!n){s=l.duplicate();s.collapse(false);t=s.parentElement();t.innerHTML=t.innerHTML}o.innerHTML=o.innerHTML;b.moveToBookmark(p);l=e.getRng();r(true);if(!n){r()}}else{throw q}}return u}this.getBookmark=function(p){var m=e.getRng(),r,l,o={};function q(A){var z,s,v,u,t=[];z=A.parentNode;s=k.getRoot().parentNode;while(z!=s&&z.nodeType!==9){v=z.children;u=v.length;while(u--){if(A===v[u]){t.push(u);break}}A=z;z=z.parentNode}return t}function n(t){var s;s=f(m,t);if(s){return{position:s.position,offset:s.offset,indexes:q(s.node),inside:s.inside}}}if(p===2){if(!m.item){o.start=n(true);if(!e.isCollapsed()){o.end=n()}}else{o.start={ctrl:true,indexes:q(m.item(0))}
}}return o};this.moveToBookmark=function(n){var m,l=k.doc.body;function p(r){var u,t,q,s;u=k.getRoot();for(t=r.length-1;t>=0;t--){s=u.children;q=r[t];if(q<=s.length-1){u=s[q]}}return u}function o(u){var q=n[u?"start":"end"],t,s,r;if(q){t=q.position>0;s=l.createTextRange();s.moveToElementText(p(q.indexes));offset=q.offset;if(offset!==r){s.collapse(q.inside||t);s.moveStart("character",t?-offset:offset)}else{s.collapse(u)}m.setEndPoint(u?"StartToStart":"EndToStart",s);if(u){m.collapse(true)}}}if(n.start){if(n.start.ctrl){m=l.createControlRange();m.addElement(p(n.start.indexes));m.select()}else{m=l.createTextRange();o(true);o();m.select()}}};this.addRange=function(l){var q,o,n,s,B,t,z,v=e.dom.doc,p=v.body,u,A;function m(H){var D,G,C,F,E;C=k.create("a");D=H?n:B;G=H?s:t;F=q.duplicate();if(D==v||D==v.documentElement){D=p;G=0}if(D.nodeType==3){D.parentNode.insertBefore(C,D);F.moveToElementText(C);F.moveStart("character",G);k.remove(C);q.setEndPoint(H?"StartToStart":"EndToEnd",F)}else{E=D.childNodes;
if(E.length){if(G>=E.length){k.insertAfter(C,E[E.length-1])}else{D.insertBefore(C,E[G])}F.moveToElementText(C)}else{if(D.canHaveHTML){D.innerHTML="<span>\uFEFF</span>";C=D.firstChild;F.moveToElementText(C);F.collapse(g)}}q.setEndPoint(H?"StartToStart":"EndToEnd",F);k.remove(C)}}n=l.startContainer;s=l.startOffset;B=l.endContainer;t=l.endOffset;q=p.createTextRange();if(n==B&&n.nodeType==1){if(s==t&&!n.hasChildNodes()){if(n.canHaveHTML){z=n.previousSibling;if(z&&!z.hasChildNodes()&&k.isBlock(z)){z.innerHTML="\uFEFF"}else{z=null}n.innerHTML="<span>\uFEFF</span><span>\uFEFF</span>";q.moveToElementText(n.lastChild);q.select();k.doc.selection.clear();n.innerHTML="";if(z){z.innerHTML=""}return}else{s=k.nodeIndex(n);n=n.parentNode}}if(s==t-1){try{A=n.childNodes[s];o=p.createControlRange();o.addElement(A);o.select();u=e.getRng();if(u.item&&A===u.item(0)){return}}catch(r){}}}m(true);m();q.select()};this.getRangeAt=h}tinymce.dom.TridentSelection=a})();(function(){var q=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,l="sizcache",r=0,u=Object.prototype.toString,k=false,h=true,t=/\\/g,A=/\r\n/g,C=/\W/;
[0,0].sort(function(){h=false;return 0});var f=function(H,e,K,L){K=K||[];e=e||document;var N=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!H||typeof H!=="string"){return K}var E,P,S,D,O,R,Q,J,G=true,F=f.isXML(e),I=[],M=H;do{q.exec("");E=q.exec(M);if(E){M=E[3];I.push(E[1]);if(E[2]){D=E[3];break}}}while(E);if(I.length>1&&m.exec(H)){if(I.length===2&&n.relative[I[0]]){P=v(I[0]+I[1],e,L)}else{P=n.relative[I[0]]?[e]:f(I.shift(),e);while(I.length){H=I.shift();if(n.relative[H]){H+=I.shift()}P=v(H,P,L)}}}else{if(!L&&I.length>1&&e.nodeType===9&&!F&&n.match.ID.test(I[0])&&!n.match.ID.test(I[I.length-1])){O=f.find(I.shift(),e,F);e=O.expr?f.filter(O.expr,O.set)[0]:O.set[0]}if(e){O=L?{expr:I.pop(),set:o(L)}:f.find(I.pop(),I.length===1&&(I[0]==="~"||I[0]==="+")&&e.parentNode?e.parentNode:e,F);P=O.expr?f.filter(O.expr,O.set):O.set;if(I.length>0){S=o(P)}else{G=false}while(I.length){R=I.pop();Q=R;if(!n.relative[R]){R=""}else{Q=I.pop()}if(Q==null){Q=e}n.relative[R](S,Q,F)}}else{S=I=[]}}if(!S){S=P}if(!S){f.error(R||H)
}if(u.call(S)==="[object Array]"){if(!G){K.push.apply(K,S)}else{if(e&&e.nodeType===1){for(J=0;S[J]!=null;J++){if(S[J]&&(S[J]===true||S[J].nodeType===1&&f.contains(e,S[J]))){K.push(P[J])}}}else{for(J=0;S[J]!=null;J++){if(S[J]&&S[J].nodeType===1){K.push(P[J])}}}}}else{o(S,K)}if(D){f(D,N,K,L);f.uniqueSort(K)}return K};f.uniqueSort=function(D){if(s){k=h;D.sort(s);if(k){for(var e=1;e<D.length;e++){if(D[e]===D[e-1]){D.splice(e--,1)}}}}return D};f.matches=function(e,D){return f(e,null,null,D)};f.matchesSelector=function(e,D){return f(D,null,null,[e]).length>0};f.find=function(J,e,K){var I,E,G,F,H,D;if(!J){return[]}for(E=0,G=n.order.length;E<G;E++){H=n.order[E];if((F=n.leftMatch[H].exec(J))){D=F[1];F.splice(1,1);if(D.substr(D.length-1)!=="\\"){F[1]=(F[1]||"").replace(t,"");I=n.find[H](F,e,K);if(I!=null){J=J.replace(n.match[H],"");break}}}}if(!I){I=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:I,expr:J}};f.filter=function(N,M,Q,G){var I,e,L,S,P,D,F,H,O,E=N,R=[],K=M,J=M&&M[0]&&f.isXML(M[0]);
while(N&&M.length){for(L in n.filter){if((I=n.leftMatch[L].exec(N))!=null&&I[2]){D=n.filter[L];F=I[1];e=false;I.splice(1,1);if(F.substr(F.length-1)==="\\"){continue}if(K===R){R=[]}if(n.preFilter[L]){I=n.preFilter[L](I,K,Q,R,G,J);if(!I){e=S=true}else{if(I===true){continue}}}if(I){for(H=0;(P=K[H])!=null;H++){if(P){S=D(P,I,H,K);O=G^S;if(Q&&S!=null){if(O){e=true}else{K[H]=false}}else{if(O){R.push(P);e=true}}}}}if(S!==undefined){if(!Q){K=R}N=N.replace(n.match[L],"");if(!e){return[]}break}}}if(N===E){if(e==null){f.error(N)}else{break}}E=N}return K};f.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var b=f.getText=function(G){var E,F,e=G.nodeType,D="";if(e){if(e===1||e===9||e===11){if(typeof G.textContent==="string"){return G.textContent}else{if(typeof G.innerText==="string"){return G.innerText.replace(A,"")}else{for(G=G.firstChild;G;G=G.nextSibling){D+=b(G)}}}}else{if(e===3||e===4){return G.nodeValue}}}else{for(E=0;(F=G[E]);E++){if(F.nodeType!==8){D+=b(F)}}}return D
};var n=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(I,D){var F=typeof D==="string",H=F&&!C.test(D),J=F&&!H;if(H){D=D.toLowerCase()}for(var E=0,e=I.length,G;E<e;E++){if((G=I[E])){while((G=G.previousSibling)&&G.nodeType!==1){}I[E]=J||G&&G.nodeName.toLowerCase()===D?G||false:G===D
}}if(J){f.filter(D,I,true)}},">":function(I,D){var H,G=typeof D==="string",E=0,e=I.length;if(G&&!C.test(D)){D=D.toLowerCase();for(;E<e;E++){H=I[E];if(H){var F=H.parentNode;I[E]=F.nodeName.toLowerCase()===D?F:false}}}else{for(;E<e;E++){H=I[E];if(H){I[E]=G?H.parentNode:H.parentNode===D}}if(G){f.filter(D,I,true)}}},"":function(F,D,H){var G,E=r++,e=z;if(typeof D==="string"&&!C.test(D)){D=D.toLowerCase();G=D;e=a}e("parentNode",D,E,F,G,H)},"~":function(F,D,H){var G,E=r++,e=z;if(typeof D==="string"&&!C.test(D)){D=D.toLowerCase();G=D;e=a}e("previousSibling",D,E,F,G,H)}},find:{ID:function(D,E,F){if(typeof E.getElementById!=="undefined"&&!F){var e=E.getElementById(D[1]);return e&&e.parentNode?[e]:[]}},NAME:function(E,H){if(typeof H.getElementsByName!=="undefined"){var D=[],G=H.getElementsByName(E[1]);for(var F=0,e=G.length;F<e;F++){if(G[F].getAttribute("name")===E[1]){D.push(G[F])}}return D.length===0?null:D}},TAG:function(e,D){if(typeof D.getElementsByTagName!=="undefined"){return D.getElementsByTagName(e[1])
}}},preFilter:{CLASS:function(F,D,E,e,I,J){F=" "+F[1].replace(t,"")+" ";if(J){return F}for(var G=0,H;(H=D[G])!=null;G++){if(H){if(I^(H.className&&(" "+H.className+" ").replace(/[\t\n\r]/g," ").indexOf(F)>=0)){if(!E){e.push(H)}}else{if(E){D[G]=false}}}}return false},ID:function(e){return e[1].replace(t,"")},TAG:function(D,e){return D[1].replace(t,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){f.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var D=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(D[1]+(D[2]||1))-0;e[3]=D[3]-0}else{if(e[2]){f.error(e[0])}}e[0]=r++;return e},ATTR:function(G,D,E,e,H,I){var F=G[1]=G[1].replace(t,"");if(!I&&n.attrMap[F]){G[1]=n.attrMap[F]}G[4]=(G[4]||G[5]||"").replace(t,"");if(G[2]==="~="){G[4]=" "+G[4]+" "}return G},PSEUDO:function(G,D,E,e,H){if(G[1]==="not"){if((q.exec(G[3])||"").length>1||/^\w/.test(G[3])){G[3]=f(G[3],null,null,D)}else{var F=f.filter(G[3],D,E,true^H);if(!E){e.push.apply(e,F)
}return false}}else{if(n.match.POS.test(G[0])||n.match.CHILD.test(G[0])){return true}}return G},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(E,D,e){return !!f(e[3],E).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(E){var e=E.getAttribute("type"),D=E.type;return E.nodeName.toLowerCase()==="input"&&"text"===D&&(e===D||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type
},submit:function(D){var e=D.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===D.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(D){var e=D.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===D.type},button:function(D){var e=D.nodeName.toLowerCase();return e==="input"&&"button"===D.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(D,e){return e===0},last:function(E,D,e,F){return D===F.length-1},even:function(D,e){return e%2===0},odd:function(D,e){return e%2===1},lt:function(E,D,e){return D<e[3]-0},gt:function(E,D,e){return D>e[3]-0},nth:function(E,D,e){return e[3]-0===D},eq:function(E,D,e){return e[3]-0===D}},filter:{PSEUDO:function(E,J,I,K){var e=J[1],D=n.filters[e];if(D){return D(E,I,J,K)}else{if(e==="contains"){return(E.textContent||E.innerText||b([E])||"").indexOf(J[3])>=0
}else{if(e==="not"){var F=J[3];for(var H=0,G=F.length;H<G;H++){if(F[H]===E){return false}}return true}else{f.error(e)}}}},CHILD:function(E,G){var F,M,I,L,e,H,K,J=G[1],D=E;switch(J){case"only":case"first":while((D=D.previousSibling)){if(D.nodeType===1){return false}}if(J==="first"){return true}D=E;case"last":while((D=D.nextSibling)){if(D.nodeType===1){return false}}return true;case"nth":F=G[2];M=G[3];if(F===1&&M===0){return true}I=G[0];L=E.parentNode;if(L&&(L[l]!==I||!E.nodeIndex)){H=0;for(D=L.firstChild;D;D=D.nextSibling){if(D.nodeType===1){D.nodeIndex=++H}}L[l]=I}K=E.nodeIndex-M;if(F===0){return K===0}else{return(K%F===0&&K/F>=0)}}},ID:function(D,e){return D.nodeType===1&&D.getAttribute("id")===e},TAG:function(D,e){return(e==="*"&&D.nodeType===1)||!!D.nodeName&&D.nodeName.toLowerCase()===e},CLASS:function(D,e){return(" "+(D.className||D.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(H,F){var E=F[1],e=f.attr?f.attr(H,E):n.attrHandle[E]?n.attrHandle[E](H):H[E]!=null?H[E]:H.getAttribute(E),I=e+"",G=F[2],D=F[4];
return e==null?G==="!=":!G&&f.attr?e!=null:G==="="?I===D:G==="*="?I.indexOf(D)>=0:G==="~="?(" "+I+" ").indexOf(D)>=0:!D?I&&e!==false:G==="!="?I!==D:G==="^="?I.indexOf(D)===0:G==="$="?I.substr(I.length-D.length)===D:G==="|="?I===D||I.substr(0,D.length+1)===D+"-":false},POS:function(G,D,E,H){var e=D[2],F=n.setFilters[e];if(F){return F(G,E,D,H)}}}};var m=n.match.POS,d=function(D,e){return"\\"+(e-0+1)};for(var g in n.match){n.match[g]=new RegExp(n.match[g].source+(/(?![^\[]*\])(?![^\(]*\))/.source));n.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[g].source.replace(/\\(\d+)/g,d))}n.match.globalPOS=m;var o=function(D,e){D=Array.prototype.slice.call(D,0);if(e){e.push.apply(e,D);return e}return D};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(B){o=function(G,F){var E=0,D=F||[];if(u.call(G)==="[object Array]"){Array.prototype.push.apply(D,G)}else{if(typeof G.length==="number"){for(var e=G.length;E<e;E++){D.push(G[E])}}else{for(;G[E];E++){D.push(G[E])
}}}return D}}var s,p;if(document.documentElement.compareDocumentPosition){s=function(D,e){if(D===e){k=true;return 0}if(!D.compareDocumentPosition||!e.compareDocumentPosition){return D.compareDocumentPosition?-1:1}return D.compareDocumentPosition(e)&4?-1:1}}else{s=function(K,J){if(K===J){k=true;return 0}else{if(K.sourceIndex&&J.sourceIndex){return K.sourceIndex-J.sourceIndex}}var H,D,E=[],e=[],G=K.parentNode,I=J.parentNode,L=G;if(G===I){return p(K,J)}else{if(!G){return -1}else{if(!I){return 1}}}while(L){E.unshift(L);L=L.parentNode}L=I;while(L){e.unshift(L);L=L.parentNode}H=E.length;D=e.length;for(var F=0;F<H&&F<D;F++){if(E[F]!==e[F]){return p(E[F],e[F])}}return F===H?p(K,e[F],-1):p(E[F],J,1)};p=function(D,e,E){if(D===e){return E}var F=D.nextSibling;while(F){if(F===e){return -1}F=F.nextSibling}return 1}}(function(){var D=document.createElement("div"),E="script"+(new Date()).getTime(),e=document.documentElement;D.innerHTML="<a name='"+E+"'/>";e.insertBefore(D,e.firstChild);if(document.getElementById(E)){n.find.ID=function(G,H,I){if(typeof H.getElementById!=="undefined"&&!I){var F=H.getElementById(G[1]);
return F?F.id===G[1]||typeof F.getAttributeNode!=="undefined"&&F.getAttributeNode("id").nodeValue===G[1]?[F]:undefined:[]}};n.filter.ID=function(H,F){var G=typeof H.getAttributeNode!=="undefined"&&H.getAttributeNode("id");return H.nodeType===1&&G&&G.nodeValue===F}}e.removeChild(D);e=D=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){n.find.TAG=function(D,H){var G=H.getElementsByTagName(D[1]);if(D[1]==="*"){var F=[];for(var E=0;G[E];E++){if(G[E].nodeType===1){F.push(G[E])}}G=F}return G}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){n.attrHandle.href=function(D){return D.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=f,F=document.createElement("div"),E="__sizzle__";F.innerHTML="<p class='TEST'></p>";if(F.querySelectorAll&&F.querySelectorAll(".TEST").length===0){return}f=function(Q,H,L,P){H=H||document;
if(!P&&!f.isXML(H)){var O=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(Q);if(O&&(H.nodeType===1||H.nodeType===9)){if(O[1]){return o(H.getElementsByTagName(Q),L)}else{if(O[2]&&n.find.CLASS&&H.getElementsByClassName){return o(H.getElementsByClassName(O[2]),L)}}}if(H.nodeType===9){if(Q==="body"&&H.body){return o([H.body],L)}else{if(O&&O[3]){var K=H.getElementById(O[3]);if(K&&K.parentNode){if(K.id===O[3]){return o([K],L)}}else{return o([],L)}}}try{return o(H.querySelectorAll(Q),L)}catch(M){}}else{if(H.nodeType===1&&H.nodeName.toLowerCase()!=="object"){var I=H,J=H.getAttribute("id"),G=J||E,S=H.parentNode,R=/^\s*[+~]/.test(Q);if(!J){H.setAttribute("id",G)}else{G=G.replace(/'/g,"\\$&")}if(R&&S){H=H.parentNode}try{if(!R||S){return o(H.querySelectorAll("[id='"+G+"'] "+Q),L)}}catch(N){}finally{if(!J){I.removeAttribute("id")}}}}}return e(Q,H,L,P)};for(var D in e){f[D]=e[D]}F=null})()}(function(){var e=document.documentElement,E=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;
if(E){var G=!E.call(document.createElement("div"),"div"),D=false;try{E.call(document.documentElement,"[test!='']:sizzle")}catch(F){D=true}f.matchesSelector=function(I,K){K=K.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!f.isXML(I)){try{if(D||!n.match.PSEUDO.test(K)&&!/!=/.test(K)){var H=E.call(I,K);if(H||!G||I.document&&I.document.nodeType!==11){return H}}}catch(J){}}return f(K,null,null,[I]).length>0}}})();(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}n.order.splice(1,0,"CLASS");n.find.CLASS=function(D,E,F){if(typeof E.getElementsByClassName!=="undefined"&&!F){return E.getElementsByClassName(D[1])}};e=null})();function a(D,I,H,L,J,K){for(var F=0,E=L.length;F<E;F++){var e=L[F];if(e){var G=false;e=e[D];while(e){if(e[l]===H){G=L[e.sizset];break}if(e.nodeType===1&&!K){e[l]=H;
e.sizset=F}if(e.nodeName.toLowerCase()===I){G=e;break}e=e[D]}L[F]=G}}}function z(D,I,H,L,J,K){for(var F=0,E=L.length;F<E;F++){var e=L[F];if(e){var G=false;e=e[D];while(e){if(e[l]===H){G=L[e.sizset];break}if(e.nodeType===1){if(!K){e[l]=H;e.sizset=F}if(typeof I!=="string"){if(e===I){G=true;break}}else{if(f.filter(I,[e]).length>0){G=e;break}}}e=e[D]}L[F]=G}}}if(document.documentElement.contains){f.contains=function(D,e){return D!==e&&(D.contains?D.contains(e):true)}}else{if(document.documentElement.compareDocumentPosition){f.contains=function(D,e){return !!(D.compareDocumentPosition(e)&16)}}else{f.contains=function(){return false}}}f.isXML=function(e){var D=(e?e.ownerDocument||e:0).documentElement;return D?D.nodeName!=="HTML":false};var v=function(E,e,I){var H,J=[],G="",K=e.nodeType?[e]:e;while((H=n.match.PSEUDO.exec(E))){G+=H[0];E=E.replace(n.match.PSEUDO,"")}E=n.relative[E]?E+"*":E;for(var F=0,D=K.length;F<D;F++){f(E,K[F],J,I)}return f.filter(G,J)};window.tinymce.dom.Sizzle=f})();(function(a){a.dom.Element=function(g,e){var b=this,f,d;
b.settings=e=e||{};b.id=g;b.dom=f=e.dom||a.DOM;if(!a.isIE){d=f.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(h){b[h]=function(){var k=[g],l;for(l=0;l<arguments.length;l++){k.push(arguments[l])}k=f[h].apply(f,k);b.update(h);return k}});a.extend(b,{on:function(l,k,h){return a.dom.Event.add(b.id,l,k,h)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var h=f.get(b.id);return{w:parseInt(b.getStyle("width")||h.clientWidth),h:parseInt(b.getStyle("height")||h.clientHeight)}},moveTo:function(h,k){b.setStyles({left:h,top:k})},moveBy:function(h,l){var k=b.getXY();b.moveTo(k.x+h,k.y+l)},resizeTo:function(k,l){b.setStyles({width:k,height:l})},resizeBy:function(k,m){var l=b.getSize();b.resizeTo(l.w+k,l.h+m)},update:function(l){var h;if(a.isIE6&&e.blocker){l=l||"";if(l.indexOf("get")===0||l.indexOf("has")===0||l.indexOf("is")===0){return
}if(l=="remove"){f.remove(b.blocker);return}if(!b.blocker){b.blocker=f.uniqueId();h=f.add(e.container||f.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});f.setStyle(h,"opacity",0)}else{h=f.get(b.blocker)}f.setStyles(h,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(e){function g(h){return h.replace(/[\n\r]+/g,"")}var d=e.is,b=e.isIE,f=e.each,a=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(n,m,l,k){var h=this;h.dom=n;h.win=m;h.serializer=l;h.editor=k;f(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(o){h[o]=new e.util.Dispatcher(h)});if(!h.win.getSelection){h.tridentSel=new e.dom.TridentSelection(h)}if(e.isIE&&n.boxModel){this._fixIESelection()}e.addUnload(h.destroy,h)},setCursorLocation:function(l,m){var h=this;var k=h.dom.createRng();
k.setStart(l,m);k.setEnd(l,m);h.setRng(k);h.collapse(false)},getContent:function(k){var h=this,l=h.getRng(),q=h.dom.create("body"),o=h.getSel(),m,p,u;k=k||{};m=p="";k.get=true;k.format=k.format||"html";k.forced_root_block="";h.onBeforeGetContent.dispatch(h,k);if(k.format=="text"){return h.isCollapsed()?"":(l.text||(o.toString?o.toString():""))}if(l.cloneContents){u=l.cloneContents();if(u){q.appendChild(u)}}else{if(d(l.item)||d(l.htmlText)){q.innerHTML="<br>"+(l.item?l.item(0).outerHTML:l.htmlText);q.removeChild(q.firstChild)}else{q.innerHTML=l.toString()}}if(/^\s/.test(q.innerHTML)){m=" "}if(/\s+$/.test(q.innerHTML)){p=" "}k.getInner=true;k.content=h.isCollapsed()?"":m+h.serializer.serialize(q,k)+p;h.onGetContent.dispatch(h,k);return k.content},setContent:function(k,m){var r=this,h=r.getRng(),n,o=r.win.document,q,p;m=m||{format:"html"};m.set=true;k=m.content=k;if(!m.no_events){r.onBeforeSetContent.dispatch(r,m)}k=m.content;if(h.insertNode){k+='<span id="__caret">_</span>';if(h.startContainer==o&&h.endContainer==o){o.body.innerHTML=k
}else{h.deleteContents();if(o.body.childNodes.length===0){o.body.innerHTML=k}else{if(h.createContextualFragment){h.insertNode(h.createContextualFragment(k))}else{q=o.createDocumentFragment();p=o.createElement("div");q.appendChild(p);p.outerHTML=k;h.insertNode(q)}}}n=r.dom.get("__caret");h=o.createRange();h.setStartBefore(n);h.setEndBefore(n);r.setRng(h);r.dom.remove("__caret");try{r.setRng(h)}catch(l){}}else{if(h.item){o.execCommand("Delete",false,null);h=r.getRng()}if(/^\s+/.test(k)){h.pasteHTML('<span id="__mce_tmp">_</span>'+k);r.dom.remove("__mce_tmp")}else{h.pasteHTML(k)}}if(!m.no_events){r.onSetContent.dispatch(r,m)}},getStart:function(){var l=this,k=l.getRng(),m,h,o,n;if(k.duplicate||k.item){if(k.item){return k.item(0)}o=k.duplicate();o.collapse(1);m=o.parentElement();if(m.ownerDocument!==l.dom.doc){m=l.dom.getRoot()}h=n=k.parentElement();while(n=n.parentNode){if(n==m){m=h;break}}return m}else{m=k.startContainer;if(m.nodeType==1&&m.hasChildNodes()){m=m.childNodes[Math.min(m.childNodes.length-1,k.startOffset)]
}if(m&&m.nodeType==3){return m.parentNode}return m}},getEnd:function(){var k=this,h=k.getRng(),m,l;if(h.duplicate||h.item){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);m=h.parentElement();if(m.ownerDocument!==k.dom.doc){m=k.dom.getRoot()}if(m&&m.nodeName=="BODY"){return m.lastChild||m}return m}else{m=h.endContainer;l=h.endOffset;if(m.nodeType==1&&m.hasChildNodes()){m=m.childNodes[l>0?l-1:l]}if(m&&m.nodeType==3){return m.parentNode}return m}},getBookmark:function(z,B){var D=this,q=D.dom,k,n,m,r,l,s,u,p="\uFEFF",C;function h(E,F){var t=0;f(q.select(E),function(H,G){if(H==F){t=G}});return t}function A(t){function E(J){var F,I,H,G=J?"start":"end";F=t[G+"Container"];I=t[G+"Offset"];if(F.nodeType==1&&F.nodeName=="TR"){H=F.childNodes;F=H[Math.min(J?I:I-1,H.length-1)];if(F){I=J?0:F.childNodes.length;t["set"+(J?"Start":"End")](F,I)}}}E(true);E();return t}function o(){var E=D.getRng(true),t=q.getRoot(),F={};function G(J,O){var I=J[O?"startContainer":"endContainer"],N=J[O?"startOffset":"endOffset"],H=[],K,M,L=0;
if(I.nodeType==3){if(B){for(K=I.previousSibling;K&&K.nodeType==3;K=K.previousSibling){N+=K.nodeValue.length}}H.push(N)}else{M=I.childNodes;if(N>=M.length&&M.length){L=1;N=Math.max(0,M.length-1)}H.push(D.dom.nodeIndex(M[N],B)+L)}for(;I&&I!=t;I=I.parentNode){H.push(D.dom.nodeIndex(I,B))}return H}F.start=G(E,true);if(!D.isCollapsed()){F.end=G(E)}return F}if(z==2){if(D.tridentSel){return D.tridentSel.getBookmark(z)}return o()}if(z){return{rng:D.getRng()}}k=D.getRng();m=q.uniqueId();r=tinyMCE.activeEditor.selection.isCollapsed();C="overflow:hidden;line-height:0px";if(k.duplicate||k.item){if(!k.item){n=k.duplicate();try{k.collapse();k.pasteHTML('<span data-mce-type="bookmark" id="'+m+'_start" style="'+C+'">'+p+"</span>");if(!r){n.collapse(false);k.moveToElementText(n.parentElement());if(k.compareEndPoints("StartToEnd",n)===0){n.move("character",-1)}n.pasteHTML('<span data-mce-type="bookmark" id="'+m+'_end" style="'+C+'">'+p+"</span>")}}catch(v){return null}}else{s=k.item(0);l=s.nodeName;return{name:l,index:h(l,s)}
}}else{s=D.getNode();l=s.nodeName;if(l=="IMG"){return{name:l,index:h(l,s)}}n=A(k.cloneRange());if(!r){n.collapse(false);n.insertNode(q.create("span",{"data-mce-type":"bookmark",id:m+"_end",style:C},p))}k=A(k);k.collapse(true);k.insertNode(q.create("span",{"data-mce-type":"bookmark",id:m+"_start",style:C},p))}D.moveToBookmark({id:m,keep:1});return{id:m}},moveToBookmark:function(r){var z=this,p=z.dom,m,l,h,v,n,A,s,u;function k(F){var t=r[F?"start":"end"],C,D,E,B;if(t){E=t[0];for(D=v,C=t.length-1;C>=1;C--){B=D.childNodes;if(t[C]>B.length-1){return}D=B[t[C]]}if(D.nodeType===3){E=Math.min(t[0],D.nodeValue.length)}if(D.nodeType===1){E=Math.min(t[0],D.childNodes.length)}if(F){h.setStart(D,E)}else{h.setEnd(D,E)}}return true}function o(G){var B=p.get(r.id+"_"+G),F,t,D,E,C=r.keep;if(B){F=B.parentNode;if(G=="start"){if(!C){t=p.nodeIndex(B)}else{F=B.firstChild;t=1}n=A=F;s=u=t}else{if(!C){t=p.nodeIndex(B)}else{F=B.firstChild;t=1}A=F;u=t}if(!C){E=B.previousSibling;D=B.nextSibling;f(e.grep(B.childNodes),function(H){if(H.nodeType==3){H.nodeValue=H.nodeValue.replace(/\uFEFF/g,"")
}});while(B=p.get(r.id+"_"+G)){p.remove(B,1)}if(E&&D&&E.nodeType==D.nodeType&&E.nodeType==3&&!e.isOpera){t=E.nodeValue.length;E.appendData(D.nodeValue);p.remove(D);if(G=="start"){n=A=E;s=u=t}else{A=E;u=t}}}}}function q(t){if(p.isBlock(t)&&!t.innerHTML&&!b){t.innerHTML='<br data-mce-bogus="1" />'}return t}if(r){if(r.start){h=p.createRng();v=p.getRoot();if(z.tridentSel){return z.tridentSel.moveToBookmark(r)}if(k(true)&&k()){z.setRng(h)}}else{if(r.id){o("start");o("end");if(n){h=p.createRng();h.setStart(q(n),s);h.setEnd(q(A),u);z.setRng(h)}}else{if(r.name){z.select(p.select(r.name)[r.index])}else{if(r.rng){z.setRng(r.rng)}}}}}},select:function(o,n){var m=this,p=m.dom,k=p.createRng(),h;function l(q,s){var r=new a(q,q);do{if(q.nodeType==3&&e.trim(q.nodeValue).length!==0){if(s){k.setStart(q,0)}else{k.setEnd(q,q.nodeValue.length)}return}if(q.nodeName=="BR"){if(s){k.setStartBefore(q)}else{k.setEndBefore(q)}return}}while(q=(s?r.next():r.prev()))}if(o){h=p.nodeIndex(o);k.setStart(o.parentNode,h);
k.setEnd(o.parentNode,h+1);if(n){l(o,1);l(o)}m.setRng(k)}return o},isCollapsed:function(){var h=this,l=h.getRng(),k=h.getSel();if(!l||l.item){return false}if(l.compareEndPoints){return l.compareEndPoints("StartToEnd",l)===0}return !k||l.collapsed},collapse:function(h){var l=this,k=l.getRng(),m;if(k.item){m=k.item(0);k=l.win.document.body.createTextRange();k.moveToElementText(m)}k.collapse(!!h);l.setRng(k)},getSel:function(){var k=this,h=this.win;return h.getSelection?h.getSelection():h.document.selection},getRng:function(p){var k=this,m,h,o,n=k.win.document;if(p&&k.tridentSel){return k.tridentSel.getRangeAt(0)}try{if(m=k.getSel()){h=m.rangeCount>0?m.getRangeAt(0):(m.createRange?m.createRange():n.createRange())}}catch(l){}if(e.isIE&&h&&h.setStart&&n.selection.createRange().item){o=n.selection.createRange().item(0);h=n.createRange();h.setStartBefore(o);h.setEndAfter(o)}if(!h){h=n.createRange?n.createRange():n.body.createTextRange()}if(h.setStart&&h.startContainer.nodeType===9&&h.collapsed){o=k.dom.getRoot();
h.setStart(o,0);h.setEnd(o,0)}if(k.selectedRange&&k.explicitRange){if(h.compareBoundaryPoints(h.START_TO_START,k.selectedRange)===0&&h.compareBoundaryPoints(h.END_TO_END,k.selectedRange)===0){h=k.explicitRange}else{k.selectedRange=null;k.explicitRange=null}}return h},setRng:function(n,h){var m,l=this;if(!l.tridentSel){m=l.getSel();if(m){l.explicitRange=n;try{m.removeAllRanges()}catch(k){}m.addRange(n);if(h===false&&m.extend){m.collapse(n.endContainer,n.endOffset);m.extend(n.startContainer,n.startOffset)}l.selectedRange=m.rangeCount>0?m.getRangeAt(0):null}}else{if(n.cloneRange){try{l.tridentSel.addRange(n);return}catch(k){}}try{n.select()}catch(k){}}},setNode:function(k){var h=this;h.setContent(h.dom.getOuterHTML(k));return k},getNode:function(){var l=this,k=l.getRng(),m=l.getSel(),p,o=k.startContainer,h=k.endContainer;function n(s,q){var r=s;while(s&&s.nodeType===3&&s.length===0){s=q?s.nextSibling:s.previousSibling}return s||r}if(!k){return l.dom.getRoot()}if(k.setStart){p=k.commonAncestorContainer;
if(!k.collapsed){if(k.startContainer==k.endContainer){if(k.endOffset-k.startOffset<2){if(k.startContainer.hasChildNodes()){p=k.startContainer.childNodes[k.startOffset]}}}if(o.nodeType===3&&h.nodeType===3){if(o.length===k.startOffset){o=n(o.nextSibling,true)}else{o=o.parentNode}if(k.endOffset===0){h=n(h.previousSibling,false)}else{h=h.parentNode}if(o&&o===h){return o}}}if(p&&p.nodeType==3){return p.parentNode}return p}return k.item?k.item(0):k.parentElement()},getSelectedBlocks:function(s,k){var r=this,o=r.dom,q,p,l,m=[];q=o.getParent(s||r.getStart(),o.isBlock);p=o.getParent(k||r.getEnd(),o.isBlock);if(q){m.push(q)}if(q&&p&&q!=p){l=q;var h=new a(q,o.getRoot());while((l=h.next())&&l!=p){if(o.isBlock(l)){m.push(l)}}}if(p&&q!=p){m.push(p)}return m},isForward:function(){var l=this.dom,h=this.getSel(),m,k;if(!h||h.anchorNode==null||h.focusNode==null){return true}m=l.createRng();m.setStart(h.anchorNode,h.anchorOffset);m.collapse(true);k=l.createRng();k.setStart(h.focusNode,h.focusOffset);k.collapse(true);
return m.compareBoundaryPoints(m.START_TO_START,k)<=0},normalize:function(){var k=this,h,p,o,m,l;function n(s){var r,u,q,v=k.dom,A=v.getRoot(),t,z,B;function D(E,F){var G=new a(E,v.getParent(E.parentNode,v.isBlock)||A);while(E=G[F?"prev":"next"]()){if(E.nodeName==="BR"){return true}}}function C(G,E){var H,F;E=E||r;H=new a(E,v.getParent(E.parentNode,v.isBlock)||A);while(t=H[G?"prev":"next"]()){if(t.nodeType===3&&t.nodeValue.length>0){r=t;u=G?t.nodeValue.length:0;p=true;return}if(v.isBlock(t)||z[t.nodeName.toLowerCase()]){return}F=t}if(o&&F){r=F;p=true;u=0}}r=h[(s?"start":"end")+"Container"];u=h[(s?"start":"end")+"Offset"];z=v.schema.getNonEmptyElements();if(r.nodeType===9){r=v.getRoot();u=0}if(r===A){if(s){t=r.childNodes[u>0?u-1:0];if(t){B=t.nodeName.toLowerCase();if(z[t.nodeName]||t.nodeName=="TABLE"){return}}}if(r.hasChildNodes()){r=r.childNodes[Math.min(!s&&u>0?u-1:u,r.childNodes.length-1)];u=0;if(r.hasChildNodes()&&!/TABLE/.test(r.nodeName)){t=r;q=new a(r,A);do{if(t.nodeType===3&&t.nodeValue.length>0){u=s?0:t.nodeValue.length;
r=t;p=true;break}if(z[t.nodeName.toLowerCase()]){u=v.nodeIndex(t);r=t.parentNode;if(t.nodeName=="IMG"&&!s){u++}p=true;break}}while(t=(s?q.next():q.prev()))}}}if(o){if(r.nodeType===3&&u===0){C(true)}if(r.nodeType===1){t=r.childNodes[u];if(t&&t.nodeName==="BR"&&!D(t)&&!D(t,true)){C(true,r.childNodes[u])}}}if(s&&!o&&r.nodeType===3&&u===r.nodeValue.length){C(false)}if(p){h["set"+(s?"Start":"End")](r,u)}}if(e.isIE){return}h=k.getRng();o=h.collapsed;n(true);if(!o){n()}if(p){if(o){h.collapse(true)}k.setRng(h,k.isForward())}},selectorChanged:function(h,m){var k=this,l;if(!k.selectorChangedData){k.selectorChangedData={};l={};k.editor.onNodeChange.addToTop(function(o,n,r){var s=k.dom,p=s.getParents(r,null,s.getRoot()),q={};f(k.selectorChangedData,function(u,t){f(p,function(v){if(s.is(v,t)){if(!l[t]){f(u,function(z){z(true,{node:v,selector:t,parents:p})});l[t]=u}q[t]=u;return false}})});f(l,function(u,t){if(!q[t]){delete l[t];f(u,function(v){v(false,{node:r,selector:t,parents:p})})}})})}if(!k.selectorChangedData[h]){k.selectorChangedData[h]=[]
}k.selectorChangedData[h].push(m);return k},scrollIntoView:function(n){var m,k,h=this,l=h.dom;k=l.getViewPort(h.editor.getWin());m=l.getPos(n).y;if(m<k.y||m+25>k.y+k.h){h.editor.getWin().scrollTo(0,m<k.y?m:m-k.h+25)}},destroy:function(k){var h=this;h.win=null;if(!k){e.removeUnload(h.destroy)}},_fixIESelection:function(){var k=this.dom,q=k.doc,l=q.body,n,r,h;function m(s,v){var t=l.createTextRange();try{t.moveToPoint(s,v)}catch(u){t=null}return t}function p(t){var s;if(t.button){s=m(t.x,t.y);if(s){if(s.compareEndPoints("StartToStart",r)>0){s.setEndPoint("StartToStart",r)}else{s.setEndPoint("EndToEnd",r)}s.select()}}else{o()}}function o(){var s=q.selection.createRange();if(r&&!s.item&&s.compareEndPoints("StartToEnd",s)===0){r.select()}k.unbind(q,"mouseup",o);k.unbind(q,"mousemove",p);r=n=0}q.documentElement.unselectable=true;k.bind(q,["mousedown","contextmenu"],function(s){if(s.target.nodeName==="HTML"){if(n){o()}h=q.documentElement;if(h.scrollHeight>h.clientHeight){return}n=1;r=m(s.x,s.y);
if(r){k.bind(q,"mouseup",o);k.bind(q,"mousemove",p);k.win.focus();r.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(f,l,g){var k,b,e=a.isIE,h=a.each,d;if(!f.apply_source_formatting){f.indent=false}l=l||a.DOM;g=g||new a.html.Schema(f);f.entity_encoding=f.entity_encoding||"named";f.remove_trailing_brs="remove_trailing_brs" in f?f.remove_trailing_brs:true;k=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);d=new a.html.DomParser(f,g);d.addAttributeFilter("src,href,style",function(n,m){var r=n.length,o,t,q="data-mce-"+m,s=f.url_converter,u=f.url_converter_scope,p;while(r--){o=n[r];t=o.attributes.map[q];if(t!==p){o.attr(m,t.length>0?t:null);o.attr(q,null)}else{t=o.attributes.map[m];if(m==="style"){t=l.serializeStyle(l.parseStyle(t),o.name)}else{if(s){t=s.call(u,t,m,o.name)}}o.attr(m,t.length>0?t:null)}}});d.addAttributeFilter("class",function(m,n){var o=m.length,p,q;while(o--){p=m[o];q=p.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,"");p.attr("class",q.length>0?q:null)
}});d.addAttributeFilter("data-mce-type",function(m,o,n){var p=m.length,q;while(p--){q=m[p];if(q.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup){q.remove()}}});d.addAttributeFilter("data-mce-expando",function(m,o,n){var p=m.length;while(p--){m[p].attr(o,null)}});d.addNodeFilter("noscript",function(m){var n=m.length,o;while(n--){o=m[n].firstChild;if(o){o.value=a.html.Entities.decode(o.value)}}});d.addNodeFilter("script,style",function(n,o){var p=n.length,q,r;function m(s){return s.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}while(p--){q=n[p];r=q.firstChild?q.firstChild.value:"";if(o==="script"){q.attr("type",(q.attr("type")||"text/javascript").replace(/^mce\-/,""));if(r.length>0){q.firstChild.value="// <![CDATA[\n"+m(r)+"\n// ]]>"
}}else{if(r.length>0){q.firstChild.value="<!--\n"+m(r)+"\n-->"}}}});d.addNodeFilter("#comment",function(m,n){var o=m.length,p;while(o--){p=m[o];if(p.value.indexOf("[CDATA[")===0){p.name="#cdata";p.type=4;p.value=p.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(p.value.indexOf("mce:protected ")===0){p.name="#text";p.type=3;p.raw=true;p.value=unescape(p.value).substr(14)}}}});d.addNodeFilter("xml:namespace,input",function(m,n){var o=m.length,p;while(o--){p=m[o];if(p.type===7){p.remove()}else{if(p.type===1){if(n==="input"&&!("type" in p.attributes.map)){p.attr("type","text")}}}}});if(f.fix_list_elements){d.addNodeFilter("ul,ol",function(n,o){var p=n.length,q,m;while(p--){q=n[p];m=q.parent;if(m.name==="ul"||m.name==="ol"){if(q.prev&&q.prev.name==="li"){q.prev.append(q)}}}})}d.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(m,n){var o=m.length;while(o--){m[o].attr(n,null)}});return{schema:g,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,onPreProcess:k,onPostProcess:b,serialize:function(r,p){var o,s,n,m,q;
if(e&&l.select("script,style,select,map").length>0){q=r.innerHTML;r=r.cloneNode(false);l.setHTML(r,q)}else{r=r.cloneNode(true)}o=r.ownerDocument.implementation;if(o.createHTMLDocument){s=o.createHTMLDocument("");h(r.nodeName=="BODY"?r.childNodes:[r],function(t){s.body.appendChild(s.importNode(t,true))});if(r.nodeName!="BODY"){r=s.body.firstChild}else{r=s.body}n=l.doc;l.doc=s}p=p||{};p.format=p.format||"html";if(!p.no_events){p.node=r;k.dispatch(self,p)}m=new a.html.Serializer(f,g);p.content=m.serialize(d.parse(a.trim(p.getInner?r.innerHTML:l.getOuterHTML(r)),p));if(!p.cleanup){p.content=p.content.replace(/\uFEFF/g,"")}if(!p.no_events){b.dispatch(self,p)}if(n){l.doc=n}p.node=null;return p.content},addRules:function(m){g.addValidElements(m)},setRules:function(m){g.setValidElements(m)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(k){var d=0,n=1,l=2,o={},m=[],f={},e=[],h=0,g;function b(p,B){var C=this,u=a.DOM,z,r,v,q;function s(){u.remove(q);if(z){z.onreadystatechange=z.onload=z=null
}B()}function A(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+p)}}q=u.uniqueId();if(a.isIE6){r=new a.util.URI(p);v=location;if(r.host==v.hostname&&r.port==v.port&&(r.protocol+":")==v.protocol&&r.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(r.getURI()),success:function(D){var t=u.create("script",{type:"text/javascript"});t.text=D;document.getElementsByTagName("head")[0].appendChild(t);u.remove(t);s()},error:A});return}}z=document.createElement("script");z.id=q;z.type="text/javascript";z.src=a._addVer(p);if(!a.isIE){z.onload=s}z.onerror=A;if(!a.isOpera){z.onreadystatechange=function(){var t=z.readyState;if(t=="complete"||t=="loaded"){s()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(z)}this.isDone=function(p){return o[p]==l};this.markDone=function(p){o[p]=l};this.add=this.load=function(p,t,q){var r,s=o[p];if(s==g){m.push(p);o[p]=d}if(t){if(!f[p]){f[p]=[]}f[p].push({func:t,scope:q||this})}};this.loadQueue=function(q,p){this.loadScripts(m,q,p)
};this.loadScripts=function(p,t,s){var r;function q(u){a.each(f[u],function(v){v.func.call(v.scope)});f[u]=g}e.push({func:t,scope:s||this});r=function(){var u=a.grep(p);p.length=0;a.each(u,function(v){if(o[v]==l){q(v);return}if(o[v]!=n){o[v]=n;h++;b(v,function(){o[v]=l;h--;q(v);r()})}});if(!h){a.each(e,function(v){v.func.call(v.scope)});e.length=0}};r()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);(function(a){a.dom.RangeUtils=function(d){var b="\uFEFF";this.walk=function(e,v){var l=e.startContainer,o=e.startOffset,z=e.endContainer,p=e.endOffset,m,h,r,k,u,t,f;f=d.select("td.mceSelected,th.mceSelected");if(f.length>0){a.each(f,function(A){v([A])});return}function g(A){var B;B=A[0];if(B.nodeType===3&&B===l&&o>=B.nodeValue.length){A.splice(0,1)}B=A[A.length-1];if(p===0&&A.length>0&&B===z&&B.nodeType===3){A.splice(A.length-1,1)}return A}function s(C,B,A){var D=[];for(;C&&C!=A;C=C[B]){D.push(C)}return D}function q(B,A){do{if(B.parentNode==A){return B}B=B.parentNode}while(B)}function n(C,B,D){var A=D?"nextSibling":"previousSibling";
for(k=C,u=k.parentNode;k&&k!=B;k=u){u=k.parentNode;t=s(k==C?k:k[A],A);if(t.length){if(!D){t.reverse()}v(g(t))}}}if(l.nodeType==1&&l.hasChildNodes()){l=l.childNodes[o]}if(z.nodeType==1&&z.hasChildNodes()){z=z.childNodes[Math.min(p-1,z.childNodes.length-1)]}if(l==z){return v(g([l]))}m=d.findCommonAncestor(l,z);for(k=l;k;k=k.parentNode){if(k===z){return n(l,m,true)}if(k===m){break}}for(k=z;k;k=k.parentNode){if(k===l){return n(z,m)}if(k===m){break}}h=q(l,m)||l;r=q(z,m)||z;n(l,h,true);t=s(h==l?h:h.nextSibling,"nextSibling",r==z?r.nextSibling:r);if(t.length){v(g(t))}n(z,r)};this.split=function(f){var k=f.startContainer,e=f.startOffset,l=f.endContainer,h=f.endOffset;function g(m,n){return m.splitText(n)}if(k==l&&k.nodeType==3){if(e>0&&e<k.nodeValue.length){l=g(k,e);k=l.previousSibling;if(h>e){h=h-e;k=l=g(l,h).previousSibling;h=l.nodeValue.length;e=0}else{h=0}}}else{if(k.nodeType==3&&e>0&&e<k.nodeValue.length){k=g(k,e);e=0}if(l.nodeType==3&&h>0&&h<l.nodeValue.length){l=g(l,h).previousSibling;h=l.nodeValue.length
}}return{startContainer:k,startOffset:e,endContainer:l,endOffset:h}}};a.dom.RangeUtils.compareRanges=function(d,b){if(d&&b){if(d.item||d.duplicate){if(d.item&&b.item&&d.item(0)===b.item(0)){return true}if(d.isEqual&&b.isEqual&&b.isEqual(d)){return true}}else{return d.startContainer==b.startContainer&&d.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,d=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(f,g){var u=this,q=f.root,p=f.items,r=f.enableUpDown,l=f.enableLeftRight||!f.enableUpDown,o=f.excludeFromTabOrder,n,k,s,e,h;g=g||b.DOM;n=function(t){h=t.target.id};k=function(t){g.setAttrib(t.target.id,"tabindex","-1")};e=function(t){var v=g.get(h);g.setAttrib(v,"tabindex","0");v.focus()};u.focus=function(){g.get(h).focus()};u.destroy=function(){d(p,function(v){var z=g.get(v.id);g.unbind(z,"focus",n);g.unbind(z,"blur",k)});var t=g.get(q);g.unbind(t,"focus",e);g.unbind(t,"keydown",s);p=g=q=u.focus=n=k=s=e=null;u.destroy=function(){}
};u.moveFocus=function(B,v){var t=-1,A=u.controls,z;if(!h){return}d(p,function(D,C){if(D.id===h){t=C;return false}});t+=B;if(t<0){t=p.length-1}else{if(t>=p.length){t=0}}z=p[t];g.setAttrib(h,"tabindex","-1");g.setAttrib(z.id,"tabindex","0");g.get(z.id).focus();if(f.actOnFocus){f.onAction(z.id)}if(v){a.cancel(v)}};s=function(E){var B=37,A=39,D=38,F=40,t=27,z=14,v=13,C=32;switch(E.keyCode){case B:if(l){u.moveFocus(-1)}break;case A:if(l){u.moveFocus(1)}break;case D:if(r){u.moveFocus(-1)}break;case F:if(r){u.moveFocus(1)}break;case t:if(f.onCancel){f.onCancel();a.cancel(E)}break;case z:case v:case C:if(f.onAction){f.onAction(h);a.cancel(E)}break}};d(p,function(z,t){var v,A;if(!z.id){z.id=g.uniqueId("_mce_item_")}A=g.get(z.id);if(o){g.bind(A,"blur",k);v="-1"}else{v=(t===0?"0":"-1")}A.setAttribute("tabindex",v);g.bind(A,"focus",n)});if(p[0]){h=p[0].id}g.setAttrib(q,"tabindex","-1");var m=g.get(q);g.bind(m,"focus",e);g.bind(m,"keydown",s)}})})(tinymce);(function(d){var b=d.DOM,a=d.is;d.create("tinymce.ui.Control",{Control:function(g,f,e){this.id=g;
this.settings=f=f||{};this.rendered=false;this.onRender=new d.util.Dispatcher(this);this.classPrefix="";this.scope=f.scope||this;this.disabled=0;this.active=0;this.editor=e},setAriaProperty:function(g,f){var e=b.get(this.id+"_aria")||b.get(this.id);if(e){b.setAttrib(e,"aria-"+g,!!f)}},focus:function(){b.get(this.id).focus()},setDisabled:function(e){if(e!=this.disabled){this.setAriaProperty("disabled",e);this.setState("Disabled",e);this.setState("Enabled",!e);this.disabled=e}},isDisabled:function(){return this.disabled},setActive:function(e){if(e!=this.active){this.setState("Active",e);this.active=e;this.setAriaProperty("pressed",e)}},isActive:function(){return this.active},setState:function(g,e){var f=b.get(this.id);g=this.classPrefix+g;if(e){b.addClass(f,g)}else{b.removeClass(f,g)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){b.setHTML(e,this.renderHTML())},postRender:function(){var f=this,e;if(a(f.disabled)){e=f.disabled;f.disabled=-1;f.setDisabled(e)
}if(a(f.active)){e=f.active;f.active=-1;f.setActive(e)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){d.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(d,b,a){this.parent(d,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(e){var d=e.is,b=e.DOM,f=e.each,a=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(h,g){this.parent(h,g);this.classPrefix="mceMenuItem"},setSelected:function(g){this.setState("Selected",g);this.setAriaProperty("checked",!!g);this.selected=g},isSelected:function(){return this.selected
},postRender:function(){var g=this;g.parent();if(d(g.selected)){g.setSelected(g.selected)}}})})(tinymce);(function(e){var d=e.is,b=e.DOM,f=e.each,a=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(k,h){var g=this;g.parent(k,h);g.items={};g.collapsed=false;g.menuCount=0;g.onAddItem=new e.util.Dispatcher(this)},expand:function(h){var g=this;if(h){a(g,function(k){if(k.expand){k.expand()}},"items",g)}g.collapsed=false},collapse:function(h){var g=this;if(h){a(g,function(k){if(k.collapse){k.collapse()}},"items",g)}g.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(g){if(!g.settings){g=new e.ui.MenuItem(g.id||b.uniqueId(),g)}this.onAddItem.dispatch(this,g);return this.items[g.id]=g},addSeparator:function(){return this.add({separator:true})},addMenu:function(g){if(!g.collapse){g=this.createMenu(g)}this.menuCount++;return this.add(g)},hasMenus:function(){return this.menuCount!==0},remove:function(g){delete this.items[g.id]},removeAll:function(){var g=this;
a(g,function(h){if(h.removeAll){h.removeAll()}else{h.remove()}h.destroy()},"items",g);g.items={}},createMenu:function(h){var g=new e.ui.Menu(h.id||b.uniqueId(),h);g.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return g}})})(tinymce);(function(f){var e=f.is,d=f.DOM,g=f.each,a=f.dom.Event,b=f.dom.Element;f.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(k,h){h=h||{};h.container=h.container||d.doc.body;h.offset_x=h.offset_x||0;h.offset_y=h.offset_y||0;h.vp_offset_x=h.vp_offset_x||0;h.vp_offset_y=h.vp_offset_y||0;if(e(h.icons)&&!h.icons){h["class"]+=" mceNoIcons"}this.parent(k,h);this.onShowMenu=new f.util.Dispatcher(this);this.onHideMenu=new f.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(n){var k=this,l=k.settings,h;n.container=n.container||l.container;n.parent=k;n.constrain=n.constrain||l.constrain;n["class"]=n["class"]||l["class"];n.vp_offset_x=n.vp_offset_x||l.vp_offset_x;n.vp_offset_y=n.vp_offset_y||l.vp_offset_y;n.keyboard_focus=l.keyboard_focus;
h=new f.ui.DropMenu(n.id||d.uniqueId(),n);h.onAddItem.add(k.onAddItem.dispatch,k.onAddItem);return h},focus:function(){var h=this;if(h.keyboardNav){h.keyboardNav.focus()}},update:function(){var l=this,m=l.settings,h=d.get("menu_"+l.id+"_tbl"),o=d.get("menu_"+l.id+"_co"),k,n;k=m.max_width?Math.min(h.offsetWidth,m.max_width):h.offsetWidth;n=m.max_height?Math.min(h.offsetHeight,m.max_height):h.offsetHeight;if(!d.boxModel){l.element.setStyles({width:k+2,height:n+2})}else{l.element.setStyles({width:k,height:n})}if(m.max_width){d.setStyle(o,"width",k)}if(m.max_height){d.setStyle(o,"height",n);if(h.clientHeight<m.max_height){d.setStyle(o,"overflow","hidden")}}},showMenu:function(u,q,z){var C=this,D=C.settings,r,k=d.getViewPort(),A,o,B,v,l=2,n,m,p=C.classPrefix;C.collapse(1);if(C.isMenuVisible){return}if(!C.rendered){r=d.add(C.settings.container,C.renderNode());g(C.items,function(h){h.postRender()});C.element=new b("menu_"+C.id,{blocker:1,container:D.container})}else{r=d.get("menu_"+C.id)}if(!f.isOpera){d.setStyles(r,{left:-65535,top:-65535})
}d.show(r);C.update();u+=D.offset_x||0;q+=D.offset_y||0;k.w-=4;k.h-=4;if(D.constrain){A=r.clientWidth-l;o=r.clientHeight-l;B=k.x+k.w;v=k.y+k.h;if((u+D.vp_offset_x+A)>B){u=z?z-A:Math.max(0,(B-D.vp_offset_x)-A)}if((q+D.vp_offset_y+o)>v){q=Math.max(0,(v-D.vp_offset_y)-o)}}d.setStyles(r,{left:u,top:q});C.element.update();C.isMenuVisible=1;C.mouseClickFunc=a.add(r,"click",function(s){var h;s=s.target;if(s&&(s=d.getParent(s,"tr"))&&!d.hasClass(s,p+"ItemSub")){h=C.items[s.id];if(h.isDisabled()){return}n=C;while(n){if(n.hideMenu){n.hideMenu()}n=n.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return false}});if(C.hasMenus()){C.mouseOverFunc=a.add(r,"mouseover",function(E){var h,t,s;E=E.target;if(E&&(E=d.getParent(E,"tr"))){h=C.items[E.id];if(C.lastMenu){C.lastMenu.collapse(1)}if(h.isDisabled()){return}if(E&&d.hasClass(E,p+"ItemSub")){t=d.getRect(E);h.showMenu((t.x+t.w-l),t.y-l,t.x);C.lastMenu=h;d.addClass(d.get(h.id).firstChild,p+"ItemActive")}}})}a.add(r,"keydown",C._keyHandler,C);
C.onShowMenu.dispatch(C);if(D.keyboard_focus){C._setupKeyboardNav()}},hideMenu:function(m){var h=this,l=d.get("menu_"+h.id),k;if(!h.isMenuVisible){return}if(h.keyboardNav){h.keyboardNav.destroy()}a.remove(l,"mouseover",h.mouseOverFunc);a.remove(l,"click",h.mouseClickFunc);a.remove(l,"keydown",h._keyHandler);d.hide(l);h.isMenuVisible=0;if(!m){h.collapse(1)}if(h.element){h.element.hide()}if(k=d.get(h.id)){d.removeClass(k.firstChild,h.classPrefix+"ItemActive")}h.onHideMenu.dispatch(h)},add:function(l){var h=this,k;l=h.parent(l);if(h.isRendered&&(k=d.get("menu_"+h.id))){h._add(d.select("tbody",k)[0],l)}return l},collapse:function(h){this.parent(h);this.hideMenu(1)},remove:function(h){d.remove(h.id);this.destroy();return this.parent(h)},destroy:function(){var h=this,k=d.get("menu_"+h.id);if(h.keyboardNav){h.keyboardNav.destroy()}a.remove(k,"mouseover",h.mouseOverFunc);a.remove(d.select("a",k),"focus",h.mouseOverFunc);a.remove(k,"click",h.mouseClickFunc);a.remove(k,"keydown",h._keyHandler);if(h.element){h.element.remove()
}d.remove(k)},renderNode:function(){var l=this,m=l.settings,p,k,o,h;h=d.create("div",{role:"listbox",id:"menu_"+l.id,"class":m["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(l.settings.parent){d.setAttrib(h,"aria-parent","menu_"+l.settings.parent.id)}o=d.add(h,"div",{role:"presentation",id:"menu_"+l.id+"_co","class":l.classPrefix+(m["class"]?" "+m["class"]:"")});l.element=new b("menu_"+l.id,{blocker:1,container:m.container});if(m.menu_line){d.add(o,"span",{"class":l.classPrefix+"Line"})}p=d.add(o,"table",{role:"presentation",id:"menu_"+l.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});k=d.add(p,"tbody");g(l.items,function(n){l._add(k,n)});l.rendered=true;return h},_setupKeyboardNav:function(){var l,k,h=this;l=d.get("menu_"+h.id);k=d.select("a[role=option]","menu_"+h.id);k.splice(0,0,l);h.keyboardNav=new f.ui.KeyboardNavigation({root:"menu_"+h.id,items:k,onCancel:function(){h.hideMenu()},enableUpDown:true});l.focus()},_keyHandler:function(h){var k=this,l;switch(h.keyCode){case 37:if(k.settings.parent){k.hideMenu();
k.settings.parent.focus();a.cancel(h)}break;case 39:if(k.mouseOverFunc){k.mouseOverFunc(h)}break}},_add:function(m,k){var l,u=k.settings,t,q,p,r=this.classPrefix,h;if(u.separator){q=d.add(m,"tr",{id:k.id,"class":r+"ItemSeparator"});d.add(q,"td",{"class":r+"ItemSeparator"});if(l=q.previousSibling){d.addClass(l,"mceLast")}return}l=q=d.add(m,"tr",{id:k.id,"class":r+"Item "+r+"ItemEnabled"});l=p=d.add(l,u.titleItem?"th":"td");l=t=d.add(l,"a",{id:k.id+"_aria",role:u.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(u.parent){d.setAttrib(t,"aria-haspopup","true");d.setAttrib(t,"aria-owns","menu_"+k.id)}d.addClass(p,u["class"]);h=d.add(l,"span",{"class":"mceIcon"+(u.icon?" mce_"+u.icon:"")});if(u.icon_src){d.add(h,"img",{src:u.icon_src})}l=d.add(l,u.element||"span",{"class":"mceText",title:k.settings.title},k.settings.title);if(k.settings.style){if(typeof k.settings.style=="function"){k.settings.style=k.settings.style()}d.setAttrib(l,"style",k.settings.style)
}if(m.childNodes.length==1){d.addClass(q,"mceFirst")}if((l=q.previousSibling)&&d.hasClass(l,r+"ItemSeparator")){d.addClass(q,"mceFirst")}if(k.collapse){d.addClass(q,r+"ItemSub")}if(l=q.previousSibling){d.removeClass(l,"mceLast")}d.addClass(q,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(f,e,d){this.parent(f,e,d);this.classPrefix="mceButton"},renderHTML:function(){var g=this.classPrefix,f=this.settings,e,d;d=a.encode(f.label||"");e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+g+" "+g+"Enabled "+f["class"]+(d?" "+g+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(f.title)+'">';if(f.image&&!(this.editor&&this.editor.forcedHighContrastMode)){e+='<span class="mceIcon '+f["class"]+'"><img class="mceIcon" src="'+f.image+'" alt="'+a.encode(f.title)+'" /></span>'+(d?'<span class="'+g+'Label">'+d+"</span>":"")}else{e+='<span class="mceIcon '+f["class"]+'"></span>'+(d?'<span class="'+g+'Label">'+d+"</span>":"")
}e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+f.title+"</span>";e+="</a>";return e},postRender:function(){var e=this,f=e.settings,d;if(b.isIE&&e.editor){b.dom.Event.add(e.id,"mousedown",function(g){var h=e.editor.selection.getNode().nodeName;d=h==="IMG"?e.editor.selection.getBookmark():null})}b.dom.Event.add(e.id,"click",function(g){if(!e.isDisabled()){if(b.isIE&&e.editor&&d!==null){e.editor.selection.moveToBookmark(d)}return f.onclick.call(f.scope,g)}});b.dom.Event.add(e.id,"keyup",function(g){if(!e.isDisabled()&&g.keyCode==b.VK.SPACEBAR){return f.onclick.call(f.scope,g)}})}})})(tinymce);(function(f){var e=f.DOM,b=f.dom.Event,g=f.each,a=f.util.Dispatcher,d;f.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(m,l,h){var k=this;k.parent(m,l,h);k.items=[];k.onChange=new a(k);k.onPostRender=new a(k);k.onAdd=new a(k);k.onRenderMenu=new f.util.Dispatcher(this);k.classPrefix="mceListBox";k.marked={}},select:function(k){var h=this,m,l;
h.marked={};if(k==d){return h.selectByIndex(-1)}if(k&&typeof(k)=="function"){l=k}else{l=function(n){return n==k}}if(k!=h.selectedValue){g(h.items,function(p,n){if(l(p.value)){m=1;h.selectByIndex(n);return false}});if(!m){h.selectByIndex(-1)}}},selectByIndex:function(h){var l=this,m,n,k;l.marked={};if(h!=l.selectedIndex){m=e.get(l.id+"_text");k=e.get(l.id+"_voiceDesc");n=l.items[h];if(n){l.selectedValue=n.value;l.selectedIndex=h;e.setHTML(m,e.encode(n.title));e.setHTML(k,l.settings.title+" - "+n.title);e.removeClass(m,"mceTitle");e.setAttrib(l.id,"aria-valuenow",n.title)}else{e.setHTML(m,e.encode(l.settings.title));e.setHTML(k,e.encode(l.settings.title));e.addClass(m,"mceTitle");l.selectedValue=l.selectedIndex=null;e.setAttrib(l.id,"aria-valuenow",l.settings.title)}m=0}},mark:function(h){this.marked[h]=true},add:function(m,h,l){var k=this;l=l||{};l=f.extend(l,{title:m,value:h});k.items.push(l);k.onAdd.dispatch(k,l)},getLength:function(){return this.items.length},renderHTML:function(){var m="",k=this,l=k.settings,n=k.classPrefix;
m='<span role="listbox" aria-haspopup="true" aria-labelledby="'+k.id+'_voiceDesc" aria-describedby="'+k.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+k.id+'" cellpadding="0" cellspacing="0" class="'+n+" "+n+"Enabled"+(l["class"]?(" "+l["class"]):"")+'"><tbody><tr>';m+="<td>"+e.createHTML("span",{id:k.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},k.settings.title);m+=e.createHTML("a",{id:k.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},e.encode(k.settings.title))+"</td>";m+="<td>"+e.createHTML("a",{id:k.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";m+="</tr></tbody></table></span>";return m},showMenu:function(){var k=this,n,l=e.get(this.id),h;if(k.isDisabled()||k.items.length===0){return}if(k.menu&&k.menu.isMenuVisible){return k.hideMenu()
}if(!k.isMenuRendered){k.renderMenu();k.isMenuRendered=true}n=e.getPos(l);h=k.menu;h.settings.offset_x=n.x;h.settings.offset_y=n.y;h.settings.keyboard_focus=!f.isOpera;g(k.items,function(m){if(h.items[m.id]){h.items[m.id].setSelected(0)}});g(k.items,function(m){if(h.items[m.id]&&k.marked[m.value]){h.items[m.id].setSelected(1)}if(m.value===k.selectedValue){h.items[m.id].setSelected(1)}});h.showMenu(0,l.clientHeight);b.add(e.doc,"mousedown",k.hideMenu,k);e.addClass(k.id,k.classPrefix+"Selected")},hideMenu:function(k){var h=this;if(h.menu&&h.menu.isMenuVisible){e.removeClass(h.id,h.classPrefix+"Selected");if(k&&k.type=="mousedown"&&(k.target.id==h.id+"_text"||k.target.id==h.id+"_open")){return}if(!k||!e.getParent(k.target,".mceMenu")){e.removeClass(h.id,h.classPrefix+"Selected");b.remove(e.doc,"mousedown",h.hideMenu,h);h.menu.hideMenu()}}},renderMenu:function(){var k=this,h;h=k.settings.control_manager.createDropMenu(k.id+"_menu",{menu_line:1,"class":k.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150});
h.onHideMenu.add(function(){k.hideMenu();k.focus()});h.add({title:k.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(k.settings.onselect("")!==false){k.select("")}}});g(k.items,function(l){if(l.value===d){h.add({title:l.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(k.settings.onselect("")!==false){k.select("")}}})}else{l.id=e.uniqueId();l.role="option";l.onclick=function(){if(k.settings.onselect(l.value)!==false){k.select(l.value)}};h.add(l)}});k.onRenderMenu.dispatch(k,h);k.menu=h},postRender:function(){var h=this,k=h.classPrefix;b.add(h.id,"click",h.showMenu,h);b.add(h.id,"keydown",function(l){if(l.keyCode==32){h.showMenu(l);b.cancel(l)}});b.add(h.id,"focus",function(){if(!h._focused){h.keyDownHandler=b.add(h.id,"keydown",function(l){if(l.keyCode==40){h.showMenu();b.cancel(l)}});h.keyPressHandler=b.add(h.id,"keypress",function(m){var l;if(m.keyCode==13){l=h.selectedValue;h.selectedValue=null;b.cancel(m);h.settings.onselect(l)}})}h._focused=1});b.add(h.id,"blur",function(){b.remove(h.id,"keydown",h.keyDownHandler);
b.remove(h.id,"keypress",h.keyPressHandler);h._focused=0});if(f.isIE6||!e.boxModel){b.add(h.id,"mouseover",function(){if(!e.hasClass(h.id,k+"Disabled")){e.addClass(h.id,k+"Hover")}});b.add(h.id,"mouseout",function(){if(!e.hasClass(h.id,k+"Disabled")){e.removeClass(h.id,k+"Hover")}})}h.onPostRender.dispatch(h,e.get(h.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(f){var e=f.DOM,b=f.dom.Event,g=f.each,a=f.util.Dispatcher,d;f.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(k,h){this.parent(k,h);this.classPrefix="mceNativeListBox"},setDisabled:function(h){e.get(this.id).disabled=h;this.setAriaProperty("disabled",h)},isDisabled:function(){return e.get(this.id).disabled},select:function(k){var h=this,m,l;if(k==d){return h.selectByIndex(-1)}if(k&&typeof(k)=="function"){l=k}else{l=function(n){return n==k}}if(k!=h.selectedValue){g(h.items,function(p,n){if(l(p.value)){m=1;h.selectByIndex(n);return false
}});if(!m){h.selectByIndex(-1)}}},selectByIndex:function(h){e.get(this.id).selectedIndex=h+1;this.selectedValue=this.items[h]?this.items[h].value:null},add:function(p,k,h){var m,l=this;h=h||{};h.value=k;if(l.isRendered()){e.add(e.get(this.id),"option",h,p)}m={title:p,value:k,attribs:h};l.items.push(m);l.onAdd.dispatch(l,m)},getLength:function(){return this.items.length},renderHTML:function(){var l,k=this;l=e.createHTML("option",{value:""},"-- "+k.settings.title+" --");g(k.items,function(h){l+=e.createHTML("option",{value:h.value},h.title)});l=e.createHTML("select",{id:k.id,"class":"mceNativeListBox","aria-labelledby":k.id+"_aria"},l);l+=e.createHTML("span",{id:k.id+"_aria",style:"display: none"},k.settings.title);return l},postRender:function(){var k=this,l,m=true;k.rendered=true;function h(o){var n=k.items[o.target.selectedIndex-1];if(n&&(n=n.value)){k.onChange.dispatch(k,n);if(k.settings.onselect){k.settings.onselect(n)}}}b.add(k.id,"change",h);b.add(k.id,"keydown",function(o){var n;b.remove(k.id,"change",l);
m=false;n=b.add(k.id,"blur",function(){if(m){return}m=true;b.add(k.id,"change",h);b.remove(k.id,"blur",n)});if(f.isWebKit&&(o.keyCode==37||o.keyCode==39)){return b.prevent(o)}if(o.keyCode==13||o.keyCode==32){h(o);return b.cancel(o)}});k.onPostRender.dispatch(k,e.get(k.id))}})})(tinymce);(function(d){var b=d.DOM,a=d.dom.Event,e=d.each;d.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(h,g,f){this.parent(h,g,f);this.onRenderMenu=new d.util.Dispatcher(this);g.menu_container=g.menu_container||b.doc.body},showMenu:function(){var g=this,l,k,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}l=b.getPos(g.settings.menu_container);k=b.getPos(h);f=g.menu;f.settings.offset_x=k.x;f.settings.offset_y=k.y;f.settings.vp_offset_x=k.x;f.settings.vp_offset_y=k.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.firstChild.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);
g.isMenuVisible=1},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:g.settings.icons});f.onHideMenu.add(function(){g.hideMenu();g.focus()});g.onRenderMenu.dispatch(g,f);g.menu=f},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var f=this,g=f.settings;a.add(f.id,"click",function(){if(!f.isDisabled()){if(g.onclick){g.onclick(f.value)}f.showMenu()}})}})})(tinymce);(function(d){var b=d.DOM,a=d.dom.Event,e=d.each;d.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(h,g,f){this.parent(h,g,f);this.classPrefix="mceSplitButton"},renderHTML:function(){var l,g=this,k=g.settings,f;l="<tbody><tr>";if(k.image){f=b.createHTML("img ",{src:k.image,role:"presentation","class":"mceAction "+k["class"]})
}else{f=b.createHTML("span",{"class":"mceAction "+k["class"]},"")}f+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:g.id+"_voice",style:"display:none;"},k.title);l+="<td >"+b.createHTML("a",{role:"button",id:g.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+k["class"],onclick:"return false;",onmousedown:"return false;",title:k.title},f)+"</td>";f=b.createHTML("span",{"class":"mceOpen "+k["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');l+="<td >"+b.createHTML("a",{role:"button",id:g.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+k["class"],onclick:"return false;",onmousedown:"return false;",title:k.title},f)+"</td>";l+="</tr></tbody>";l=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+k["class"],cellpadding:"0",cellspacing:"0",title:k.title},l);return b.createHTML("div",{id:g.id,role:"button",tabindex:"0","aria-labelledby":g.id+"_voice","aria-haspopup":"true"},l)
},postRender:function(){var f=this,h=f.settings,g;if(h.onclick){g=function(k){if(!f.isDisabled()){h.onclick(f.value);a.cancel(k)}};a.add(f.id+"_action","click",g);a.add(f.id,["click","keydown"],function(k){var n=32,p=14,l=13,m=38,o=40;if((k.keyCode===32||k.keyCode===13||k.keyCode===14)&&!k.altKey&&!k.ctrlKey&&!k.metaKey){g();a.cancel(k)}else{if(k.type==="click"||k.keyCode===o){f.showMenu();a.cancel(k)}}})}a.add(f.id+"_open","click",function(k){f.showMenu();a.cancel(k)});a.add([f.id,f.id+"_open"],"focus",function(){f._focused=1});a.add([f.id,f.id+"_open"],"blur",function(){f._focused=0});if(d.isIE6||!b.boxModel){a.add(f.id,"mouseover",function(){if(!b.hasClass(f.id,"mceSplitButtonDisabled")){b.addClass(f.id,"mceSplitButtonHover")}});a.add(f.id,"mouseout",function(){if(!b.hasClass(f.id,"mceSplitButtonDisabled")){b.removeClass(f.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(e){var d=e.DOM,a=e.dom.Event,b=e.is,f=e.each;
e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(l,k,g){var h=this;h.parent(l,k,g);h.settings=k=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},h.settings);h.onShowMenu=new e.util.Dispatcher(h);h.onHideMenu=new e.util.Dispatcher(h);h.value=k.default_color},showMenu:function(){var g=this,h,m,l,k;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}l=d.get(g.id);d.show(g.id+"_menu");d.addClass(l,"mceSplitButtonSelected");k=d.getPos(l);d.setStyles(g.id+"_menu",{left:k.x,top:k.y+l.firstChild.clientHeight,zIndex:200000});l=0;a.add(d.doc,"mousedown",g.hideMenu,g);g.onShowMenu.dispatch(g);if(g._focused){g._keyHandler=a.add(g.id+"_menu","keydown",function(n){if(n.keyCode==27){g.hideMenu()
}});d.select("a",g.id+"_menu")[0].focus()}g.keyboardNav=new e.ui.KeyboardNavigation({root:g.id+"_menu",items:d.select("a",g.id+"_menu"),onCancel:function(){g.hideMenu();g.focus()}});g.keyboardNav.focus();g.isMenuVisible=1},hideMenu:function(h){var g=this;if(g.isMenuVisible){if(h&&h.type=="mousedown"&&d.getParent(h.target,function(k){return k.id===g.id+"_open"})){return}if(!h||!d.getParent(h.target,".mceSplitButtonMenu")){d.removeClass(g.id,"mceSplitButtonSelected");a.remove(d.doc,"mousedown",g.hideMenu,g);a.remove(g.id+"_menu","keydown",g._keyHandler);d.hide(g.id+"_menu")}g.isMenuVisible=0;g.onHideMenu.dispatch();g.keyboardNav.destroy()}},renderMenu:function(){var r=this,k,o=0,u=r.settings,h,l,p,q,g;q=d.add(u.menu_container,"div",{role:"listbox",id:r.id+"_menu","class":u.menu_class+" "+u["class"],style:"position:absolute;left:0;top:-1000px;"});k=d.add(q,"div",{"class":u["class"]+" mceSplitButtonMenu"});d.add(k,"span",{"class":"mceMenuLine"});h=d.add(k,"table",{role:"presentation","class":"mceColorSplitMenu"});
l=d.add(h,"tbody");o=0;f(b(u.colors,"array")?u.colors:u.colors.split(","),function(n){n=n.replace(/^#/,"");if(!o--){p=d.add(l,"tr");o=u.grid_width-1}h=d.add(p,"td");var m={href:"javascript:;",style:{backgroundColor:"#"+n},title:r.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};if(!e.isIE){m.role="option"}h=d.add(h,"a",m);if(r.editor.forcedHighContrastMode){h=d.add(h,"canvas",{width:16,height:16,"aria-hidden":"true"});if(h.getContext&&(g=h.getContext("2d"))){g.fillStyle="#"+n;g.fillRect(0,0,16,16)}else{d.remove(h)}}});if(u.more_colors_func){h=d.add(l,"tr");h=d.add(h,"td",{colspan:u.grid_width,"class":"mceMoreColors"});h=d.add(h,"a",{role:"option",id:r.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},u.more_colors_title);a.add(h,"click",function(m){u.more_colors_func.call(u.more_colors_scope||this);return a.cancel(m)})}d.addClass(k,"mceColorSplitMenu");a.add(r.id+"_menu","mousedown",function(m){return a.cancel(m)});a.add(r.id+"_menu","click",function(m){var n;
m=d.getParent(m.target,"a",l);if(m&&m.nodeName.toLowerCase()=="a"&&(n=m.getAttribute("data-mce-color"))){r.setColor(n)}return false});return q},setColor:function(g){this.displayColor(g);this.hideMenu();this.settings.onselect(g)},displayColor:function(h){var g=this;d.setStyle(g.id+"_preview","backgroundColor",h);g.value=h},postRender:function(){var g=this,h=g.id;g.parent();d.add(h+"_action","div",{id:h+"_preview","class":"mceColorPreview"});d.setStyle(g.id+"_preview","backgroundColor",g.value)},destroy:function(){var g=this;g.parent();a.clear(g.id+"_menu");a.clear(g.id+"_more");d.remove(g.id+"_menu");if(g.keyboardNav){g.keyboardNav.destroy()}}})})(tinymce);(function(b){var e=b.DOM,d=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var g=this,l=[],f=g.controls,m=b.each,k=g.settings;l.push('<div id="'+g.id+'" role="group" aria-labelledby="'+g.id+'_voice">');l.push("<span role='application'>");l.push('<span id="'+g.id+'_voice" class="mceVoiceLabel" style="display:none;">'+e.encode(k.name)+"</span>");
m(f,function(h){l.push(h.renderHTML())});l.push("</span>");l.push("</div>");return l.join("")},focus:function(){var f=this;e.get(f.id).focus()},postRender:function(){var g=this,f=[];d(g.controls,function(h){d(h.controls,function(k){if(k.id){f.push(k)}})});g.keyNav=new b.ui.KeyboardNavigation({root:g.id,items:f,onCancel:function(){if(b.isWebKit){e.get(g.editor.id+"_ifr").focus()}g.editor.focus()},excludeFromTabOrder:!g.settings.tab_focus_toolbar})},destroy:function(){var f=this;f.parent();f.keyNav.destroy();a.clear(f.id)}})})(tinymce);(function(a){var d=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var o=this,g="",l,m,p=o.settings,f,e,k,n;n=o.controls;for(f=0;f<n.length;f++){m=n[f];e=n[f-1];k=n[f+1];if(f===0){l="mceToolbarStart";if(m.Button){l+=" mceToolbarStartButton"}else{if(m.SplitButton){l+=" mceToolbarStartSplitButton"}else{if(m.ListBox){l+=" mceToolbarStartListBox"}}}g+=d.createHTML("td",{"class":l},d.createHTML("span",null,"<!-- IE -->"))
}if(e&&m.ListBox){if(e.Button||e.SplitButton){g+=d.createHTML("td",{"class":"mceToolbarEnd"},d.createHTML("span",null,"<!-- IE -->"))}}if(d.stdMode){g+='<td style="position: relative">'+m.renderHTML()+"</td>"}else{g+="<td>"+m.renderHTML()+"</td>"}if(k&&m.ListBox){if(k.Button||k.SplitButton){g+=d.createHTML("td",{"class":"mceToolbarStart"},d.createHTML("span",null,"<!-- IE -->"))}}}l="mceToolbarEnd";if(m.Button){l+=" mceToolbarEndButton"}else{if(m.SplitButton){l+=" mceToolbarEndSplitButton"}else{if(m.ListBox){l+=" mceToolbarEndListBox"}}}g+=d.createHTML("td",{"class":l},d.createHTML("span",null,"<!-- IE -->"));return d.createHTML("table",{id:o.id,"class":"mceToolbar"+(p["class"]?" "+p["class"]:""),cellpadding:"0",cellspacing:"0",align:o.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+g+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,d=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[];e.urls={};e.lookup={};e.onAdd=new a(e)
},get:function(e){if(this.lookup[e]){return this.lookup[e].instance}else{return undefined}},dependencies:function(f){var e;if(this.lookup[f]){e=this.lookup[f].dependencies}return e||[]},requireLangPack:function(f){var e=b.settings;if(e&&e.language&&e.language_load!==false){b.ScriptLoader.add(this.urls[f]+"/langs/"+e.language+".js")}},add:function(g,f,e){this.items.push(f);this.lookup[g]={instance:f,dependencies:e};this.onAdd.dispatch(this,g,f);return f},createUrl:function(e,f){if(typeof f==="object"){return f}else{return{prefix:e.prefix,resource:f,suffix:e.suffix}}},addComponents:function(g,e){var f=this.urls[g];b.each(e,function(h){b.ScriptLoader.add(f+"/"+h)})},load:function(m,g,e,k){var h=this,f=g;function l(){var n=h.dependencies(m);b.each(n,function(p){var o=h.createUrl(g,p);h.load(o.resource,o,undefined,undefined)});if(e){if(k){e.call(k)}else{e.call(b.ScriptLoader)}}}if(h.urls[m]){return}if(typeof g==="object"){f=g.prefix+g.resource+g.suffix}if(f.indexOf("/")!==0&&f.indexOf("://")==-1){f=b.baseURL+"/"+f
}h.urls[m]=f.substring(0,f.lastIndexOf("/"));if(h.lookup[m]){l()}else{b.ScriptLoader.add(f,l,k)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(m){var h=m.each,e=m.extend,n=m.DOM,l=m.dom.Event,g=m.ThemeManager,b=m.PluginManager,f=m.explode,k=m.util.Dispatcher,a,d=0;m.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(m.documentBaseURL)){m.documentBaseURL+="/"}m.baseURL=new m.util.URI(m.documentBaseURL).toAbsolute(m.baseURL);m.baseURI=new m.util.URI(m.baseURL);m.onBeforeUnload=new k(m);l.add(window,"beforeunload",function(o){m.onBeforeUnload.dispatch(m,o)});m.onAddEditor=new k(m);m.onRemoveEditor=new k(m);m.EditorManager=e(m,{editors:[],i18n:{},activeEditor:null,init:function(C){var B=this,r,q=m.ScriptLoader,A,o=[],z;function v(t){var s=t.id;if(!s){s=t.name;if(s&&!n.get(s)){s=t.name}else{s=n.uniqueId()}t.setAttribute("id",s)}return s}function p(E,F,t){var D=E[F];if(!D){return}if(m.is(D,"string")){t=D.replace(/\.\w+$/,"");
t=t?m.resolve(t):0;D=m.resolve(D)}return D.apply(t||this,Array.prototype.slice.call(arguments,2))}function u(t,s){return s.constructor===RegExp?s.test(t.className):n.hasClass(t,s)}B.settings=C;l.bind(window,"ready",function(){var s,t;p(C,"onpageload");switch(C.mode){case"exact":s=C.elements||"";if(s.length>0){h(f(s),function(D){if(n.get(D)){z=new m.Editor(D,C);o.push(z);z.render(1)}else{h(document.forms,function(E){h(E.elements,function(F){if(F.name===D){D="mce_editor_"+d++;n.setAttrib(F,"id",D);z=new m.Editor(D,C);o.push(z);z.render(1)}})})}})}break;case"textareas":case"specific_textareas":h(n.select("textarea"),function(D){if(C.editor_deselector&&u(D,C.editor_deselector)){return}if(!C.editor_selector||u(D,C.editor_selector)){z=new m.Editor(v(D),C);o.push(z);z.render(1)}});break;default:if(C.types){h(C.types,function(D){h(n.select(D.selector),function(F){var E=new m.Editor(v(F),m.extend({},C,D));o.push(E);E.render(1)})})}else{if(C.selector){h(n.select(C.selector),function(E){var D=new m.Editor(v(E),C);
o.push(D);D.render(1)})}}}if(C.oninit){s=t=0;h(o,function(D){t++;if(!D.initialized){D.onInit.add(function(){s++;if(s==t){p(C,"oninit")}})}else{s++}if(s==t){p(C,"oninit")}})}})},get:function(o){if(o===a){return this.editors}if(!this.editors.hasOwnProperty(o)){return a}return this.editors[o]},getInstanceById:function(o){return this.get(o)},add:function(p){var o=this,q=o.editors;q[p.id]=p;q.push(p);o._setActive(p);o.onAddEditor.dispatch(o,p);return p},remove:function(q){var p=this,o,r=p.editors;if(!r[q.id]){return null}delete r[q.id];for(o=0;o<r.length;o++){if(r[o]==q){r.splice(o,1);break}}if(p.activeEditor==q){p._setActive(r[0])}q.destroy();p.onRemoveEditor.dispatch(p,q);return q},execCommand:function(A,s,r){var z=this,q=z.get(r),o;function p(){q.destroy();o.detachEvent("onunload",p);o=o.tinyMCE=o.tinymce=null}switch(A){case"mceFocus":q.focus();return true;case"mceAddEditor":case"mceAddControl":if(!z.get(r)){new m.Editor(r,z.settings).render()}return true;case"mceAddFrameControl":o=r.window;
o.tinyMCE=tinyMCE;o.tinymce=m;m.DOM.doc=o.document;m.DOM.win=o;q=new m.Editor(r.element_id,r);q.render();if(m.isIE){o.attachEvent("onunload",p)}r.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(q){q.remove()}return true;case"mceToggleEditor":if(!q){z.execCommand("mceAddControl",0,r);return true}if(q.isHidden()){q.show()}else{q.hide()}return true}if(z.activeEditor){return z.activeEditor.execCommand(A,s,r)}return false},execInstanceCommand:function(s,r,q,p){var o=this.get(s);if(o){return o.execCommand(r,q,p)}return false},triggerSave:function(){h(this.editors,function(o){o.save()})},addI18n:function(s,t){var q,r=this.i18n;if(!m.is(s,"string")){h(s,function(u,p){h(u,function(z,v){h(z,function(B,A){if(v==="common"){r[p+"."+A]=B}else{r[p+"."+v+"."+A]=B}})})})}else{h(t,function(u,p){r[s+"."+p]=u})}},_setActive:function(o){this.selectedInstance=this.activeEditor=o}})})(tinymce);(function(n){var o=n.DOM,m=n.dom.Event,g=n.extend,l=n.each,a=n.isGecko,b=n.isIE,f=n.isWebKit,e=n.is,k=n.ThemeManager,d=n.PluginManager,h=n.explode;
n.create("tinymce.Editor",{Editor:function(s,r){var p=this,q=true;p.settings=r=g({id:s,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:n.documentBaseURL,add_form_submit_trigger:q,submit_patch:q,add_unload_trigger:q,convert_urls:q,relative_urls:q,remove_script_host:q,table_inline_editing:false,object_resizing:q,accessibility_focus:q,doctype:n.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:q,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:q,directionality:"ltr",forced_root_block:"p",hidden_input:q,padd_empty_editor:q,render_ui:q,indentation:"30px",fix_table_elements:q,inline_styles:q,convert_fonts_to_spans:q,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:q,entity_encoding:"named",url_converter:p.convertURL,url_converter_scope:p,ie7_compat:q},r);
p.id=p.editorId=s;p.isNotDirty=false;p.plugins={};p.documentBaseURI=new n.util.URI(r.document_base_url||n.documentBaseURL,{base_uri:tinyMCE.baseURI});p.baseURI=n.baseURI;p.contentCSS=[];p.contentStyles=[];p.setupEvents();p.execCommands={};p.queryStateCommands={};p.queryValueCommands={};p.execCallback("setup",p)},render:function(r){var u=this,v=u.settings,z=u.id,p=n.ScriptLoader;if(!m.domLoaded){m.add(window,"ready",function(){u.render()});return}tinyMCE.settings=v;if(!u.getElement()){return}if(n.isIDevice&&!n.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(u.getElement().nodeName)&&v.hidden_input&&o.getParent(z,"form")){o.insertAfter(o.create("input",{type:"hidden",name:z}),z)}if(!v.content_editable){u.orgVisibility=u.getElement().style.visibility;u.getElement().style.visibility="hidden"}if(n.WindowManager){u.windowManager=new n.WindowManager(u)}if(v.encoding=="xml"){u.onGetContent.add(function(s,t){if(t.save){t.content=o.encode(t.content)}})}if(v.add_form_submit_trigger){u.onSubmit.addToTop(function(){if(u.initialized){u.save();
u.isNotDirty=1}})}if(v.add_unload_trigger){u._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(u.initialized&&!u.destroyed&&!u.isHidden()){u.save({format:"raw",no_events:true})}})}n.addUnload(u.destroy,u);if(v.submit_patch){u.onBeforeRenderUI.add(function(){var s=u.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){u.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){n.triggerSave();u.isNotDirty=1;return u.formElement._mceOldSubmit(u.formElement)}}s=null})}function q(){if(v.language&&v.language_load!==false){p.add(n.baseURL+"/langs/"+v.language+".js")}if(v.theme&&typeof v.theme!="function"&&v.theme.charAt(0)!="-"&&!k.urls[v.theme]){k.load(v.theme,"themes/"+v.theme+"/editor_template"+n.suffix+".js")}l(h(v.plugins),function(t){if(t&&!d.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var s=d.dependencies(t);l(s,function(B){var A={prefix:"plugins/",resource:B,suffix:"/editor_plugin"+n.suffix+".js"};B=d.createUrl(A,B);d.load(B.resource,B)
})}else{if(t=="safari"){return}d.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+n.suffix+".js"})}}});p.loadQueue(function(){if(!u.removed){u.init()}})}q()},init:function(){var r,J=this,K=J.settings,G,B,C,F=J.getElement(),q,p,H,z,E,I,A,v=[];n.add(J);K.aria_label=K.aria_label||o.getAttrib(F,"aria-label",J.getLang("aria.rich_text_area"));if(K.theme){if(typeof K.theme!="function"){K.theme=K.theme.replace(/-/,"");q=k.get(K.theme);J.theme=new q();if(J.theme.init){J.theme.init(J,k.urls[K.theme]||n.documentBaseURL.replace(/\/$/,""))}}else{J.theme=K.theme}}function D(L){var M=d.get(L),t=d.urls[L]||n.documentBaseURL.replace(/\/$/,""),s;if(M&&n.inArray(v,L)===-1){l(d.dependencies(L),function(u){D(u)});s=new M(J,t);J.plugins[L]=s;if(s.init){s.init(J,t);v.push(L)}}}l(h(K.plugins.replace(/\-/g,"")),D);if(K.popup_css!==false){if(K.popup_css){K.popup_css=J.documentBaseURI.toAbsolute(K.popup_css)}else{K.popup_css=J.baseURI.toAbsolute("themes/"+K.theme+"/skins/"+K.skin+"/dialog.css")}}if(K.popup_css_add){K.popup_css+=","+J.documentBaseURI.toAbsolute(K.popup_css_add)
}J.controlManager=new n.ControlManager(J);J.onBeforeRenderUI.dispatch(J,J.controlManager);if(K.render_ui&&J.theme){J.orgDisplay=F.style.display;if(typeof K.theme!="function"){G=K.width||F.style.width||F.offsetWidth;B=K.height||F.style.height||F.offsetHeight;C=K.min_height||100;I=/^[0-9\.]+(|px)$/i;if(I.test(""+G)){G=Math.max(parseInt(G,10)+(q.deltaWidth||0),100)}if(I.test(""+B)){B=Math.max(parseInt(B,10)+(q.deltaHeight||0),C)}q=J.theme.renderUI({targetNode:F,width:G,height:B,deltaWidth:K.delta_width,deltaHeight:K.delta_height});o.setStyles(q.sizeContainer||q.editorContainer,{width:G,height:B});B=(q.iframeHeight||B)+(typeof(B)=="number"?(q.deltaHeight||0):"");if(B<C){B=C}}else{q=K.theme(J,F);if(q.editorContainer.nodeType){q.editorContainer=q.editorContainer.id=q.editorContainer.id||J.id+"_parent"}if(q.iframeContainer.nodeType){q.iframeContainer=q.iframeContainer.id=q.iframeContainer.id||J.id+"_iframecontainer"}B=q.iframeHeight||F.offsetHeight;if(b){J.onInit.add(function(s){s.dom.bind(s.getBody(),"beforedeactivate keydown",function(){s.lastIERng=s.selection.getRng()
})})}}J.editorContainer=q.editorContainer}if(K.content_css){l(h(K.content_css),function(s){J.contentCSS.push(J.documentBaseURI.toAbsolute(s))})}if(K.content_style){J.contentStyles.push(K.content_style)}if(K.content_editable){F=r=q=null;return J.initContentBody()}if(document.domain&&location.hostname!=document.domain){n.relaxedDomain=document.domain}J.iframeHTML=K.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(K.document_base_url!=n.documentBaseURL){J.iframeHTML+='<base href="'+J.documentBaseURI.getURI()+'" />'}if(n.isIE8){if(K.ie7_compat){J.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{J.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}}J.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(A=0;A<J.contentCSS.length;A++){J.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+J.contentCSS[A]+'" />'}J.contentCSS=[];z=K.body_id||"tinymce";if(z.indexOf("=")!=-1){z=J.getParam("body_id","","hash");
z=z[J.id]||z}E=K.body_class||"";if(E.indexOf("=")!=-1){E=J.getParam("body_class","","hash");E=E[J.id]||""}J.iframeHTML+='</head><body id="'+z+'" class="mceContentBody '+E+'" onload="window.parent.tinyMCE.get(\''+J.id+"').onLoad.dispatch();\"><br></body></html>";if(n.relaxedDomain&&(b||(n.isOpera&&parseFloat(opera.version())<11))){H='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+J.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}r=o.add(q.iframeContainer,"iframe",{id:J.id+"_ifr",src:H||'javascript:""',frameBorder:"0",allowTransparency:"true",title:K.aria_label,style:{width:"100%",height:B,display:"block"}});J.contentAreaContainer=q.iframeContainer;if(q.editorContainer){o.get(q.editorContainer).style.display=J.orgDisplay}F.style.visibility=J.orgVisibility;o.get(J.id).style.display="none";o.setAttrib(J.id,"aria-hidden",true);if(!n.relaxedDomain||!H){J.initContentBody()}F=r=q=null},initContentBody:function(){var q=this,s=q.settings,t=o.get(q.id),u=q.getDoc(),r,p,v;
if((!b||!n.relaxedDomain)&&!s.content_editable){u.open();u.write(q.iframeHTML);u.close();if(n.relaxedDomain){u.domain=n.relaxedDomain}}if(s.content_editable){o.addClass(t,"mceContentBody");q.contentDocument=u=s.content_document||document;q.contentWindow=s.content_window||window;q.bodyElement=t;s.content_document=s.content_window=null}p=q.getBody();p.disabled=true;if(!s.readonly){p.contentEditable=q.getParam("content_editable_state",true)}p.disabled=false;q.schema=new n.html.Schema(s);q.dom=new n.dom.DOMUtils(u,{keep_values:true,url_converter:q.convertURL,url_converter_scope:q,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:true,root_element:s.content_editable?q.id:null,schema:q.schema});q.parser=new n.html.DomParser(s,q.schema);q.parser.addAttributeFilter("src,href,style",function(z,A){var B=z.length,D,F=q.dom,E,C;while(B--){D=z[B];E=D.attr(A);C="data-mce-"+A;if(!D.attributes.map[C]){if(A==="style"){D.attr(C,F.serializeStyle(F.parseStyle(E),D.name))}else{D.attr(C,q.convertURL(E,A,D.name))
}}}});q.parser.addNodeFilter("script",function(z,A){var B=z.length,C;while(B--){C=z[B];C.attr("type","mce-"+(C.attr("type")||"text/javascript"))}});q.parser.addNodeFilter("#cdata",function(z,A){var B=z.length,C;while(B--){C=z[B];C.type=8;C.name="#comment";C.value="[CDATA["+C.value+"]]"}});q.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(A,B){var C=A.length,D,z=q.schema.getNonEmptyElements();while(C--){D=A[C];if(D.isEmpty(z)){D.empty().append(new n.html.Node("br",1)).shortEnded=true}}});q.serializer=new n.dom.Serializer(s,q.dom,q.schema);q.selection=new n.dom.Selection(q.dom,q.getWin(),q.serializer,q);q.formatter=new n.Formatter(q);q.undoManager=new n.UndoManager(q);q.forceBlocks=new n.ForceBlocks(q);q.enterKey=new n.EnterKey(q);q.editorCommands=new n.EditorCommands(q);q.onExecCommand.add(function(z,A){if(!/^(FontName|FontSize)$/.test(A)){q.nodeChanged()}});q.serializer.onPreProcess.add(function(z,A){return q.onPreProcess.dispatch(q,A,z)});q.serializer.onPostProcess.add(function(z,A){return q.onPostProcess.dispatch(q,A,z)
});q.onPreInit.dispatch(q);if(!s.browser_spellcheck&&!s.gecko_spellcheck){u.body.spellcheck=false}if(!s.readonly){q.bindNativeEvents()}q.controlManager.onPostRender.dispatch(q,q.controlManager);q.onPostRender.dispatch(q);q.quirks=n.util.Quirks(q);if(s.directionality){p.dir=s.directionality}if(s.nowrap){p.style.whiteSpace="nowrap"}if(s.protect){q.onBeforeSetContent.add(function(z,A){l(s.protect,function(B){A.content=A.content.replace(B,function(C){return"<!--mce:protected "+escape(C)+"-->"})})})}q.onSetContent.add(function(){q.addVisual(q.getBody())});if(s.padd_empty_editor){q.onPostProcess.add(function(z,A){A.content=A.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}q.load({initial:true,format:"html"});q.startContent=q.getContent({format:"raw"});q.initialized=true;q.onInit.dispatch(q);q.execCallback("setupcontent_callback",q.id,p,u);q.execCallback("init_instance_callback",q);q.focus(true);q.nodeChanged({initial:true});if(q.contentStyles.length>0){v="";
l(q.contentStyles,function(z){v+=z+"\r\n"});q.dom.addStyle(v)}l(q.contentCSS,function(z){q.dom.loadCSS(z)});if(s.auto_focus){setTimeout(function(){var z=n.get(s.auto_focus);z.selection.select(z.getBody(),1);z.selection.collapse(1);z.getBody().focus();z.getWin().focus()},100)}t=u=p=null},focus:function(t){var s,B=this,A=B.selection,u=B.settings.content_editable,r,v,z=B.getDoc(),p;if(!t){if(B.lastIERng){A.setRng(B.lastIERng)}r=A.getRng();if(r.item){v=r.item(0)}B._refreshContentEditable();if(!u){B.getWin().focus()}if(n.isGecko||u){p=B.getBody();if(p.setActive){try{p.setActive()}catch(q){p.focus()}}else{p.focus()}if(u){A.normalize()}}if(v&&v.ownerDocument==z){r=z.body.createControlRange();r.addElement(v);r.select()}}if(n.activeEditor!=B){if((s=n.activeEditor)!=null){s.onDeactivate.dispatch(s,B)}B.onActivate.dispatch(B,s)}n._setActive(B)},execCallback:function(u){var p=this,r=p.settings[u],q;if(!r){return}if(p.callbackLookup&&(q=p.callbackLookup[u])){r=q.func;q=q.scope}if(e(r,"string")){q=r.replace(/\.\w+$/,"");
q=q?n.resolve(q):0;r=n.resolve(r);p.callbackLookup=p.callbackLookup||{};p.callbackLookup[u]={func:r,scope:q}}return r.apply(q||p,Array.prototype.slice.call(arguments,1))},translate:function(p){var r=this.settings.language||"en",q=n.i18n;if(!p){return""}return q[r+"."+p]||p.replace(/\{\#([^\}]+)\}/g,function(t,s){return q[r+"."+s]||"{#"+s+"}"})},getLang:function(q,p){return n.i18n[(this.settings.language||"en")+"."+q]||(e(p)?p:"{#"+q+"}")},getParam:function(u,r,p){var s=n.trim,q=e(this.settings[u])?this.settings[u]:r,t;if(p==="hash"){t={};if(e(q,"string")){l(q.indexOf("=")>0?q.split(/[;,](?![^=;,]*(?:[;,]|$))/):q.split(","),function(z){z=z.split("=");if(z.length>1){t[s(z[0])]=s(z[1])}else{t[s(z[0])]=s(z)}})}else{t=q}return t}return q},nodeChanged:function(s){var p=this,q=p.selection,r;if(p.initialized){s=s||{};r=q.getStart()||p.getBody();r=b&&r.ownerDocument!=p.getDoc()?p.getBody():r;s.parents=[];p.dom.getParent(r,function(t){if(t.nodeName=="BODY"){return true}s.parents.push(t)});p.onNodeChange.dispatch(p,s?s.controlManager||p.controlManager:p.controlManager,r,q.isCollapsed(),s)
}},addButton:function(q,r){var p=this;p.buttons=p.buttons||{};p.buttons[q]=r},addCommand:function(p,r,q){this.execCommands[p]={func:r,scope:q||this}},addQueryStateHandler:function(p,r,q){this.queryStateCommands[p]={func:r,scope:q||this}},addQueryValueHandler:function(p,r,q){this.queryValueCommands[p]={func:r,scope:q||this}},addShortcut:function(r,u,p,s){var q=this,v;if(q.settings.custom_shortcuts===false){return false}q.shortcuts=q.shortcuts||{};if(e(p,"string")){v=p;p=function(){q.execCommand(v,false,null)}}if(e(p,"object")){v=p;p=function(){q.execCommand(v[0],v[1],v[2])}}l(h(r),function(t){var z={func:p,scope:s||this,desc:q.translate(u),alt:false,ctrl:false,shift:false};l(h(t,"+"),function(A){switch(A){case"alt":case"ctrl":case"shift":z[A]=true;break;default:z.charCode=A.charCodeAt(0);z.keyCode=A.toUpperCase().charCodeAt(0)}});q.shortcuts[(z.ctrl?"ctrl":"")+","+(z.alt?"alt":"")+","+(z.shift?"shift":"")+","+z.keyCode]=z});return true},execCommand:function(z,v,B,p){var r=this,u=0,A,q;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(z)&&(!p||!p.skip_focus)){r.focus()
}p=g({},p);r.onBeforeExecCommand.dispatch(r,z,v,B,p);if(p.terminate){return false}if(r.execCallback("execcommand_callback",r.id,r.selection.getNode(),z,v,B)){r.onExecCommand.dispatch(r,z,v,B,p);return true}if(A=r.execCommands[z]){q=A.func.call(A.scope,v,B);if(q!==true){r.onExecCommand.dispatch(r,z,v,B,p);return q}}l(r.plugins,function(s){if(s.execCommand&&s.execCommand(z,v,B)){r.onExecCommand.dispatch(r,z,v,B,p);u=1;return false}});if(u){return true}if(r.theme&&r.theme.execCommand&&r.theme.execCommand(z,v,B)){r.onExecCommand.dispatch(r,z,v,B,p);return true}if(r.editorCommands.execCommand(z,v,B)){r.onExecCommand.dispatch(r,z,v,B,p);return true}r.getDoc().execCommand(z,v,B);r.onExecCommand.dispatch(r,z,v,B,p)},queryCommandState:function(u){var q=this,v,r;if(q._isHidden()){return}if(v=q.queryStateCommands[u]){r=v.func.call(v.scope);if(r!==true){return r}}v=q.editorCommands.queryCommandState(u);if(v!==-1){return v}try{return this.getDoc().queryCommandState(u)}catch(p){}},queryCommandValue:function(v){var q=this,u,r;
if(q._isHidden()){return}if(u=q.queryValueCommands[v]){r=u.func.call(u.scope);if(r!==true){return r}}u=q.editorCommands.queryCommandValue(v);if(e(u)){return u}try{return this.getDoc().queryCommandValue(v)}catch(p){}},show:function(){var p=this;o.show(p.getContainer());o.hide(p.id);p.load()},hide:function(){var p=this,q=p.getDoc();if(b&&q){q.execCommand("SelectAll")}p.save();o.hide(p.getContainer());o.setStyle(p.id,"display",p.orgDisplay)},isHidden:function(){return !o.isHidden(this.id)},setProgressState:function(p,q,r){this.onSetProgressState.dispatch(this,p,q,r);return p},load:function(s){var p=this,r=p.getElement(),q;if(r){s=s||{};s.load=true;q=p.setContent(e(r.value)?r.value:r.innerHTML,s);s.element=r;if(!s.no_events){p.onLoadContent.dispatch(p,s)}s.element=r=null;return q}},save:function(u){var p=this,s=p.getElement(),q,r;if(!s||!p.initialized){return}u=u||{};u.save=true;u.element=s;q=u.content=p.getContent(u);if(!u.no_events){p.onSaveContent.dispatch(p,u)}q=u.content;if(!/TEXTAREA|INPUT/i.test(s.nodeName)){s.innerHTML=q;
if(r=o.getParent(p.id,"form")){l(r.elements,function(t){if(t.name==p.id){t.value=q;return false}})}}else{s.value=q}u.element=s=null;return q},setContent:function(u,s){var r=this,q,p=r.getBody(),t;s=s||{};s.format=s.format||"html";s.set=true;s.content=u;if(!s.no_events){r.onBeforeSetContent.dispatch(r,s)}u=s.content;if(!n.isIE&&(u.length===0||/^\s+$/.test(u))){t=r.settings.forced_root_block;if(t){u="<"+t+'><br data-mce-bogus="1"></'+t+">"}else{u='<br data-mce-bogus="1">'}p.innerHTML=u;r.selection.select(p,true);r.selection.collapse(true);return}if(s.format!=="raw"){u=new n.html.Serializer({},r.schema).serialize(r.parser.parse(u))}s.content=n.trim(u);r.dom.setHTML(p,s.content);if(!s.no_events){r.onSetContent.dispatch(r,s)}if(!r.settings.content_editable||document.activeElement===r.getBody()){r.selection.normalize()}return s.content},getContent:function(r){var q=this,s,p=q.getBody();r=r||{};r.format=r.format||"html";r.get=true;r.getInner=true;if(!r.no_events){q.onBeforeGetContent.dispatch(q,r)
}if(r.format=="raw"){s=p.innerHTML}else{if(r.format=="text"){s=p.innerText||p.textContent}else{s=q.serializer.serialize(p,r)}}if(r.format!="text"){r.content=n.trim(s)}else{r.content=s}if(!r.no_events){q.onGetContent.dispatch(q,r)}return r.content},isDirty:function(){var p=this;return n.trim(p.startContent)!=n.trim(p.getContent({format:"raw",no_events:1}))&&!p.isNotDirty},getContainer:function(){var p=this;if(!p.container){p.container=o.get(p.editorContainer||p.id+"_parent")}return p.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var p=this,q;if(!p.contentWindow){q=o.get(p.id+"_ifr");if(q){p.contentWindow=q.contentWindow}}return p.contentWindow},getDoc:function(){var p=this,q;if(!p.contentDocument){q=p.getWin();if(q){p.contentDocument=q.document}}return p.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(r,q,t){var p=this,s=p.settings;
if(s.urlconverter_callback){return p.execCallback("urlconverter_callback",r,t,true,q)}if(!s.convert_urls||(t&&t.nodeName=="LINK")||r.indexOf("file:")===0){return r}if(s.relative_urls){return p.documentBaseURI.toRelative(r)}r=p.documentBaseURI.toAbsolute(r,s.remove_script_host);return r},addVisual:function(t){var q=this,r=q.settings,s=q.dom,p;t=t||q.getBody();if(!e(q.hasVisual)){q.hasVisual=r.visual}l(s.select("table,a",t),function(v){var u;switch(v.nodeName){case"TABLE":p=r.visual_table_class||"mceItemTable";u=s.getAttrib(v,"border");if(!u||u=="0"){if(q.hasVisual){s.addClass(v,p)}else{s.removeClass(v,p)}}return;case"A":if(!s.getAttrib(v,"href",false)){u=s.getAttrib(v,"name")||v.id;p="mceItemAnchor";if(u){if(q.hasVisual){s.addClass(v,p)}else{s.removeClass(v,p)}}}return}});q.onVisualAid.dispatch(q,t,q.hasVisual)},remove:function(){var p=this,r=p.getContainer(),q=p.getDoc();if(!p.removed){p.removed=1;if(b&&q){q.execCommand("SelectAll")}p.save();o.setStyle(p.id,"display",p.orgDisplay);if(!p.settings.content_editable){m.unbind(p.getWin());
m.unbind(p.getDoc())}m.unbind(p.getBody());m.clear(r);p.execCallback("remove_instance_callback",p);p.onRemove.dispatch(p);p.onExecCommand.listeners=[];n.remove(p);o.remove(r)}},destroy:function(q){var p=this;if(p.destroyed){return}if(a){m.unbind(p.getDoc());m.unbind(p.getWin());m.unbind(p.getBody())}if(!q){n.removeUnload(p.destroy);tinyMCE.onBeforeUnload.remove(p._beforeUnload);if(p.theme&&p.theme.destroy){p.theme.destroy()}p.controlManager.destroy();p.selection.destroy();p.dom.destroy()}if(p.formElement){p.formElement.submit=p.formElement._mceOldSubmit;p.formElement._mceOldSubmit=null}p.contentAreaContainer=p.formElement=p.container=p.settings.content_element=p.bodyElement=p.contentDocument=p.contentWindow=null;if(p.selection){p.selection=p.selection.win=p.selection.dom=p.selection.dom.doc=null}p.destroyed=1},_refreshContentEditable:function(){var q=this,p,r;if(q._isHidden()){p=q.getBody();r=p.parentNode;r.removeChild(p);r.appendChild(p);p.focus()}},_isHidden:function(){var p;if(!a){return 0
}p=this.selection.getSel();return(!p||!p.rangeCount||p.rangeCount===0)}})})(tinymce);(function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var d=this,e=d.settings;b(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(f){d[f]=new a.util.Dispatcher(d)});if(e.cleanup_callback){d.onBeforeSetContent.add(function(f,g){g.content=f.execCallback("cleanup_callback","insert_to_editor",g.content,g)});d.onPreProcess.add(function(f,g){if(g.set){f.execCallback("cleanup_callback","insert_to_editor_dom",g.node,g)}if(g.get){f.execCallback("cleanup_callback","get_from_editor_dom",g.node,g)
}});d.onPostProcess.add(function(f,g){if(g.set){g.content=f.execCallback("cleanup_callback","insert_to_editor",g.content,g)}if(g.get){g.content=f.execCallback("cleanup_callback","get_from_editor",g.content,g)}})}if(e.save_callback){d.onGetContent.add(function(f,g){if(g.save){g.content=f.execCallback("save_callback",f.id,g.content,f.getBody())}})}if(e.handle_event_callback){d.onEvent.add(function(f,g,h){if(d.execCallback("handle_event_callback",g,f,h)===false){g.preventDefault();g.stopPropagation()}})}if(e.handle_node_change_callback){d.onNodeChange.add(function(g,f,h){g.execCallback("handle_node_change_callback",g.id,h,-1,-1,true,g.selection.isCollapsed())})}if(e.save_callback){d.onSaveContent.add(function(f,k){var g=f.execCallback("save_callback",f.id,k.content,f.getBody());if(g){k.content=g}})}if(e.onchange_callback){d.onChange.add(function(g,f){g.execCallback("onchange_callback",g,f)})}};a.Editor.prototype.bindNativeEvents=function(){var n=this,g,e=n.settings,f=n.dom,k;k={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};
function d(o,p){var q=o.type;if(n.removed){return}if(n.onEvent.dispatch(n,o,p)!==false){n[k[o.fakeType||o.type]].dispatch(n,o,p)}}function l(o){n.focus(true)}function m(o,p){if(p.keyCode!=65||!a.VK.metaKeyPressed(p)){n.selection.normalize()}n.nodeChanged()}b(k,function(p,q){var o=e.content_editable?n.getBody():n.getDoc();switch(q){case"contextmenu":f.bind(o,q,d);break;case"paste":f.bind(n.getBody(),q,d);break;case"submit":case"reset":f.bind(n.getElement().form||a.DOM.getParent(n.id,"form"),q,d);break;default:f.bind(o,q,d)}});f.bind(e.content_editable?n.getBody():(a.isGecko?n.getDoc():n.getWin()),"focus",function(o){n.focus(true)});if(e.content_editable&&a.isOpera){f.bind(n.getBody(),"click",l);f.bind(n.getBody(),"keydown",l)}n.onMouseUp.add(m);n.onKeyUp.add(function(o,q){var p=q.keyCode;if((p>=33&&p<=36)||(p>=37&&p<=40)||p==13||p==45||p==46||p==8||(a.isMac&&(p==91||p==93))||q.ctrlKey){m(o,q)}});n.onReset.add(function(){n.setContent(n.startContent,{format:"raw"})});function h(p,o){if(p.altKey||p.ctrlKey||p.metaKey){b(n.shortcuts,function(q){var r=a.isMac?p.metaKey:p.ctrlKey;
if(q.ctrl!=r||q.alt!=p.altKey||q.shift!=p.shiftKey){return}if(p.keyCode==q.keyCode||(p.charCode&&p.charCode==q.charCode)){p.preventDefault();if(o){q.func.call(q.scope)}return true}})}}n.onKeyUp.add(function(o,p){h(p)});n.onKeyPress.add(function(o,p){h(p)});n.onKeyDown.add(function(o,p){h(p,true)});if(a.isOpera){n.onClick.add(function(o,p){p.preventDefault()})}}})(tinymce);(function(e){var f=e.each,b,a=true,d=false;e.EditorCommands=function(q){var p=q.dom,s=q.selection,m={state:{},exec:{},value:{}},n=q.settings,t=q.formatter,r;function u(E,D,C){var B;E=E.toLowerCase();if(B=m.exec[E]){B(E,D,C);return a}return d}function o(C){var B;C=C.toLowerCase();if(B=m.state[C]){return B(C)}return -1}function k(C){var B;C=C.toLowerCase();if(B=m.value[C]){return B(C)}return d}function A(B,C){C=C||"exec";f(B,function(E,D){f(D.toLowerCase().split(","),function(F){m[C][F]=E})})}e.extend(this,{execCommand:u,queryCommandState:o,queryCommandValue:k,addCommands:A});function g(D,C,B){if(C===b){C=d}if(B===b){B=null
}return q.getDoc().execCommand(D,C,B)}function z(B){return t.match(B)}function v(B,C){t.toggle(B,C?{value:C}:b)}function l(B){r=s.getBookmark(B)}function h(){s.moveToBookmark(r)}A({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){q.undoManager.add()},"Cut,Copy,Paste":function(E){var D=q.getDoc(),B;try{g(E)}catch(C){B=a}if(B||!D.queryCommandSupported(E)){if(e.isGecko){q.windowManager.confirm(q.getLang("clipboard_msg"),function(F){if(F){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{q.windowManager.alert(q.getLang("clipboard_no_support"))}}},unlink:function(B){if(s.isCollapsed()){s.select(s.getNode())}g(B);s.collapse(d)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(B){var C=B.substring(7);f("left,center,right,full".split(","),function(D){if(C!=D){t.remove("align"+D)}});v("align"+C);u("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(D){var B,C;g(D);B=p.getParent(s.getNode(),"ol,ul");
if(B){C=B.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(C.nodeName)){l();p.split(C,B);h()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(B){v(B)},"ForeColor,HiliteColor,FontName":function(D,C,B){v(D,B)},FontSize:function(E,D,C){var B,F;if(C>=1&&C<=7){F=e.explode(n.font_size_style_values);B=e.explode(n.font_size_classes);if(B){C=B[C-1]||C}else{C=F[C-1]||C}}v(E,C)},RemoveFormat:function(B){t.remove(B)},mceBlockQuote:function(B){v("blockquote")},FormatBlock:function(D,C,B){return v(B||"p")},mceCleanup:function(){var B=s.getBookmark();q.setContent(q.getContent({cleanup:a}),{cleanup:a});s.moveToBookmark(B)},mceRemoveNode:function(E,D,C){var B=C||s.getNode();if(B!=q.getBody()){l();q.dom.remove(B,a);h()}},mceSelectNodeDepth:function(E,D,C){var B=0;p.getParent(s.getNode(),function(F){if(F.nodeType==1&&B++==C){s.select(F);return d}},q.getBody())},mceSelectNode:function(D,C,B){s.select(B)},mceInsertContent:function(G,N,P){var D,O,J,E,K,L,I,H,Q,C,F,R,B,M;D=q.parser;O=new e.html.Serializer({},q.schema);
B='<span id="mce_marker" data-mce-type="bookmark">\uFEFF</span>';L={content:P,format:"html"};s.onBeforeSetContent.dispatch(s,L);P=L.content;if(P.indexOf("{$caret}")==-1){P+="{$caret}"}P=P.replace(/\{\$caret\}/,B);if(!s.isCollapsed()){q.getDoc().execCommand("Delete",false,null)}J=s.getNode();L={context:J.nodeName.toLowerCase()};K=D.parse(P,L);F=K.lastChild;if(F.attr("id")=="mce_marker"){I=F;for(F=F.prev;F;F=F.walk(true)){if(F.type==3||!p.isBlock(F.name)){F.parent.insert(I,F,F.name==="br");break}}}if(!L.invalid){P=O.serialize(K);F=J.firstChild;R=J.lastChild;if(!F||(F===R&&F.nodeName==="BR")){p.setHTML(J,P)}else{s.setContent(P)}}else{s.setContent(B);J=s.getNode();E=q.getBody();if(J.nodeType==9){J=F=E}else{F=J}while(F!==E){J=F;F=F.parentNode}P=J==E?E.innerHTML:p.getOuterHTML(J);P=O.serialize(D.parse(P.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return O.serialize(K)})));if(J==E){p.setHTML(E,P)}else{p.setOuterHTML(J,P)}}I=p.get("mce_marker");H=p.getRect(I);Q=p.getViewPort(q.getWin());
if((H.y+H.h>Q.y+Q.h||H.y<Q.y)||(H.x>Q.x+Q.w||H.x<Q.x)){M=e.isIE?q.getDoc().documentElement:q.getBody();M.scrollLeft=H.x;M.scrollTop=H.y-Q.h+25}C=p.createRng();F=I.previousSibling;if(F&&F.nodeType==3){C.setStart(F,F.nodeValue.length)}else{C.setStartBefore(I);C.setEndBefore(I)}p.remove(I);s.setRng(C);s.onSetContent.dispatch(s,L);q.addVisual()},mceInsertRawHTML:function(D,C,B){s.setContent("tiny_mce_marker");q.setContent(q.getContent().replace(/tiny_mce_marker/g,function(){return B}))},mceToggleFormat:function(D,C,B){v(B)},mceSetContent:function(D,C,B){q.setContent(B)},"Indent,Outdent":function(E){var C,B,D;C=n.indentation;B=/[a-z%]+$/i.exec(C);C=parseInt(C);if(!o("InsertUnorderedList")&&!o("InsertOrderedList")){if(!n.forced_root_block&&!p.getParent(s.getNode(),p.isBlock)){t.apply("div")}f(s.getSelectedBlocks(),function(F){if(E=="outdent"){D=Math.max(0,parseInt(F.style.paddingLeft||0)-C);p.setStyle(F,"paddingLeft",D?D+B:"")}else{p.setStyle(F,"paddingLeft",(parseInt(F.style.paddingLeft||0)+C)+B)
}})}else{g(E)}},mceRepaint:function(){var C;if(e.isGecko){try{l(a);if(s.getSel()){s.getSel().selectAllChildren(q.getBody())}s.collapse(a);h()}catch(B){}}},mceToggleFormat:function(D,C,B){t.toggle(B)},InsertHorizontalRule:function(){q.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){q.hasVisual=!q.hasVisual;q.addVisual()},mceReplaceContent:function(D,C,B){q.execCommand("mceInsertContent",false,B.replace(/\{\$selection\}/g,s.getContent({format:"text"})))},mceInsertLink:function(E,D,C){var B;if(typeof(C)=="string"){C={href:C}}B=p.getParent(s.getNode(),"a");C.href=C.href.replace(" ","%20");if(!B||!C.href){t.remove("link")}if(C.href){t.apply("link",C,B)}},selectAll:function(){var C=p.getRoot(),B=p.createRng();if(s.getRng().setStart){B.setStart(C,0);B.setEnd(C,C.childNodes.length);s.setRng(B)}else{g("SelectAll")}}});A({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(E){var C="align"+E.substring(7);var B=s.isCollapsed()?[p.getParent(s.getNode(),p.isBlock)]:s.getSelectedBlocks();
var D=e.map(B,function(F){return !!t.matchNode(F,C)});return e.inArray(D,a)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(B){return z(B)},mceBlockQuote:function(){return z("blockquote")},Outdent:function(){var B;if(n.inline_styles){if((B=p.getParent(s.getStart(),p.isBlock))&&parseInt(B.style.paddingLeft)>0){return a}if((B=p.getParent(s.getEnd(),p.isBlock))&&parseInt(B.style.paddingLeft)>0){return a}}return o("InsertUnorderedList")||o("InsertOrderedList")||(!n.inline_styles&&!!p.getParent(s.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(C){var B=p.getParent(s.getNode(),"ul,ol");return B&&(C==="insertunorderedlist"&&B.tagName==="UL"||C==="insertorderedlist"&&B.tagName==="OL")}},"state");A({"FontSize,FontName":function(D){var C=0,B;if(B=p.getParent(s.getNode(),"span")){if(D=="fontsize"){C=B.style.fontSize}else{C=B.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return C}},"value");A({Undo:function(){q.undoManager.undo()
},Redo:function(){q.undoManager.redo()}})}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(k){var o,l=0,f=[],h,n,m,g;function d(){return b.trim(k.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function e(){o.typing=false;o.add()}onBeforeAdd=new a(o);n=new a(o);m=new a(o);g=new a(o);n.add(function(p,q){if(p.hasUndo()){return k.onChange.dispatch(k,q,p)}});m.add(function(p,q){return k.onUndo.dispatch(k,q,p)});g.add(function(p,q){return k.onRedo.dispatch(k,q,p)});k.onInit.add(function(){o.add()});k.onBeforeExecCommand.add(function(p,s,r,t,q){if(s!="Undo"&&s!="Redo"&&s!="mceRepaint"&&(!q||!q.skip_undo)){o.beforeChange()}});k.onExecCommand.add(function(p,s,r,t,q){if(s!="Undo"&&s!="Redo"&&s!="mceRepaint"&&(!q||!q.skip_undo)){o.add()}});k.onSaveContent.add(e);k.dom.bind(k.dom.getRoot(),"dragend",e);k.dom.bind(k.getBody(),"focusout",function(p){if(!k.removed&&o.typing){e()}});k.onKeyUp.add(function(p,r){var q=r.keyCode;
if((q>=33&&q<=36)||(q>=37&&q<=40)||q==45||q==13||r.ctrlKey){e()}});k.onKeyDown.add(function(p,r){var q=r.keyCode;if((q>=33&&q<=36)||(q>=37&&q<=40)||q==45){if(o.typing){e()}return}if((q<16||q>20)&&q!=224&&q!=91&&!o.typing){o.beforeChange();o.typing=true;o.add()}});k.onMouseDown.add(function(p,q){if(o.typing){e()}});k.addShortcut("ctrl+z","undo_desc","Undo");k.addShortcut("ctrl+y","redo_desc","Redo");o={data:f,typing:false,onBeforeAdd:onBeforeAdd,onAdd:n,onUndo:m,onRedo:g,beforeChange:function(){h=k.selection.getBookmark(2,true)},add:function(s){var p,q=k.settings,r;s=s||{};s.content=d();o.onBeforeAdd.dispatch(o,s);r=f[l];if(r&&r.content==s.content){return null}if(f[l]){f[l].beforeBookmark=h}if(q.custom_undo_redo_levels){if(f.length>q.custom_undo_redo_levels){for(p=0;p<f.length-1;p++){f[p]=f[p+1]}f.length--;l=f.length}}s.bookmark=k.selection.getBookmark(2,true);if(l<f.length-1){f.length=l+1}f.push(s);l=f.length-1;o.onAdd.dispatch(o,s);k.isNotDirty=0;return s},undo:function(){var q,p;if(o.typing){o.add();
o.typing=false}if(l>0){q=f[--l];k.setContent(q.content,{format:"raw"});k.selection.moveToBookmark(q.beforeBookmark);o.onUndo.dispatch(o,q)}return q},redo:function(){var p;if(l<f.length-1){p=f[++l];k.setContent(p.content,{format:"raw"});k.selection.moveToBookmark(p.bookmark);o.onRedo.dispatch(o,p)}return p},clear:function(){f=[];l=0;o.typing=false},hasUndo:function(){return l>0||this.typing},hasRedo:function(){return l<f.length-1&&!this.typing}};return o}})(tinymce);tinymce.ForceBlocks=function(d){var b=d.settings,f=d.dom,a=d.selection,e=d.schema.getBlockElements();function g(){var m=a.getStart(),k=d.getBody(),h,n,r,v,t,l,o,p=-16777215,s,u;if(!m||m.nodeType!==1||!b.forced_root_block){return}while(m&&m!=k){if(e[m.nodeName]){return}m=m.parentNode}h=a.getRng();if(h.setStart){n=h.startContainer;r=h.startOffset;v=h.endContainer;t=h.endOffset}else{if(h.item){m=h.item(0);h=d.getDoc().body.createTextRange();h.moveToElementText(m)}u=h.parentElement().ownerDocument===d.getDoc();tmpRng=h.duplicate();
tmpRng.collapse(true);r=tmpRng.move("character",p)*-1;if(!tmpRng.collapsed){tmpRng=h.duplicate();tmpRng.collapse(false);t=(tmpRng.move("character",p)*-1)-r}}m=k.firstChild;while(m){if(m.nodeType===3||(m.nodeType==1&&!e[m.nodeName])){if(m.nodeType===3&&m.nodeValue.length==0){o=m;m=m.nextSibling;f.remove(o);continue}if(!l){l=f.create(b.forced_root_block);m.parentNode.insertBefore(l,m);s=true}o=m;m=m.nextSibling;l.appendChild(o)}else{l=null;m=m.nextSibling}}if(s){if(h.setStart){h.setStart(n,r);h.setEnd(v,t);a.setRng(h)}else{if(u){try{h=d.getDoc().body.createTextRange();h.moveToElementText(k);h.collapse(true);h.moveStart("character",r);if(t>0){h.moveEnd("character",t)}h.select()}catch(q){}}}d.nodeChanged()}}if(b.forced_root_block){d.onKeyUp.add(g);d.onNodeChange.add(g)}};(function(d){var b=d.DOM,a=d.dom.Event,e=d.each,f=d.extend;d.create("tinymce.ControlManager",{ControlManager:function(g,l){var k=this,h;l=l||{};k.editor=g;k.controls={};k.onAdd=new d.util.Dispatcher(k);k.onPostRender=new d.util.Dispatcher(k);
k.prefix=l.prefix||g.id+"_";k._cls={};k.onPostRender.add(function(){e(k.controls,function(m){m.postRender()})})},get:function(g){return this.controls[this.prefix+g]||this.controls[g]},setActive:function(k,g){var h=null;if(h=this.get(k)){h.setActive(g)}return h},setDisabled:function(k,g){var h=null;if(h=this.get(k)){h.setDisabled(g)}return h},add:function(h){var g=this;if(h){g.controls[h.id]=h;g.onAdd.dispatch(h,g)}return h},createControl:function(m){var q,n,h,k=this,o=k.editor,p,g;if(!k.controlFactories){k.controlFactories=[];e(o.plugins,function(l){if(l.createControl){k.controlFactories.push(l)}})}p=k.controlFactories;for(n=0,h=p.length;n<h;n++){q=p[n].createControl(m,k);if(q){return k.add(q)}}if(m==="|"||m==="separator"){return k.createSeparator()}if(o.buttons&&(q=o.buttons[m])){return k.createButton(m,q)}return k.add(q)},createDropMenu:function(g,q,k){var p=this,l=p.editor,m,h,n,o;q=f({"class":"mceDropDown",constrain:l.settings.constrain_menus},q);q["class"]=q["class"]+" "+l.getParam("skin")+"Skin";
if(n=l.getParam("skin_variant")){q["class"]+=" "+l.getParam("skin")+"Skin"+n.substring(0,1).toUpperCase()+n.substring(1)}q["class"]+=l.settings.directionality=="rtl"?" mceRtl":"";g=p.prefix+g;o=k||p._cls.dropmenu||d.ui.DropMenu;m=p.controls[g]=new o(g,q);m.onAddItem.add(function(u,t){var r=t.settings;r.title=l.getLang(r.title,r.title);if(!r.onclick){r.onclick=function(s){if(r.cmd){l.execCommand(r.cmd,r.ui||false,r.value)}}}});l.onRemove.add(function(){m.destroy()});if(d.isIE){m.onShowMenu.add(function(){l.focus();h=l.selection.getBookmark(1)});m.onHideMenu.add(function(){if(h){l.selection.moveToBookmark(h);h=0}})}return p.add(m)},createListBox:function(g,q,k){var o=this,m=o.editor,l,n,p;if(o.get(g)){return null}q.title=m.translate(q.title);q.scope=q.scope||m;if(!q.onselect){q.onselect=function(r){m.execCommand(q.cmd,q.ui||false,r||q.value)}}q=f({title:q.title,"class":"mce_"+g,scope:q.scope,control_manager:o},q);g=o.prefix+g;function h(r){return r.settings.use_accessible_selects&&!d.isGecko
}if(m.settings.use_native_selects||h(m)){n=new d.ui.NativeListBox(g,q)}else{p=k||o._cls.listbox||d.ui.ListBox;n=new p(g,q,m)}o.controls[g]=n;if(d.isWebKit){n.onPostRender.add(function(s,r){a.add(r,"mousedown",function(){m.bookmark=m.selection.getBookmark(1)});a.add(r,"focus",function(){m.selection.moveToBookmark(m.bookmark);m.bookmark=null})})}if(n.hideMenu){m.onMouseDown.add(n.hideMenu,n)}return o.add(n)},createButton:function(q,l,p){var k=this,h=k.editor,m,n,g;if(k.get(q)){return null}l.title=h.translate(l.title);l.label=h.translate(l.label);l.scope=l.scope||h;if(!l.onclick&&!l.menu_button){l.onclick=function(){h.execCommand(l.cmd,l.ui||false,l.value)}}l=f({title:l.title,"class":"mce_"+q,unavailable_prefix:h.getLang("unavailable",""),scope:l.scope,control_manager:k},l);q=k.prefix+q;if(l.menu_button){g=p||k._cls.menubutton||d.ui.MenuButton;n=new g(q,l,h);h.onMouseDown.add(n.hideMenu,n)}else{g=k._cls.button||d.ui.Button;n=new g(q,l,h)}return k.add(n)},createMenuButton:function(k,g,h){g=g||{};
g.menu_button=1;return this.createButton(k,g,h)},createSplitButton:function(p,l,o){var k=this,h=k.editor,m,n,g;if(k.get(p)){return null}l.title=h.translate(l.title);l.scope=l.scope||h;if(!l.onclick){l.onclick=function(q){h.execCommand(l.cmd,l.ui||false,q||l.value)}}if(!l.onselect){l.onselect=function(q){h.execCommand(l.cmd,l.ui||false,q||l.value)}}l=f({title:l.title,"class":"mce_"+p,scope:l.scope,control_manager:k},l);p=k.prefix+p;g=o||k._cls.splitbutton||d.ui.SplitButton;n=k.add(new g(p,l,h));h.onMouseDown.add(n.hideMenu,n);return n},createColorSplitButton:function(g,q,k){var o=this,m=o.editor,l,n,p,h;if(o.get(g)){return null}q.title=m.translate(q.title);q.scope=q.scope||m;if(!q.onclick){q.onclick=function(r){if(d.isIE){h=m.selection.getBookmark(1)}m.execCommand(q.cmd,q.ui||false,r||q.value)}}if(!q.onselect){q.onselect=function(r){m.execCommand(q.cmd,q.ui||false,r||q.value)}}q=f({title:q.title,"class":"mce_"+g,menu_class:m.getParam("skin")+"Skin",scope:q.scope,more_colors_title:m.getLang("more_colors")},q);
g=o.prefix+g;p=k||o._cls.colorsplitbutton||d.ui.ColorSplitButton;n=new p(g,q,m);m.onMouseDown.add(n.hideMenu,n);m.onRemove.add(function(){n.destroy()});if(d.isIE){n.onShowMenu.add(function(){m.focus();h=m.selection.getBookmark(1)});n.onHideMenu.add(function(){if(h){m.selection.moveToBookmark(h);h=0}})}return o.add(n)},createToolbar:function(n,k,m){var l,h=this,g;n=h.prefix+n;g=m||h._cls.toolbar||d.ui.Toolbar;l=new g(n,k,h.editor);if(h.get(n)){return null}return h.add(l)},createToolbarGroup:function(n,k,m){var l,h=this,g;n=h.prefix+n;g=m||this._cls.toolbarGroup||d.ui.ToolbarGroup;l=new g(n,k,h.editor);if(h.get(n)){return null}return h.add(l)},createSeparator:function(h){var g=h||this._cls.separator||d.ui.Separator;return new g()},setControlType:function(h,g){return this._cls[h.toLowerCase()]=g},destroy:function(){e(this.controls,function(g){g.destroy()});this.controls=null}})})(tinymce);(function(e){var a=e.util.Dispatcher,f=e.each,d=e.isIE,b=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(g){var h=this;
h.editor=g;h.onOpen=new a(h);h.onClose=new a(h);h.params={};h.features={}},open:function(B,h){var A=this,m="",q,o,k=A.editor.settings.dialog_type=="modal",v,r,l,g=e.DOM.getViewPort(),z;B=B||{};h=h||{};r=b?g.w:screen.width;l=b?g.h:screen.height;B.name=B.name||"mc_"+new Date().getTime();B.width=parseInt(B.width||320);B.height=parseInt(B.height||240);B.resizable=true;B.left=B.left||parseInt(r/2)-(B.width/2);B.top=B.top||parseInt(l/2)-(B.height/2);h.inline=false;h.mce_width=B.width;h.mce_height=B.height;h.mce_auto_focus=B.auto_focus;if(k){if(d){B.center=true;B.help=false;B.dialogWidth=B.width+"px";B.dialogHeight=B.height+"px";B.scroll=B.scrollbars||false}}f(B,function(s,p){if(e.is(s,"boolean")){s=s?"yes":"no"}if(!/^(name|url)$/.test(p)){if(d&&k){m+=(m?";":"")+p+":"+s}else{m+=(m?",":"")+p+"="+s}}});A.features=B;A.params=h;A.onOpen.dispatch(A,B,h);z=B.url||B.file;z=e._addVer(z);try{if(d&&k){v=1;window.showModalDialog(z,window,m)}else{v=window.open(z,B.name,m)}}catch(n){}if(!v){alert(A.editor.getLang("popup_blocked"))
}},close:function(g){g.close();this.onClose.dispatch(this)},createInstance:function(k,h,g,o,n,m){var l=e.resolve(k);return new l(h,g,o,n,m)},confirm:function(k,g,l,h){h=h||window;g.call(l||this,h.confirm(this._decode(this.editor.getLang(k,k))))},alert:function(k,g,m,h){var l=this;h=h||window;h.alert(l._decode(l.editor.getLang(k,k)));if(g){g.call(m||l)}},resizeBy:function(g,h,k){k.resizeBy(g,h)},_decode:function(g){return e.DOM.decode(g).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(af){var V={},Y=a.each,d=af.dom,u=af.selection,z=a.dom.TreeWalker,S=new a.dom.RangeUtils(d),e=af.schema.isValidChild,F=a.isArray,M=d.isBlock,p=af.settings.forced_root_block,v=d.nodeIndex,L="\uFEFF",f=/^(src|href|style)$/,ac=false,H=true,U,I,C=d.getContentEditable;function N(ag){return !!af.schema.getTextBlocks()[ag.toLowerCase()]}function q(ah,ag){return d.getParents(ah,ag,d.getRoot())}function b(ag){return ag.nodeType===1&&ag.id==="_mce_caret"}function m(){o({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(ag){return true
},onformat:function(ai,ag,ah){Y(ah,function(ak,aj){d.setAttrib(ai,aj,ak)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});Y("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(ag){o(ag,{block:ag,remove:"all"})});o(af.settings.formats)}function ab(){af.addShortcut("ctrl+b","bold_desc","Bold");af.addShortcut("ctrl+i","italic_desc","Italic");af.addShortcut("ctrl+u","underline_desc","Underline");for(var ag=1;ag<=6;ag++){af.addShortcut("ctrl+"+ag,"",["FormatBlock",false,"h"+ag])}af.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);af.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);af.addShortcut("ctrl+9","",["FormatBlock",false,"address"])}function aa(ag){return ag?V[ag]:V}function o(ag,ah){if(ag){if(typeof(ag)!=="string"){Y(ag,function(aj,ai){o(ai,aj)
})}else{ah=ah.length?ah:[ah];Y(ah,function(ai){if(ai.deep===I){ai.deep=!ai.selector}if(ai.split===I){ai.split=!ai.selector||ai.inline}if(ai.remove===I&&ai.selector&&!ai.inline){ai.remove="none"}if(ai.selector&&ai.inline){ai.mixed=true;ai.block_expand=true}if(typeof(ai.classes)==="string"){ai.classes=ai.classes.split(/\s+/)}});V[ag]=ah}}}var l=function(ah){var ag;af.dom.getParent(ah,function(ai){ag=af.dom.getStyle(ai,"text-decoration");return ag&&ag!=="none"});return ag};var Q=function(ag){var ah;if(ag.nodeType===1&&ag.parentNode&&ag.parentNode.nodeType===1){ah=l(ag.parentNode);if(af.dom.getStyle(ag,"color")&&ah){af.dom.setStyle(ag,"text-decoration",ah)}else{if(af.dom.getStyle(ag,"textdecoration")===ah){af.dom.setStyle(ag,"text-decoration",null)}}}};function ad(aj,aq,al){var am=aa(aj),ar=am[0],ap,ah,ao,an=u.isCollapsed();function ag(aw,av){av=av||ar;if(aw){if(av.onformat){av.onformat(aw,av,aq,al)}Y(av.styles,function(ay,ax){d.setStyle(aw,ax,t(ay,aq))});Y(av.attributes,function(ay,ax){d.setAttrib(aw,ax,t(ay,aq))
});Y(av.classes,function(ax){ax=t(ax,aq);if(!d.hasClass(aw,ax)){d.addClass(aw,ax)}})}}function ak(){function ax(aD,aB){var aC=new z(aB);for(al=aC.current();al;al=aC.prev()){if(al.childNodes.length>1||al==aD||al.tagName=="BR"){return al}}}var aw=af.selection.getRng();var aA=aw.startContainer;var av=aw.endContainer;if(aA!=av&&aw.endOffset===0){var az=ax(aA,av);var ay=az.nodeType==3?az.length:az.childNodes.length;aw.setEnd(az,ay)}return aw}function ai(ay,aD,aB,aA,aw){var av=[],ax=-1,aC,aF=-1,az=-1,aE;Y(ay.childNodes,function(aH,aG){if(aH.nodeName==="UL"||aH.nodeName==="OL"){ax=aG;aC=aH;return false}});Y(ay.childNodes,function(aH,aG){if(aH.nodeName==="SPAN"&&d.getAttrib(aH,"data-mce-type")=="bookmark"){if(aH.id==aD.id+"_start"){aF=aG}else{if(aH.id==aD.id+"_end"){az=aG}}}});if(ax<=0||(aF<ax&&az>ax)){Y(a.grep(ay.childNodes),aw);return 0}else{aE=d.clone(aB,ac);Y(a.grep(ay.childNodes),function(aH,aG){if((aF<ax&&aG<ax)||(aF>ax&&aG>ax)){av.push(aH);aH.parentNode.removeChild(aH)}});if(aF<ax){ay.insertBefore(aE,aC)
}else{if(aF>ax){ay.insertBefore(aE,aC.nextSibling)}}aA.push(aE);Y(av,function(aG){aE.appendChild(aG)});return aE}}function at(aw,ay,aB){var av=[],aA,ax,az=true;aA=ar.inline||ar.block;ax=d.create(aA);ag(ax);S.walk(aw,function(aC){var aD;function aE(aF){var aK,aI,aG,aH,aJ;aJ=az;aK=aF.nodeName.toLowerCase();aI=aF.parentNode.nodeName.toLowerCase();if(aF.nodeType===1&&C(aF)){aJ=az;az=C(aF)==="true";aH=true}if(h(aK,"br")){aD=0;if(ar.block){d.remove(aF)}return}if(ar.wrapper&&D(aF,aj,aq)){aD=0;return}if(az&&!aH&&ar.block&&!ar.wrapper&&N(aK)){aF=d.rename(aF,aA);ag(aF);av.push(aF);aD=0;return}if(ar.selector){Y(am,function(aL){if("collapsed" in aL&&aL.collapsed!==an){return}if(d.is(aF,aL.selector)&&!b(aF)){ag(aF,aL);aG=true}});if(!ar.inline||aG){aD=0;return}}if(az&&!aH&&e(aA,aK)&&e(aI,aA)&&!(!aB&&aF.nodeType===3&&aF.nodeValue.length===1&&aF.nodeValue.charCodeAt(0)===65279)&&!b(aF)){if(!aD){aD=d.clone(ax,ac);aF.parentNode.insertBefore(aD,aF);av.push(aD)}aD.appendChild(aF)}else{if(aK=="li"&&ay){aD=ai(aF,ay,ax,av,aE)
}else{aD=0;Y(a.grep(aF.childNodes),aE);if(aH){az=aJ}aD=0}}}Y(aC,aE)});if(ar.wrap_links===false){Y(av,function(aC){function aD(aH){var aG,aF,aE;if(aH.nodeName==="A"){aF=d.clone(ax,ac);av.push(aF);aE=a.grep(aH.childNodes);for(aG=0;aG<aE.length;aG++){aF.appendChild(aE[aG])}aH.appendChild(aF)}Y(a.grep(aH.childNodes),aD)}aD(aC)})}Y(av,function(aE){var aC;function aF(aH){var aG=0;Y(aH.childNodes,function(aI){if(!g(aI)&&!P(aI)){aG++}});return aG}function aD(aG){var aI,aH;Y(aG.childNodes,function(aJ){if(aJ.nodeType==1&&!P(aJ)&&!b(aJ)){aI=aJ;return ac}});if(aI&&k(aI,ar)){aH=d.clone(aI,ac);ag(aH);d.replace(aH,aG,H);d.remove(aI,1)}return aH||aG}aC=aF(aE);if((av.length>1||!M(aE))&&aC===0){d.remove(aE,1);return}if(ar.inline||ar.wrapper){if(!ar.exact&&aC===1){aE=aD(aE)}Y(am,function(aG){Y(d.select(aG.inline,aE),function(aI){var aH;if(aG.wrap_links===false){aH=aI.parentNode;do{if(aH.nodeName==="A"){return}}while(aH=aH.parentNode)}if(!P(aI)){ae(aG,aq,aI,aG.exact?aI:null)}})});if(D(aE.parentNode,aj,aq)){d.remove(aE,1);
aE=0;return H}if(ar.merge_with_parents){d.getParent(aE.parentNode,function(aG){if(D(aG,aj,aq)){d.remove(aE,1);aE=0;return H}})}if(aE&&ar.merge_siblings!==false){aE=A(J(aE),aE);aE=A(aE,J(aE,H))}}})}if(ar){if(al){if(al.nodeType){ah=d.createRng();ah.setStartBefore(al);ah.setEndAfter(al);at(s(ah,am),null,true)}else{at(al,null,true)}}else{if(!an||!ar.inline||d.select("td.mceSelected,th.mceSelected").length){var au=af.selection.getNode();if(!p&&am[0].defaultBlock&&!d.getParent(au,d.isBlock)){ad(am[0].defaultBlock)}af.selection.setRng(ak());ap=u.getBookmark();at(s(u.getRng(H),am),ap);if(ar.styles&&(ar.styles.color||ar.styles.textDecoration)){a.walk(au,Q,"childNodes");Q(au)}u.moveToBookmark(ap);W(u.getRng(H));af.nodeChanged()}else{Z("apply",aj,aq)}}}}function G(ai,ar,ak){var al=aa(ai),au=al[0],ap,ao,ah,aq=true;function aj(aA){var az,ay,ax,aw,aC,aB;if(aA.nodeType===3){return}if(aA.nodeType===1&&C(aA)){aC=aq;aq=C(aA)==="true";aB=true}az=a.grep(aA.childNodes);if(aq&&!aB){for(ay=0,ax=al.length;ay<ax;
ay++){if(ae(al[ay],ar,aA,aA)){break}}}if(au.deep){if(az.length){for(ay=0,ax=az.length;ay<ax;ay++){aj(az[ay])}if(aB){aq=aC}}}}function am(aw){var ax;Y(q(aw.parentNode).reverse(),function(ay){var az;if(!ax&&ay.id!="_start"&&ay.id!="_end"){az=D(ay,ai,ar);if(az&&az.split!==false){ax=ay}}});return ax}function ag(az,aw,aB,aE){var aF,aD,aC,ay,aA,ax;if(az){ax=az.parentNode;for(aF=aw.parentNode;aF&&aF!=ax;aF=aF.parentNode){aD=d.clone(aF,ac);for(aA=0;aA<al.length;aA++){if(ae(al[aA],ar,aD,aD)){aD=0;break}}if(aD){if(aC){aD.appendChild(aC)}if(!ay){ay=aD}aC=aD}}if(aE&&(!au.mixed||!M(az))){aw=d.split(az,aw)}if(aC){aB.parentNode.insertBefore(aC,aB);ay.appendChild(aB)}}return aw}function at(aw){return ag(am(aw),aw,aw,true)}function an(ay){var ax=d.get(ay?"_start":"_end"),aw=ax[ay?"firstChild":"lastChild"];if(P(aw)){aw=aw[ay?"firstChild":"lastChild"]}d.remove(ax,true);return aw}function av(aw){var ay,az,ax;aw=s(aw,al,H);if(au.split){ay=R(aw,H);az=R(aw);if(ay!=az){if(/^(TR|TD)$/.test(ay.nodeName)&&ay.firstChild){ay=(ay.nodeName=="TD"?ay.firstChild:ay.firstChild.firstChild)||ay
}ay=X(ay,"span",{id:"_start","data-mce-type":"bookmark"});az=X(az,"span",{id:"_end","data-mce-type":"bookmark"});at(ay);at(az);ay=an(H);az=an()}else{ay=az=at(ay)}aw.startContainer=ay.parentNode;aw.startOffset=v(ay);aw.endContainer=az.parentNode;aw.endOffset=v(az)+1}S.walk(aw,function(aA){Y(aA,function(aB){aj(aB);if(aB.nodeType===1&&af.dom.getStyle(aB,"text-decoration")==="underline"&&aB.parentNode&&l(aB.parentNode)==="underline"){ae({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,aB)}})})}if(ak){if(ak.nodeType){ah=d.createRng();ah.setStartBefore(ak);ah.setEndAfter(ak);av(ah)}else{av(ak)}return}if(!u.isCollapsed()||!au.inline||d.select("td.mceSelected,th.mceSelected").length){ap=u.getBookmark();av(u.getRng(H));u.moveToBookmark(ap);if(au.inline&&n(ai,ar,u.getStart())){W(u.getRng(true))}af.nodeChanged()}else{Z("remove",ai,ar)}}function K(ah,aj,ai){var ag=aa(ah);if(n(ah,aj,ai)&&(!("toggle" in ag[0])||ag[0].toggle)){G(ah,aj,ai)}else{ad(ah,aj,ai)}}function D(ah,ag,am,ak){var ai=aa(ag),an,al,aj;
function ao(at,av,aw){var ar,au,ap=av[aw],aq;if(av.onmatch){return av.onmatch(at,av,aw)}if(ap){if(ap.length===I){for(ar in ap){if(ap.hasOwnProperty(ar)){if(aw==="attributes"){au=d.getAttrib(at,ar)}else{au=T(at,ar)}if(ak&&!au&&!av.exact){return}if((!ak||av.exact)&&!h(au,t(ap[ar],am))){return}}}}else{for(aq=0;aq<ap.length;aq++){if(aw==="attributes"?d.getAttrib(at,ap[aq]):T(at,ap[aq])){return av}}}}return av}if(ai&&ah){for(al=0;al<ai.length;al++){an=ai[al];if(k(ah,an)&&ao(ah,an,"attributes")&&ao(ah,an,"styles")){if(aj=an.classes){for(al=0;al<aj.length;al++){if(!d.hasClass(ah,aj[al])){return}}}return an}}}}function n(ai,ak,aj){var ah;function ag(al){al=d.getParent(al,function(am){return !!D(am,ai,ak,true)});return D(al,ai,ak)}if(aj){return ag(aj)}aj=u.getNode();if(ag(aj)){return H}ah=u.getStart();if(ah!=aj){if(ag(ah)){return H}}return ac}function B(an,am){var ak,al=[],aj={},ai,ah,ag;ak=u.getStart();d.getParent(ak,function(aq){var ap,ao;for(ap=0;ap<an.length;ap++){ao=an[ap];if(!aj[ao]&&D(aq,ao,am)){aj[ao]=true;
al.push(ao)}}},d.getRoot());return al}function E(ak){var am=aa(ak),aj,ai,al,ah,ag;if(am){aj=u.getStart();ai=q(aj);for(ah=am.length-1;ah>=0;ah--){ag=am[ah].selector;if(!ag){return H}for(al=ai.length-1;al>=0;al--){if(d.is(ai[al],ag)){return H}}}}return ac}function O(ag,aj,ah){var ai;if(!U){U={};ai={};af.onNodeChange.addToTop(function(al,ak,an){var am=q(an),ao={};Y(U,function(ap,aq){Y(am,function(ar){if(D(ar,aq,{},ap.similar)){if(!ai[aq]){Y(ap,function(at){at(true,{node:ar,format:aq,parents:am})});ai[aq]=ap}ao[aq]=ap;return false}})});Y(ai,function(ap,aq){if(!ao[aq]){delete ai[aq];Y(ap,function(ar){ar(false,{node:an,format:aq,parents:am})})}})})}Y(ag.split(","),function(ak){if(!U[ak]){U[ak]=[];U[ak].similar=ah}U[ak].push(aj)});return this}a.extend(this,{get:aa,register:o,apply:ad,remove:G,toggle:K,match:n,matchAll:B,matchNode:D,canApply:E,formatChanged:O});m();ab();function k(ag,ah){if(h(ag,ah.inline)){return H}if(h(ag,ah.block)){return H}if(ah.selector){return d.is(ag,ah.selector)}}function h(ah,ag){ah=ah||"";
ag=ag||"";ah=""+(ah.nodeName||ah);ag=""+(ag.nodeName||ag);return ah.toLowerCase()==ag.toLowerCase()}function T(ah,ag){var ai=d.getStyle(ah,ag);if(ag=="color"||ag=="backgroundColor"){ai=d.toHex(ai)}if(ag=="fontWeight"&&ai==700){ai="bold"}return""+ai}function t(ag,ah){if(typeof(ag)!="string"){ag=ag(ah)}else{if(ah){ag=ag.replace(/%(\w+)/g,function(aj,ai){return ah[ai]||aj})}}return ag}function g(ag){return ag&&ag.nodeType===3&&/^([\t \r\n]+|)$/.test(ag.nodeValue)}function X(ai,ah,ag){var aj=d.create(ah,ag);ai.parentNode.insertBefore(aj,ai);aj.appendChild(ai);return aj}function s(ag,ar,aj){var av,at,am,aq,ai=ag.startContainer,an=ag.startOffset,ax=ag.endContainer,ap=ag.endOffset;function au(aF){var az,aC,aE,aB,aA,ay;az=aC=aF?ai:ax;aA=aF?"previousSibling":"nextSibling";ay=d.getRoot();function aD(aG){return aG.nodeName=="BR"&&aG.getAttribute("data-mce-bogus")&&!aG.nextSibling}if(az.nodeType==3&&!g(az)){if(aF?an>0:ap<az.nodeValue.length){return az}}for(;;){if(!ar[0].block_expand&&M(aC)){return aC
}for(aB=aC[aA];aB;aB=aB[aA]){if(!P(aB)&&!g(aB)&&!aD(aB)){return aC}}if(aC.parentNode==ay){az=aC;break}aC=aC.parentNode}return az}function al(ay,az){if(az===I){az=ay.nodeType===3?ay.length:ay.childNodes.length}while(ay&&ay.hasChildNodes()){ay=ay.childNodes[az];if(ay){az=ay.nodeType===3?ay.length:ay.childNodes.length}}return{node:ay,offset:az}}if(ai.nodeType==1&&ai.hasChildNodes()){at=ai.childNodes.length-1;ai=ai.childNodes[an>at?at:an];if(ai.nodeType==3){an=0}}if(ax.nodeType==1&&ax.hasChildNodes()){at=ax.childNodes.length-1;ax=ax.childNodes[ap>at?at:ap-1];if(ax.nodeType==3){ap=ax.nodeValue.length}}function aw(az){var ay=az;while(ay){if(ay.nodeType===1&&C(ay)){return C(ay)==="false"?ay:az}ay=ay.parentNode}return az}function ao(az,aD,aF){var aC,aA,aE,ay;function aB(aH,aJ){var aK,aG,aI=aH.nodeValue;if(typeof(aJ)=="undefined"){aJ=aF?aI.length:0}if(aF){aK=aI.lastIndexOf(" ",aJ);aG=aI.lastIndexOf("\u00a0",aJ);aK=aK>aG?aK:aG;if(aK!==-1&&!aj){aK++}}else{aK=aI.indexOf(" ",aJ);aG=aI.indexOf("\u00a0",aJ);
aK=aK!==-1&&(aG===-1||aK<aG)?aK:aG}return aK}if(az.nodeType===3){aE=aB(az,aD);if(aE!==-1){return{container:az,offset:aE}}ay=az}aC=new z(az,d.getParent(az,M)||af.getBody());while(aA=aC[aF?"prev":"next"]()){if(aA.nodeType===3){ay=aA;aE=aB(aA);if(aE!==-1){return{container:aA,offset:aE}}}else{if(M(aA)){break}}}if(ay){if(aF){aD=0}else{aD=ay.length}return{container:ay,offset:aD}}}function ak(az,ay){var aA,aB,aD,aC;if(az.nodeType==3&&az.nodeValue.length===0&&az[ay]){az=az[ay]}aA=q(az);for(aB=0;aB<aA.length;aB++){for(aD=0;aD<ar.length;aD++){aC=ar[aD];if("collapsed" in aC&&aC.collapsed!==ag.collapsed){continue}if(d.is(aA[aB],aC.selector)){return aA[aB]}}}return az}function ah(az,ay,aB){var aA;if(!ar[0].wrapper){aA=d.getParent(az,ar[0].block)}if(!aA){aA=d.getParent(az.nodeType==3?az.parentNode:az,N)}if(aA&&ar[0].wrapper){aA=q(aA,"ul,ol").reverse()[0]||aA}if(!aA){aA=az;while(aA[ay]&&!M(aA[ay])){aA=aA[ay];if(h(aA,"br")){break}}}return aA||az}ai=aw(ai);ax=aw(ax);if(P(ai.parentNode)||P(ai)){ai=P(ai)?ai:ai.parentNode;
ai=ai.nextSibling||ai;if(ai.nodeType==3){an=0}}if(P(ax.parentNode)||P(ax)){ax=P(ax)?ax:ax.parentNode;ax=ax.previousSibling||ax;if(ax.nodeType==3){ap=ax.length}}if(ar[0].inline){if(ag.collapsed){aq=ao(ai,an,true);if(aq){ai=aq.container;an=aq.offset}aq=ao(ax,ap);if(aq){ax=aq.container;ap=aq.offset}}am=al(ax,ap);if(am.node){while(am.node&&am.offset===0&&am.node.previousSibling){am=al(am.node.previousSibling)}if(am.node&&am.offset>0&&am.node.nodeType===3&&am.node.nodeValue.charAt(am.offset-1)===" "){if(am.offset>1){ax=am.node;ax.splitText(am.offset-1)}}}}if(ar[0].inline||ar[0].block_expand){if(!ar[0].inline||(ai.nodeType!=3||an===0)){ai=au(true)}if(!ar[0].inline||(ax.nodeType!=3||ap===ax.nodeValue.length)){ax=au()}}if(ar[0].selector&&ar[0].expand!==ac&&!ar[0].inline){ai=ak(ai,"previousSibling");ax=ak(ax,"nextSibling")}if(ar[0].block||ar[0].selector){ai=ah(ai,"previousSibling");ax=ah(ax,"nextSibling");if(ar[0].block){if(!M(ai)){ai=au(true)}if(!M(ax)){ax=au()}}}if(ai.nodeType==1){an=v(ai);ai=ai.parentNode
}if(ax.nodeType==1){ap=v(ax)+1;ax=ax.parentNode}return{startContainer:ai,startOffset:an,endContainer:ax,endOffset:ap}}function ae(am,al,aj,ag){var ai,ah,ak;if(!k(aj,am)){return ac}if(am.remove!="all"){Y(am.styles,function(ao,an){ao=t(ao,al);if(typeof(an)==="number"){an=ao;ag=0}if(!ag||h(T(ag,an),ao)){d.setStyle(aj,an,"")}ak=1});if(ak&&d.getAttrib(aj,"style")==""){aj.removeAttribute("style");aj.removeAttribute("data-mce-style")}Y(am.attributes,function(ap,an){var ao;ap=t(ap,al);if(typeof(an)==="number"){an=ap;ag=0}if(!ag||h(d.getAttrib(ag,an),ap)){if(an=="class"){ap=d.getAttrib(aj,an);if(ap){ao="";Y(ap.split(/\s+/),function(aq){if(/mce\w+/.test(aq)){ao+=(ao?" ":"")+aq}});if(ao){d.setAttrib(aj,an,ao);return}}}if(an=="class"){aj.removeAttribute("className")}if(f.test(an)){aj.removeAttribute("data-mce-"+an)}aj.removeAttribute(an)}});Y(am.classes,function(an){an=t(an,al);if(!ag||d.hasClass(ag,an)){d.removeClass(aj,an)}});ah=d.getAttribs(aj);for(ai=0;ai<ah.length;ai++){if(ah[ai].nodeName.indexOf("_")!==0){return ac
}}}if(am.remove!="none"){r(aj,am);return H}}function r(ai,aj){var ag=ai.parentNode,ah;function ak(am,al,an){am=J(am,al,an);return !am||(am.nodeName=="BR"||M(am))}if(aj.block){if(!p){if(M(ai)&&!M(ag)){if(!ak(ai,ac)&&!ak(ai.firstChild,H,1)){ai.insertBefore(d.create("br"),ai.firstChild)}if(!ak(ai,H)&&!ak(ai.lastChild,ac,1)){ai.appendChild(d.create("br"))}}}else{if(ag==d.getRoot()){if(!aj.list_block||!h(ai,aj.list_block)){Y(a.grep(ai.childNodes),function(al){if(e(p,al.nodeName.toLowerCase())){if(!ah){ah=X(al,p)}else{ah.appendChild(al)}}else{ah=0}})}}}}if(aj.selector&&aj.inline&&!h(aj.inline,ai)){return}d.remove(ai,1)}function J(ah,ag,ai){if(ah){ag=ag?"nextSibling":"previousSibling";for(ah=ai?ah:ah[ag];ah;ah=ah[ag]){if(ah.nodeType==1||!g(ah)){return ah}}}}function P(ag){return ag&&ag.nodeType==1&&ag.getAttribute("data-mce-type")=="bookmark"}function A(ak,aj){var ag,ai,ah;function am(ap,ao){if(ap.nodeName!=ao.nodeName){return ac}function an(ar){var at={};Y(d.getAttribs(ar),function(au){var av=au.nodeName.toLowerCase();
if(av.indexOf("_")!==0&&av!=="style"){at[av]=d.getAttrib(ar,av)}});return at}function aq(av,au){var at,ar;for(ar in av){if(av.hasOwnProperty(ar)){at=au[ar];if(at===I){return ac}if(av[ar]!=at){return ac}delete au[ar]}}for(ar in au){if(au.hasOwnProperty(ar)){return ac}}return H}if(!aq(an(ap),an(ao))){return ac}if(!aq(d.parseStyle(d.getAttrib(ap,"style")),d.parseStyle(d.getAttrib(ao,"style")))){return ac}return H}function al(ao,an){for(ai=ao;ai;ai=ai[an]){if(ai.nodeType==3&&ai.nodeValue.length!==0){return ao}if(ai.nodeType==1&&!P(ai)){return ai}}return ao}if(ak&&aj){ak=al(ak,"previousSibling");aj=al(aj,"nextSibling");if(am(ak,aj)){for(ai=ak.nextSibling;ai&&ai!=aj;){ah=ai;ai=ai.nextSibling;ak.appendChild(ah)}d.remove(aj);Y(a.grep(aj.childNodes),function(an){ak.appendChild(an)});return ak}}return aj}function N(ag){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(ag)}function R(ah,al){var ag,ak,ai,aj;ag=ah[al?"startContainer":"endContainer"];ak=ah[al?"startOffset":"endOffset"];if(ag.nodeType==1){ai=ag.childNodes.length-1;
if(!al&&ak){ak--}ag=ag.childNodes[ak>ai?ai:ak]}if(ag.nodeType===3&&al&&ak>=ag.nodeValue.length){ag=new z(ag,af.getBody()).next()||ag}if(ag.nodeType===3&&!al&&ak===0){ag=new z(ag,af.getBody()).prev()||ag}return ag}function Z(ap,ag,an){var aq="_mce_caret",ah=af.settings.caret_debug;function ai(av){var au=d.create("span",{id:aq,"data-mce-bogus":true,style:ah?"color:red":""});if(av){au.appendChild(af.getDoc().createTextNode(L))}return au}function ao(av,au){while(av){if((av.nodeType===3&&av.nodeValue!==L)||av.childNodes.length>1){return false}if(au&&av.nodeType===1){au.push(av)}av=av.firstChild}return true}function al(au){while(au){if(au.id===aq){return au}au=au.parentNode}}function ak(au){var av;if(au){av=new z(au,au);for(au=av.current();au;au=av.next()){if(au.nodeType===3){return au}}}}function aj(aw,av){var ax,au;if(!aw){aw=al(u.getStart());if(!aw){while(aw=d.get(aq)){aj(aw,false)}}}else{au=u.getRng(true);if(ao(aw)){if(av!==false){au.setStartBefore(aw);au.setEndBefore(aw)}d.remove(aw)}else{ax=ak(aw);
if(ax.nodeValue.charAt(0)===L){ax=ax.deleteData(0,1)}d.remove(aw,1)}u.setRng(au)}}function am(){var aw,au,aA,az,ax,av,ay;aw=u.getRng(true);az=aw.startOffset;av=aw.startContainer;ay=av.nodeValue;au=al(u.getStart());if(au){aA=ak(au)}if(ay&&az>0&&az<ay.length&&/\w/.test(ay.charAt(az))&&/\w/.test(ay.charAt(az-1))){ax=u.getBookmark();aw.collapse(true);aw=s(aw,aa(ag));aw=S.split(aw);ad(ag,an,aw);u.moveToBookmark(ax)}else{if(!au||aA.nodeValue!==L){au=ai(true);aA=au.firstChild;aw.insertNode(au);az=1;ad(ag,an,au)}else{ad(ag,an,au)}u.setCursorLocation(aA,az)}}function ar(){var au=u.getRng(true),av,ax,aA,az,aw,aD,aC=[],ay,aB;av=au.startContainer;ax=au.startOffset;aw=av;if(av.nodeType==3){if(ax!=av.nodeValue.length||av.nodeValue===L){az=true}aw=aw.parentNode}while(aw){if(D(aw,ag,an)){aD=aw;break}if(aw.nextSibling){az=true}aC.push(aw);aw=aw.parentNode}if(!aD){return}if(az){aA=u.getBookmark();au.collapse(true);au=s(au,aa(ag),true);au=S.split(au);G(ag,an,au);u.moveToBookmark(aA)}else{aB=ai();aw=aB;for(ay=aC.length-1;
ay>=0;ay--){aw.appendChild(d.clone(aC[ay],false));aw=aw.firstChild}aw.appendChild(d.doc.createTextNode(L));aw=aw.firstChild;d.insertAfter(aB,aD);u.setCursorLocation(aw,1)}}function at(){var av,au,aw;au=al(u.getStart());if(au&&!d.isEmpty(au)){a.walk(au,function(ax){if(ax.nodeType==1&&ax.id!==aq&&!d.isEmpty(ax)){d.setAttrib(ax,"data-mce-bogus",null)}},"childNodes")}}if(!self._hasCaretEvents){af.onBeforeGetContent.addToTop(function(){var au=[],av;if(ao(al(u.getStart()),au)){av=au.length;while(av--){d.setAttrib(au[av],"data-mce-bogus","1")}}});a.each("onMouseUp onKeyUp".split(" "),function(au){af[au].addToTop(function(){aj();at()})});af.onKeyDown.addToTop(function(au,aw){var av=aw.keyCode;if(av==8||av==37||av==39){aj(al(u.getStart()))}at()});u.onSetContent.add(at);self._hasCaretEvents=true}if(ap=="apply"){am()}else{ar()}}function W(ah){var ag=ah.startContainer,an=ah.startOffset,aj,am,al,ai,ak;if(ag.nodeType==3&&an>=ag.nodeValue.length){an=v(ag);ag=ag.parentNode;aj=true}if(ag.nodeType==1){ai=ag.childNodes;
ag=ai[Math.min(an,ai.length-1)];am=new z(ag,d.getParent(ag,d.isBlock));if(an>ai.length-1||aj){am.next()}for(al=am.current();al;al=am.next()){if(al.nodeType==3&&!g(al)){ak=d.create("a",null,L);al.parentNode.insertBefore(ak,al);ah.setStart(al,0);u.setRng(ah);d.remove(ak);return}}}}}})(tinymce);tinymce.onAddEditor.add(function(f,a){var e,k,h,d=a.settings;function b(m,l){f.each(l,function(o,n){if(o){h.setStyle(m,n,o)}});h.rename(m,"span")}function g(l,m){h=l.dom;if(d.convert_fonts_to_spans){f.each(h.select("font,u,strike",m.node),function(n){e[n.nodeName.toLowerCase()](a.dom,n)})}}if(d.inline_styles){k=f.explode(d.font_size_legacy_values);e={font:function(m,l){b(l,{backgroundColor:l.style.backgroundColor,color:l.color,fontFamily:l.face,fontSize:k[parseInt(l.size,10)-1]})},u:function(m,l){b(l,{textDecoration:"underline"})},strike:function(m,l){b(l,{textDecoration:"line-through"})}};a.onPreProcess.add(g);a.onSetContent.add(g);a.onInit.add(function(){a.selection.onSetContent.add(g)})}});(function(b){var a=b.dom.TreeWalker;
b.EnterKey=function(g){var l=g.dom,f=g.selection,e=g.settings,k=g.undoManager,d=g.schema.getNonEmptyElements();function h(F){var B=f.getRng(true),L,m,E,A,s,R,G,r,n,q,z,O,C,H;function J(S){return S&&l.isBlock(S)&&!/^(TD|TH|CAPTION|FORM)$/.test(S.nodeName)&&!/^(fixed|absolute)/i.test(S.style.position)&&l.getContentEditable(S)!=="true"}function K(T){var S;if(b.isIE&&l.isBlock(T)){S=f.getRng();T.appendChild(l.create("span",null,"\u00a0"));f.select(T);T.lastChild.outerHTML="";f.setRng(S)}}function D(U){var T=U,V=[],S;while(T=T.firstChild){if(l.isBlock(T)){return}if(T.nodeType==1&&!d[T.nodeName.toLowerCase()]){V.push(T)}}S=V.length;while(S--){T=V[S];if(!T.hasChildNodes()||(T.firstChild==T.lastChild&&T.firstChild.nodeValue==="")){l.remove(T)}else{if(T.nodeName=="A"&&(T.innerText||T.textContent)===" "){l.remove(T)}}}}function p(T){var Y,W,S,Z,X,V=T,U;S=l.createRng();if(T.hasChildNodes()){Y=new a(T,T);while(W=Y.current()){if(W.nodeType==3){S.setStart(W,0);S.setEnd(W,0);break}if(d[W.nodeName.toLowerCase()]){S.setStartBefore(W);
S.setEndBefore(W);break}V=W;W=Y.next()}if(!W){S.setStart(V,0);S.setEnd(V,0)}}else{if(T.nodeName=="BR"){if(T.nextSibling&&l.isBlock(T.nextSibling)){if(!R||R<9){U=l.create("br");T.parentNode.insertBefore(U,T)}S.setStartBefore(T);S.setEndBefore(T)}else{S.setStartAfter(T);S.setEndAfter(T)}}else{S.setStart(T,0);S.setEnd(T,0)}}f.setRng(S);l.remove(U);X=l.getViewPort(g.getWin());Z=l.getPos(T).y;if(Z<X.y||Z+25>X.y+X.h){g.getWin().scrollTo(0,Z<X.y?Z:Z-X.h+25)}}function u(T){var U=E,W,V,S;W=T||z=="TABLE"?l.create(T||C):s.cloneNode(false);S=W;if(e.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(U.nodeName)){if(U.id=="_mce_caret"){continue}V=U.cloneNode(false);l.setAttrib(V,"id","");if(W.hasChildNodes()){V.appendChild(W.firstChild);W.appendChild(V)}else{S=V;W.appendChild(V)}}}while(U=U.parentNode)}if(!b.isIE){S.innerHTML='<br data-mce-bogus="1">'}return W}function t(V){var U,T,S;if(E.nodeType==3&&(V?A>0:A<E.nodeValue.length)){return false}if(E.parentNode==s&&H&&!V){return true
}if(V&&E.nodeType==1&&E==s.firstChild){return true}if(E.nodeName==="TABLE"||(E.previousSibling&&E.previousSibling.nodeName=="TABLE")){return(H&&!V)||(!H&&V)}U=new a(E,s);if(E.nodeType==3){if(V&&A==0){U.prev()}else{if(!V&&A==E.nodeValue.length){U.next()}}}while(T=U.current()){if(T.nodeType===1){if(!T.getAttribute("data-mce-bogus")){S=T.nodeName.toLowerCase();if(d[S]&&S!=="br"){return false}}}else{if(T.nodeType===3&&!/^[ \t\r\n]*$/.test(T.nodeValue)){return false}}if(V){U.prev()}else{U.next()}}return true}function o(S,Y){var Z,X,U,W,V,T=C||"P";X=l.getParent(S,l.isBlock);if(!X||!J(X)){X=X||m;if(!X.hasChildNodes()){Z=l.create(T);X.appendChild(Z);B.setStart(Z,0);B.setEnd(Z,0);return Z}W=S;while(W.parentNode!=X){W=W.parentNode}while(W&&!l.isBlock(W)){U=W;W=W.previousSibling}if(U){Z=l.create(T);U.parentNode.insertBefore(Z,U);W=U;while(W&&!l.isBlock(W)){V=W.nextSibling;Z.appendChild(W);W=V}B.setStart(S,Y);B.setEnd(S,Y)}}return S}function M(){function S(U){var T=q[U?"firstChild":"lastChild"];while(T){if(T.nodeType==1){break
}T=T[U?"nextSibling":"previousSibling"]}return T===s}r=C?u(C):l.create("BR");if(S(true)&&S()){l.replace(r,q)}else{if(S(true)){q.parentNode.insertBefore(r,q)}else{if(S()){l.insertAfter(r,q);K(r)}else{L=B.cloneRange();L.setStartAfter(s);L.setEndAfter(q);n=L.extractContents();l.insertAfter(n,q);l.insertAfter(r,q)}}}l.remove(s);p(r);k.add()}function I(){var T=new a(E,s),S;while(S=T.current()){if(S.nodeName=="BR"){return true}S=T.next()}}function Q(){var U,T,S;if(E&&E.nodeType==3&&A>=E.nodeValue.length){if(!b.isIE&&!I()){U=l.create("br");B.insertNode(U);B.setStartAfter(U);B.setEndAfter(U);T=true}}U=l.create("br");B.insertNode(U);if(b.isIE&&z=="PRE"&&(!R||R<8)){U.parentNode.insertBefore(l.doc.createTextNode("\r"),U)}S=l.create("span",{},"&nbsp;");U.parentNode.insertBefore(S,U);f.scrollIntoView(S);l.remove(S);if(!T){B.setStartAfter(U);B.setEndAfter(U)}else{B.setStartBefore(U);B.setEndBefore(U)}f.setRng(B);k.add()}function v(S){do{if(S.nodeType===3){S.nodeValue=S.nodeValue.replace(/^[\r\n]+/,"")
}S=S.firstChild}while(S)}function P(U){var S=l.getRoot(),T,V;T=U;while(T!==S&&l.getContentEditable(T)!=="false"){if(l.getContentEditable(T)==="true"){V=T}T=T.parentNode}return T!==S?V:S}function N(T){var S;if(!b.isIE){T.normalize();S=T.lastChild;if(!S||(/^(left|right)$/gi.test(l.getStyle(S,"float",true)))){l.add(T,"br")}}}if(!B.collapsed){g.execCommand("Delete");return}if(F.isDefaultPrevented()){return}E=B.startContainer;A=B.startOffset;C=(e.force_p_newlines?"p":"")||e.forced_root_block;C=C?C.toUpperCase():"";R=l.doc.documentMode;G=F.shiftKey;if(E.nodeType==1&&E.hasChildNodes()){H=A>E.childNodes.length-1;E=E.childNodes[Math.min(A,E.childNodes.length-1)]||E;if(H&&E.nodeType==3){A=E.nodeValue.length}else{A=0}}m=P(E);if(!m){return}k.beforeChange();if(!l.isBlock(m)&&m!=l.getRoot()){if(!C||G){Q()}return}if((C&&!G)||(!C&&G)){E=o(E,A)}s=l.getParent(E,l.isBlock);q=s?l.getParent(s.parentNode,l.isBlock):null;z=s?s.nodeName.toUpperCase():"";O=q?q.nodeName.toUpperCase():"";if(O=="LI"&&!F.ctrlKey){s=q;
z=O}if(z=="LI"){if(!C&&G){Q();return}if(l.isEmpty(s)){if(/^(UL|OL|LI)$/.test(q.parentNode.nodeName)){return false}M();return}}if(z=="PRE"&&e.br_in_pre!==false){if(!G){Q();return}}else{if((!C&&!G&&z!="LI")||(C&&G)){Q();return}}C=C||"P";if(t()){if(/^(H[1-6]|PRE)$/.test(z)&&O!="HGROUP"){r=u(C)}else{r=u()}if(e.end_container_on_empty_block&&J(q)&&l.isEmpty(s)){r=l.split(q,s)}else{l.insertAfter(r,s)}p(r)}else{if(t(true)){r=s.parentNode.insertBefore(u(),s);K(r)}else{L=B.cloneRange();L.setEndAfter(s);n=L.extractContents();v(n);r=n.firstChild;l.insertAfter(n,s);D(r);N(s);p(r)}}l.setAttrib(r,"id","");k.add()}g.onKeyDown.add(function(n,m){if(m.keyCode==13){if(h(m)!==false){m.preventDefault()}}})}})(tinymce);tinyMCE.addI18n({en:{common:{edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",apply:"Apply",insert:"Insert",update:"Update",cancel:"Cancel",close:"Close",browse:"Browse",class_name:"Class",not_set:"--",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",invalid_data:"{#field} is invalid",invalid_data_number:"{#field} must be a number",invalid_data_min:"{#field} must be a number greater than {#min}",invalid_data_size:"{#field} must be a number or percentage",more_colors:"More colors"},colors:{"000000":"Black","993300":"Burnt orange","333300":"Dark olive","003300":"Dark green","003366":"Dark azure","000080":"Navy Blue","333399":"Indigo","333333":"Very dark gray","800000":"Maroon",FF6600:"Orange","808000":"Olive","008000":"Green","008080":"Teal","0000FF":"Blue","666699":"Grayish blue","808080":"Gray",FF0000:"Red",FF9900:"Amber","99CC00":"Yellow green","339966":"Sea green","33CCCC":"Turquoise","3366FF":"Royal blue","800080":"Purple","999999":"Medium gray",FF00FF:"Magenta",FFCC00:"Gold",FFFF00:"Yellow","00FF00":"Lime","00FFFF":"Aqua","00CCFF":"Sky blue","993366":"Brown",C0C0C0:"Silver",FF99CC:"Pink",FFCC99:"Peach",FFFF99:"Light yellow",CCFFCC:"Pale green",CCFFFF:"Pale cyan","99CCFF":"Light sky blue",CC99FF:"Plum",FFFFFF:"White"},contextmenu:{align:"Alignment",left:"Left",center:"Center",right:"Right",full:"Full"},insertdatetime:{date_fmt:"%Y-%m-%d",time_fmt:"%H:%M:%S",insertdate_desc:"Insert date",inserttime_desc:"Insert time",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun"},print:{print_desc:"Print"},preview:{preview_desc:"Preview"},directionality:{ltr_desc:"Direction left to right",rtl_desc:"Direction right to left"},layer:{insertlayer_desc:"Insert new layer",forward_desc:"Move forward",backward_desc:"Move backward",absolute_desc:"Toggle absolute positioning",content:"New layer..."},save:{save_desc:"Save",cancel_desc:"Cancel all changes"},nonbreaking:{nonbreaking_desc:"Insert non-breaking space character"},iespell:{iespell_desc:"Run spell checking",download:"ieSpell not detected. Do you want to install it now?"},advhr:{advhr_desc:"Horizontal rule"},emotions:{emotions_desc:"Emotions"},searchreplace:{search_desc:"Find",replace_desc:"Find/Replace"},advimage:{image_desc:"Edit image"},advlink:{link_desc:"Link"},xhtmlxtras:{cite_desc:"Citation",abbr_desc:"Abbreviation",acronym_desc:"Acronym",del_desc:"Deletion",ins_desc:"Insertion",attribs_desc:"Insert/Edit Attributes"},style:{desc:"Edit CSS Style"},paste:{paste_text_desc:"Paste as Plain Text",paste_word_desc:"Paste from Word",selectall_desc:"Select All",plaintext_mode_sticky:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode."},paste_dlg:{text_title:"Use CTRL+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep linebreaks",word_title:"Use CTRL+V on your keyboard to paste the text into the window."},table:{desc:"Table",row_before_desc:"Insert Row Before",row_after_desc:"Insert Row After",delete_row_desc:"Delete Row",col_before_desc:"Insert Column Before",col_after_desc:"Insert Column After",delete_col_desc:"Delete Column",split_cells_desc:"Split Cells",merge_cells_desc:"Merge Cells",row_desc:"Table row properties",cell_desc:"Table cell properties",props_desc:"Table properties",paste_row_before_desc:"Paste table row before",paste_row_after_desc:"Paste table row after",cut_row_desc:"Cut table row",copy_row_desc:"Copy table row",del:"Delete Table",row:"Row",col:"Column",cell:"Cell"},autosave:{unload_msg:"The changes you made will be lost if you navigate away from this page.",restore_content:"Restore auto-saved content.",warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?."},fullscreen:{desc:"Toggle fullscreen mode"},media:{desc:"Insert / edit embedded media",edit:"Edit embedded media"},fullpage:{desc:"Document properties"},template:{desc:"Insert predefined template content"},visualchars:{desc:"Visual control characters on/off."},spellchecker:{desc:"Spellcheck",menu:"Spellchecker settings",ignore_word:"Ignore word",ignore_words:"Ignore all",langs:"Languages",wait:"Please wait...",sug:"Suggestions",no_sug:"No suggestions",no_mpell:"No misspellings found.",learn_word:"Learn word"},pagebreak:{desc:"Insert page break."},advlist:{types:"Types",def:"Default",lower_alpha:"Lower alpha",lower_greek:"Lower greek",lower_roman:"Lower roman",upper_alpha:"Upper alpha",upper_roman:"Upper roman",circle:"Circle",disc:"Disc",square:"Square"},aria:{rich_text_area:"Rich Text Area"},wordcount:{words:"Words: "}}});
(function(k){var l=k.DOM,h=k.dom.Event,d=k.extend,g=k.each,a=k.util.Cookie,f,e=k.explode;function b(s,p){var n,o,r=s.dom,m="",q,u;previewStyles=s.settings.preview_styles;if(previewStyles===false){return""}if(!previewStyles){previewStyles="font-family font-size font-weight text-decoration text-transform color background-color"}function t(v){return v.replace(/%(\w+)/g,"")}n=p.block||p.inline||"span";o=r.create(n);g(p.styles,function(z,v){z=t(z);if(z){r.setStyle(o,v,z)}});g(p.attributes,function(z,v){z=t(z);if(z){r.setAttrib(o,v,z)}});g(p.classes,function(v){v=t(v);if(!r.hasClass(o,v)){r.addClass(o,v)}});r.setStyles(o,{position:"absolute",left:-65535});s.getBody().appendChild(o);q=r.getStyle(s.getBody(),"fontSize",true);q=/px$/.test(q)?parseInt(q,10):0;g(previewStyles.split(" "),function(v){var z=r.getStyle(o,v,true);if(v=="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(z)){z=r.getStyle(s.getBody(),v,true);if(r.toHex(z).toLowerCase()=="#ffffff"){return}}if(v=="font-size"){if(/em|%$/.test(z)){if(q===0){return
}z=parseFloat(z,10)/(/%$/.test(z)?100:1);z=(z*q)+"px"}}m+=v+":"+z+";"});r.remove(o);return m}k.ThemeManager.requireLangPack("advanced");k.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(n,p){var q=this,r,m,u;
q.editor=n;q.url=p;q.onResolveName=new k.util.Dispatcher(this);r=n.settings;n.forcedHighContrastMode=n.settings.detect_highcontrast&&q._isHighContrast();n.settings.skin=n.forcedHighContrastMode?"highcontrast":n.settings.skin;if(!r.theme_advanced_buttons1){r=d({theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap"},r)}q.settings=r=d({theme_advanced_path:true,theme_advanced_toolbar_location:"top",theme_advanced_blockformats:"p,h1,h2,h3,h4,pre,blockquote",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:n.settings.readonly},r);
if(!r.font_size_style_values){r.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(k.is(r.theme_advanced_font_sizes,"string")){r.font_size_style_values=k.explode(r.font_size_style_values);r.font_size_classes=k.explode(r.font_size_classes||"");u={};n.settings.theme_advanced_font_sizes=r.theme_advanced_font_sizes;g(n.getParam("theme_advanced_font_sizes","","hash"),function(t,s){var o;if(s==t&&t>=1&&t<=7){s=t+" ("+q.sizes[t-1]+"pt)";o=r.font_size_classes[t-1];t=r.font_size_style_values[t-1]||(q.sizes[t-1]+"pt")}if(/^\s*\./.test(t)){o=t.replace(/\./g,"")}u[s]=o?{"class":o}:{fontSize:t}});r.theme_advanced_font_sizes=u}if((m=r.theme_advanced_path_location)&&m!="none"){r.theme_advanced_statusbar_location=r.theme_advanced_path_location}if(r.theme_advanced_statusbar_location=="none"){r.theme_advanced_statusbar_location=0}if(n.settings.content_css!==false){n.contentCSS.push(n.baseURI.toAbsolute(p+"/skins/"+n.settings.skin+"/content.css"))}n.onInit.add(function(){if(!n.settings.readonly){n.onNodeChange.add(q._nodeChanged,q);
n.onKeyUp.add(q._updateUndoStatus,q);n.onMouseUp.add(q._updateUndoStatus,q);n.dom.bind(n.dom.getRoot(),"dragend",function(){q._updateUndoStatus(n)})}});n.onSetProgressState.add(function(t,o,v){var z,A=t.id,s;if(o){q.progressTimer=setTimeout(function(){z=t.getContainer();z=z.insertBefore(l.create("DIV",{style:"position:relative"}),z.firstChild);s=l.get(t.id+"_tbl");l.add(z,"div",{id:A+"_blocker","class":"mceBlocker",style:{width:s.clientWidth+2,height:s.clientHeight+2}});l.add(z,"div",{id:A+"_progress","class":"mceProgress",style:{left:s.clientWidth/2,top:s.clientHeight/2}})},v||0)}else{l.remove(A+"_blocker");l.remove(A+"_progress");clearTimeout(q.progressTimer)}});l.loadCSS(r.editor_css?n.documentBaseURI.toAbsolute(r.editor_css):p+"/skins/"+n.settings.skin+"/ui.css");if(r.skin_variant){l.loadCSS(p+"/skins/"+n.settings.skin+"/ui_"+r.skin_variant+".css")}},_isHighContrast:function(){var m,n=l.add(l.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});m=(l.getStyle(n,"background-color",true)+"").toLowerCase().replace(/ /g,"");
l.remove(n);return m!="rgb(171,239,86)"&&m!="#abef56"},createControl:function(q,m){var o,p;if(p=m.createControl(q)){return p}switch(q){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((o=this.controls[q])){return m.createButton(q,{title:"advanced."+o[0],cmd:o[1],ui:o[2],value:o[3]})}},execCommand:function(o,n,p){var m=this["_"+o];if(m){m.call(this,n,p);return true}return false},_importClasses:function(o){var m=this.editor,n=m.controlManager.get("styleselect");if(n.getLength()==0){g(m.dom.getClasses(),function(s,p){var r="style_"+p,q;q={inline:"span",attributes:{"class":s["class"]},selector:"*"};m.formatter.register(r,q);n.add(s["class"],r,{style:function(){return b(m,q)}})})}},_createStyleSelect:function(r){var p=this,m=p.editor,o=m.controlManager,q;
q=o.createListBox("styleselect",{title:"advanced.style_select",onselect:function(t){var u,n=[],s;g(q.items,function(v){n.push(v.value)});m.focus();m.undoManager.add();u=m.formatter.matchAll(n);k.each(u,function(v){if(!t||v==t){if(v){m.formatter.remove(v)}s=true}});if(!s){m.formatter.apply(t)}m.undoManager.add();m.nodeChanged();return false}});m.onPreInit.add(function(){var s=0,n=m.getParam("style_formats");if(n){g(n,function(t){var u,v=0;g(t,function(){v++});if(v>1){u=t.name=t.name||"style_"+(s++);m.formatter.register(u,t);q.add(t.title,u,{style:function(){return b(m,t)}})}else{q.add(t.title)}})}else{g(m.getParam("theme_advanced_styles","","hash"),function(z,v){var u,t;if(z){u="style_"+(s++);t={inline:"span",classes:z,selector:"*"};m.formatter.register(u,t);q.add(p.editor.translate(v),u,{style:function(){return b(m,t)}})}})}});if(q.getLength()==0){q.onPostRender.add(function(s,t){if(!q.NativeListBox){h.add(t.id+"_text","focus",p._importClasses,p);h.add(t.id+"_text","mousedown",p._importClasses,p);
h.add(t.id+"_open","focus",p._importClasses,p);h.add(t.id+"_open","mousedown",p._importClasses,p)}else{h.add(t.id,"focus",p._importClasses,p)}})}return q},_createFontSelect:function(){var o,n=this,m=n.editor;o=m.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(p){var q=o.items[o.selectedIndex];if(!p&&q){m.execCommand("FontName",false,q.value);return}m.execCommand("FontName",false,p);o.select(function(r){return p==r});if(q&&q.value==p){o.select(null)}return false}});if(o){g(m.getParam("theme_advanced_fonts",n.settings.theme_advanced_fonts,"hash"),function(q,p){o.add(m.translate(p),q,{style:q.indexOf("dings")==-1?"font-family:"+q:""})})}return o},_createFontSizeSelect:function(){var p=this,n=p.editor,q,o=0,m=[];q=n.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(r){var s=q.items[q.selectedIndex];if(!r&&s){s=s.value;if(s["class"]){n.formatter.toggle("fontsize_class",{value:s["class"]});n.undoManager.add();
n.nodeChanged()}else{n.execCommand("FontSize",false,s.fontSize)}return}if(r["class"]){n.focus();n.undoManager.add();n.formatter.toggle("fontsize_class",{value:r["class"]});n.undoManager.add();n.nodeChanged()}else{n.execCommand("FontSize",false,r.fontSize)}q.select(function(t){return r==t});if(s&&(s.value.fontSize==r.fontSize||s.value["class"]&&s.value["class"]==r["class"])){q.select(null)}return false}});if(q){g(p.settings.theme_advanced_font_sizes,function(s,r){var t=s.fontSize;if(t>=1&&t<=7){t=p.sizes[parseInt(t)-1]+"pt"}q.add(r,s,{style:"font-size:"+t,"class":"mceFontSize"+(o++)+(" "+(s["class"]||""))})})}return q},_createBlockFormats:function(){var o,m={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},n=this;o=n.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(p){n.editor.execCommand("FormatBlock",false,p);
return false}});if(o){g(n.editor.getParam("theme_advanced_blockformats",n.settings.theme_advanced_blockformats,"hash"),function(q,p){o.add(n.editor.translate(p!=q?p:m[q]),q,{"class":"mce_formatPreview mce_"+q,style:function(){return b(n.editor,{block:q})}})})}return o},_createForeColorMenu:function(){var r,n=this,p=n.settings,q={},m;if(p.theme_advanced_more_colors){q.more_colors_func=function(){n._mceColorPicker(0,{color:r.value,func:function(o){r.setColor(o)}})}}if(m=p.theme_advanced_text_colors){q.colors=m}if(p.theme_advanced_default_foreground_color){q.default_color=p.theme_advanced_default_foreground_color}q.title="advanced.forecolor_desc";q.cmd="ForeColor";q.scope=this;r=n.editor.controlManager.createColorSplitButton("forecolor",q);return r},_createBackColorMenu:function(){var r,n=this,p=n.settings,q={},m;if(p.theme_advanced_more_colors){q.more_colors_func=function(){n._mceColorPicker(0,{color:r.value,func:function(o){r.setColor(o)}})}}if(m=p.theme_advanced_background_colors){q.colors=m
}if(p.theme_advanced_default_background_color){q.default_color=p.theme_advanced_default_background_color}q.title="advanced.backcolor_desc";q.cmd="HiliteColor";q.scope=this;r=n.editor.controlManager.createColorSplitButton("backcolor",q);return r},renderUI:function(r){var v,u,z,C=this,A=C.editor,D=C.settings,B,q,m;if(A.settings){A.settings.aria_label=D.aria_label+A.getLang("advanced.help_shortcut")}v=q=l.create("span",{role:"application","aria-labelledby":A.id+"_voice",id:A.id+"_parent","class":"mceEditor "+A.settings.skin+"Skin"+(D.skin_variant?" "+A.settings.skin+"Skin"+C._ufirst(D.skin_variant):"")+(A.settings.directionality=="rtl"?" mceRtl":"")});l.add(v,"span",{"class":"mceVoiceLabel",style:"display:none;",id:A.id+"_voice"},D.aria_label);if(!l.boxModel){v=l.add(v,"div",{"class":"mceOldBoxModel"})}v=B=l.add(v,"table",{role:"presentation",id:A.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});v=z=l.add(v,"tbody");switch((D.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":u=C._rowLayout(D,z,r);
break;case"customlayout":u=A.execCallback("theme_advanced_custom_layout",D,z,r,q);break;default:u=C._simpleLayout(D,z,r,q)}v=r.targetNode;m=B.rows;l.addClass(m[0],"mceFirst");l.addClass(m[m.length-1],"mceLast");g(l.select("tr",z),function(o){l.addClass(o.firstChild,"mceFirst");l.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(l.get(D.theme_advanced_toolbar_container)){l.get(D.theme_advanced_toolbar_container).appendChild(q)}else{l.insertAfter(q,v)}h.add(A.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){C._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return false}});if(!A.getParam("accessibility_focus")){h.add(l.add(q,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(A.id).focus()})}if(D.theme_advanced_toolbar_location=="external"){r.deltaHeight=0}C.deltaHeight=r.deltaHeight;r.targetNode=null;A.onKeyDown.add(function(p,n){var s=121,o=122;if(n.altKey){if(n.keyCode===s){if(k.isWebKit){window.focus()}C.toolbarGroup.focus();return h.cancel(n)
}else{if(n.keyCode===o){l.get(p.id+"_path_row").focus();return h.cancel(n)}}}});A.addShortcut("alt+0","","mceShortcuts",C);return{iframeContainer:u,editorContainer:A.id+"_parent",sizeContainer:B,deltaHeight:r.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:k.majorVersion+"."+k.minorVersion}},resizeBy:function(m,n){var o=l.get(this.editor.id+"_ifr");this.resizeTo(o.clientWidth+m,o.clientHeight+n)},resizeTo:function(m,q,o){var n=this.editor,p=this.settings,r=l.get(n.id+"_tbl"),t=l.get(n.id+"_ifr");m=Math.max(p.theme_advanced_resizing_min_width||100,m);q=Math.max(p.theme_advanced_resizing_min_height||100,q);m=Math.min(p.theme_advanced_resizing_max_width||65535,m);q=Math.min(p.theme_advanced_resizing_max_height||65535,q);l.setStyle(r,"height","");l.setStyle(t,"height",q);if(p.theme_advanced_resize_horizontal){l.setStyle(r,"width","");l.setStyle(t,"width",m);if(m<r.clientWidth){m=r.clientWidth;l.setStyle(t,"width",r.clientWidth)
}}if(o&&p.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+n.id+"_size",{cw:m,ch:q})}},destroy:function(){var m=this.editor.id;h.clear(m+"_resize");h.clear(m+"_path_row");h.clear(m+"_external_close")},_simpleLayout:function(F,A,r,m){var E=this,B=E.editor,C=F.theme_advanced_toolbar_location,v=F.theme_advanced_statusbar_location,u,q,z,D;if(F.readonly){u=l.add(A,"tr");u=q=l.add(u,"td",{"class":"mceIframeContainer"});return q}if(C=="top"){E._addToolbars(A,r)}if(C=="external"){u=D=l.create("div",{style:"position:relative"});u=l.add(u,"div",{id:B.id+"_external","class":"mceExternalToolbar"});l.add(u,"a",{id:B.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});u=l.add(u,"table",{id:B.id+"_tblext",cellSpacing:0,cellPadding:0});z=l.add(u,"tbody");if(m.firstChild.className=="mceOldBoxModel"){m.firstChild.appendChild(D)}else{m.insertBefore(D,m.firstChild)}E._addToolbars(z,r);B.onMouseUp.add(function(){var o=l.get(B.id+"_external");l.show(o);l.hide(f);var n=h.add(B.id+"_external_close","click",function(){l.hide(B.id+"_external");
h.remove(B.id+"_external_close","click",n);return false});l.show(o);l.setStyle(o,"top",0-l.getRect(B.id+"_tblext").h-1);l.hide(o);l.show(o);o.style.filter="";f=B.id+"_external";o=null})}if(v=="top"){E._addStatusBar(A,r)}if(!F.theme_advanced_toolbar_container){u=l.add(A,"tr");u=q=l.add(u,"td",{"class":"mceIframeContainer"})}if(C=="bottom"){E._addToolbars(A,r)}if(v=="bottom"){E._addStatusBar(A,r)}return q},_rowLayout:function(D,u,q){var C=this,v=C.editor,B,E,m=v.controlManager,r,p,A,z;B=D.theme_advanced_containers_default_class||"";E=D.theme_advanced_containers_default_align||"center";g(e(D.theme_advanced_containers||""),function(s,o){var n=D["theme_advanced_container_"+s]||"";switch(s.toLowerCase()){case"mceeditor":r=l.add(u,"tr");r=p=l.add(r,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":C._addStatusBar(u,q);break;default:z=(D["theme_advanced_container_"+s+"_align"]||E).toLowerCase();z="mce"+C._ufirst(z);r=l.add(l.add(u,"tr"),"td",{"class":"mceToolbar "+(D["theme_advanced_container_"+s+"_class"]||B)+" "+z||E});
A=m.createToolbar("toolbar"+o);C._addControls(n,A);l.setHTML(r,A.renderHTML());q.deltaHeight-=D.theme_advanced_row_height}});return p},_addControls:function(n,m){var o=this,p=o.settings,q,r=o.editor.controlManager;if(p.theme_advanced_disable&&!o._disabled){q={};g(e(p.theme_advanced_disable),function(s){q[s]=1});o._disabled=q}else{q=o._disabled}g(e(n),function(t){var s;if(q&&q[t]){return}if(t=="tablecontrols"){g(["table","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(u){u=o.createControl(u,r);if(u){m.add(u)}});return}s=o.createControl(t,r);if(s){m.add(s)}})},_addToolbars:function(E,p){var H=this,z,u,B=H.editor,I=H.settings,G,m=B.controlManager,C,q,A=[],F,D,r=false;D=m.createToolbarGroup("toolbargroup",{name:B.getLang("advanced.toolbar"),tab_focus_toolbar:B.getParam("theme_advanced_tab_focus_toolbar")});H.toolbarGroup=D;F=I.theme_advanced_toolbar_align.toLowerCase();F="mce"+H._ufirst(F);q=l.add(l.add(E,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+F,role:"toolbar"});
for(z=1;(G=I["theme_advanced_buttons"+z]);z++){r=true;u=m.createToolbar("toolbar"+z,{"class":"mceToolbarRow"+z});if(I["theme_advanced_buttons"+z+"_add"]){G+=","+I["theme_advanced_buttons"+z+"_add"]}if(I["theme_advanced_buttons"+z+"_add_before"]){G=I["theme_advanced_buttons"+z+"_add_before"]+","+G}H._addControls(G,u);D.add(u);p.deltaHeight-=I.theme_advanced_row_height}if(!r){p.deltaHeight-=I.theme_advanced_row_height}A.push(D.renderHTML());A.push(l.createHTML("a",{href:"#",accesskey:"z",title:B.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+B.id+"').focus();"},"<!-- IE -->"));l.setHTML(q,A.join(""))},_addStatusBar:function(v,p){var q,C=this,z=C.editor,D=C.settings,m,A,B,u;q=l.add(v,"tr");q=u=l.add(q,"td",{"class":"mceStatusbar"});q=l.add(q,"div",{id:z.id+"_path_row",role:"group","aria-labelledby":z.id+"_path_voice"});if(D.theme_advanced_path){l.add(q,"span",{id:z.id+"_path_voice"},z.translate("advanced.path"));l.add(q,"span",{},": ")}else{l.add(q,"span",{},"&#160;")
}if(D.theme_advanced_resizing){l.add(u,"a",{id:z.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"});if(D.theme_advanced_resizing_use_cookie){z.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+z.id+"_size"),r=l.get(z.id+"_tbl");if(!n){return}C.resizeTo(n.cw,n.ch)})}z.onPostRender.add(function(){h.add(z.id+"_resize","click",function(n){n.preventDefault()});h.add(z.id+"_resize","mousedown",function(K){var t,r,s,o,J,G,H,M,n,L,E;function F(N){N.preventDefault();n=H+(N.screenX-J);L=M+(N.screenY-G);C.resizeTo(n,L)}function I(N){h.remove(l.doc,"mousemove",t);h.remove(z.getDoc(),"mousemove",r);h.remove(l.doc,"mouseup",s);h.remove(z.getDoc(),"mouseup",o);n=H+(N.screenX-J);L=M+(N.screenY-G);C.resizeTo(n,L,true);z.nodeChanged()}K.preventDefault();J=K.screenX;G=K.screenY;E=l.get(C.editor.id+"_ifr");H=n=E.clientWidth;M=L=E.clientHeight;t=h.add(l.doc,"mousemove",F);r=h.add(z.getDoc(),"mousemove",F);s=h.add(l.doc,"mouseup",I);o=h.add(z.getDoc(),"mouseup",I)
})})}p.deltaHeight-=21;q=v=null},_updateUndoStatus:function(n){var m=n.controlManager,o=n.undoManager;m.setDisabled("undo",!o.hasUndo()&&!o.typing);m.setDisabled("redo",!o.hasRedo())},_nodeChanged:function(u,B,K,A,L){var F=this,J,M=0,E,N,G=F.settings,D,q,C,I,r,o,m;k.each(F.stateControls,function(n){B.setActive(n,u.queryCommandState(F.controls[n][1]))});function z(p){var s,n=L.parents,t=p;if(typeof(p)=="string"){t=function(v){return v.nodeName==p}}for(s=0;s<n.length;s++){if(t(n[s])){return n[s]}}}B.setActive("visualaid",u.hasVisual);F._updateUndoStatus(u);B.setDisabled("outdent",!u.queryCommandState("Outdent"));J=z("A");if(N=B.get("link")){N.setDisabled((!J&&A)||(J&&!J.href));N.setActive(!!J&&(!J.name&&!J.id))}if(N=B.get("unlink")){N.setDisabled(!J&&A);N.setActive(!!J&&!J.name&&!J.id)}if(N=B.get("anchor")){N.setActive(!A&&!!J&&(J.name||(J.id&&!J.href)))}J=z("IMG");if(N=B.get("image")){N.setActive(!A&&!!J&&K.className.indexOf("mceItem")==-1)}if(N=B.get("styleselect")){F._importClasses();o=[];
g(N.items,function(n){o.push(n.value)});m=u.formatter.matchAll(o);N.select(m[0]);k.each(m,function(p,n){if(n>0){N.mark(p)}})}if(N=B.get("formatselect")){J=z(u.dom.isBlock);if(J){N.select(J.nodeName.toLowerCase())}}z(function(p){if(p.nodeName==="SPAN"){if(!D&&p.className){D=p.className}}if(u.dom.is(p,G.theme_advanced_font_selector)){if(!q&&p.style.fontSize){q=p.style.fontSize}if(!C&&p.style.fontFamily){C=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}if(!I&&p.style.color){I=p.style.color}if(!r&&p.style.backgroundColor){r=p.style.backgroundColor}}return false});if(N=B.get("fontselect")){N.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==C})}if(N=B.get("fontsizeselect")){if(G.theme_advanced_runtime_fontsize&&!q&&!D){q=u.dom.getStyle(K,"fontSize",true)}N.select(function(n){if(n.fontSize&&n.fontSize===q){return true}if(n["class"]&&n["class"]===D){return true}})}if(G.theme_advanced_show_current_color){function H(p,n){if(N=B.get(p)){if(!n){n=N.settings.default_color
}if(n!==N.value){N.displayColor(n)}}}H("forecolor",I);H("backcolor",r)}if(G.theme_advanced_show_current_color){function H(p,n){if(N=B.get(p)){if(!n){n=N.settings.default_color}if(n!==N.value){N.displayColor(n)}}}H("forecolor",I);H("backcolor",r)}if(G.theme_advanced_path&&G.theme_advanced_statusbar_location){J=l.get(u.id+"_path")||l.add(u.id+"_path_row","span",{id:u.id+"_path"});if(F.statusKeyboardNavigation){F.statusKeyboardNavigation.destroy();F.statusKeyboardNavigation=null}l.setHTML(J,"");z(function(O){var p=O.nodeName.toLowerCase(),s,v,t="";if(O.nodeType!=1||p==="br"||O.getAttribute("data-mce-bogus")||l.hasClass(O,"mceItemHidden")||l.hasClass(O,"mceItemRemoved")){return}if(k.isIE&&O.scopeName!=="HTML"&&O.scopeName){p=O.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(E=l.getAttrib(O,"src")){t+="src: "+E+" "}break;case"a":if(E=l.getAttrib(O,"name")){t+="name: "+E+" ";p+="#"+E}if(E=l.getAttrib(O,"href")){t+="href: "+E+" "}break;
case"font":if(E=l.getAttrib(O,"face")){t+="font: "+E+" "}if(E=l.getAttrib(O,"size")){t+="size: "+E+" "}if(E=l.getAttrib(O,"color")){t+="color: "+E+" "}break;case"span":if(E=l.getAttrib(O,"style")){t+="style: "+E+" "}break}if(E=l.getAttrib(O,"id")){t+="id: "+E+" "}if(E=O.className){E=E.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(E){t+="class: "+E+" ";if(u.dom.isBlock(O)||p=="img"||p=="span"){p+="."+E}}}p=p.replace(/(html:)/g,"");p={name:p,node:O,title:t};F.onResolveName.dispatch(F,p);t=p.title;p=p.name;v=l.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:t,"class":"mcePath_"+(M++)},p);if(J.hasChildNodes()){J.insertBefore(l.create("span",{"aria-hidden":"true"},"\u00a0\u00bb "),J.firstChild);J.insertBefore(v,J.firstChild)}else{J.appendChild(v)}},u.getBody());if(l.select("a",J).length>0){F.statusKeyboardNavigation=new k.ui.KeyboardNavigation({root:u.id+"_path_row",items:l.select("a",J),excludeFromTabOrder:true,onCancel:function(){u.focus()}},l)}}},_sel:function(m){this.editor.execCommand("mceSelectNodeDepth",false,m)
},_makeUrl:function(m){var n=this.url+"/"+m;if(this.settings.cache_string){n+=(n.indexOf("?")>=0?"&":"?")+"cache="+this.settings.cache_string}return n},_mceInsertAnchor:function(o,n){var m=this.editor;m.windowManager.open({url:this._makeUrl("anchor.htm"),width:320+parseInt(m.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(m.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var m=this.editor;m.windowManager.open({url:this._makeUrl("charmap.htm"),width:613+parseInt(m.getLang("advanced.charmap_delta_width",0)),height:320+parseInt(m.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var m=this.editor;m.windowManager.open({url:this._makeUrl("about.htm"),width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){var m=this.editor;m.windowManager.open({url:this._makeUrl("shortcuts.htm"),width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(o,n){var m=this.editor;
n=n||{};m.windowManager.open({url:this._makeUrl("color_picker.htm"),width:360+parseInt(m.getLang("advanced.colorpicker_delta_width",0)),height:260+parseInt(m.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:n.color,func:n.func,theme_url:this.url})},_mceCodeEditor:function(n,o){var m=this.editor;m.windowManager.open({url:this._makeUrl("source_editor.htm"),width:parseInt(m.getParam("theme_advanced_source_editor_width",720)),height:parseInt(m.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(n,o){var m=this.editor;if(m.dom.getAttrib(m.selection.getNode(),"class","").indexOf("mceItem")!=-1){return}m.windowManager.open({url:this._makeUrl("image.htm"),width:400+parseInt(m.getLang("advanced.image_delta_width",0)),height:250+parseInt(m.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(n,o){var m=this.editor;m.windowManager.open({url:this._makeUrl("link.htm"),width:400+parseInt(m.getLang("advanced.link_delta_width",0)),height:160+parseInt(m.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})
},_mceNewDocument:function(){var m=this.editor;m.windowManager.confirm("advanced.newdocument",function(n){if(n){m.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var m=this;this._mceColorPicker(0,{color:m.fgColor,func:function(n){m.fgColor=n;m.editor.execCommand("ForeColor",false,n)}})},_mceBackColor:function(){var m=this;this._mceColorPicker(0,{color:m.bgColor,func:function(n){m.bgColor=n;m.editor.execCommand("HiliteColor",false,n)}})},_ufirst:function(m){return m.substring(0,1).toUpperCase()+m.substring(1)}});k.ThemeManager.add("advanced",k.themes.AdvancedTheme)}(tinymce));tinyMCE.addI18n("en.advanced",{underline_desc:"Underline",italic_desc:"Italic",bold_desc:"Bold",dd:"Definition Description",dt:"Definition Term ",samp:"Code Sample",code:"Code",blockquote:"Block Quote",h6:"Heading 6",h5:"Heading 5",h4:"Heading 4",h3:"Heading 3",h2:"Heading 2",h1:"Heading 1",pre:"Preformatted",address:"Address",div:"DIV",paragraph:"Paragraph",block:"Paragraph",fontdefault:"Font",font_size:"12",style_select:"Styles",anchor_delta_height:"",anchor_delta_width:"",charmap_delta_height:"",charmap_delta_width:"",colorpicker_delta_height:"",colorpicker_delta_width:"",link_delta_height:"",link_delta_width:"",image_delta_height:"",image_delta_width:"",more_colors:"More Colors...",toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",newdocument:"Are you sure you want clear all contents?",path:"Path",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",blockquote_desc:"Block Quote",help_desc:"Help",newdocument_desc:"New Document",image_props_desc:"Image Properties",paste_desc:"Paste (Ctrl+V)",copy_desc:"Copy (Ctrl+C)",cut_desc:"Cut (Ctrl+X)",anchor_desc:"Insert/Edit Anchor",visualaid_desc:"show/Hide Guidelines/Invisible Elements",charmap_desc:"Insert Special Character",backcolor_desc:"Select Background Color",forecolor_desc:"Select Text Color",custom1_desc:"Your Custom Description Here",removeformat_desc:"Remove Formatting",hr_desc:"Insert Horizontal Line",sup_desc:"Superscript",sub_desc:"Subscript",code_desc:"Edit HTML Source",cleanup_desc:"Cleanup Messy Code",image_desc:"Edit Image",unlink_desc:"Unlink",link_desc:"Link",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",indent_desc:"Increase Indent",outdent_desc:"Decrease Indent",numlist_desc:"Number List",bullist_desc:"Bullet List",justifyfull_desc:"Align Full",justifyright_desc:"Align Right",justifycenter_desc:"Align Center",justifyleft_desc:"Align Left",striketrough_desc:"Strikethrough",help_shortcut:"Press ALT-F10 for toolbar. Press ALT-0 for help",rich_text_area:"Rich Text Area",shortcuts_desc:"Accessability Help",toolbar:"Toolbar"});
(function(){var e=tinymce.util.JSONRequest,f=tinymce.each,d=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(h,b){var a=this,k;a.url=b;a.editor=h;a.rpcUrl=h.getParam("spellchecker_rpc_url","{backend}");if(a.rpcUrl=="{backend}"){if(tinymce.isIE){return}a.hasSupport=true;h.onContextMenu.addToTop(function(l,g){if(a.active){return false}})}h.addCommand("mceSpellCheck",function(){if(a.rpcUrl=="{backend}"){a.editor.getBody().spellcheck=a.active=!a.active;return}if(!a.active){h.setProgressState(1);a._sendRPC("checkWords",[a.selectedLang,a._getWords()],function(g){if(g.length>0){a.active=1;a._markWords(g);h.setProgressState(0);h.nodeChanged()}else{h.setProgressState(0);if(h.getParam("spellchecker_report_no_misspellings",true)){h.windowManager.alert("spellchecker.no_mpell")
}}})}else{a._done()}});if(h.settings.content_css!==false){h.contentCSS.push(b+"/css/content.css")}h.onClick.add(a._showMenu,a);h.onContextMenu.add(a._showMenu,a);h.onBeforeGetContent.add(function(){if(a.active){a._removeWords()}});h.onNodeChange.add(function(g,l){l.setActive("spellchecker",a.active)});h.onSetContent.add(function(){a._done()});h.onBeforeGetContent.add(function(){a._done()});h.onBeforeExecCommand.add(function(l,g){if(g=="mceFullScreen"){a._done()}});a.languages={};f(h.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(g,l){if(l.indexOf("+")===0){l=l.substring(1);a.selectedLang=g}a.languages[l]=g})},createControl:function(a,m){var k=this,b,l=k.editor;if(a=="spellchecker"){if(k.rpcUrl=="{backend}"){if(k.hasSupport){b=m.createButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:k})}return b}b=m.createSplitButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:k});
b.onRenderMenu.add(function(g,h){h.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1);f(k.languages,function(s,o){var r={icon:1},q;r.onclick=function(){if(s==k.selectedLang){return}q.setSelected(1);k.selectedItem.setSelected(0);k.selectedItem=q;k.selectedLang=s};r.title=o;q=h.add(r);q.setSelected(s==k.selectedLang);if(s==k.selectedLang){k.selectedItem=q}})});return b}},_walk:function(a,k){var b=this.editor.getDoc(),l;if(b.createTreeWalker){l=b.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,false);while((a=l.nextNode())!=null){k.call(this,a)}}else{tinymce.walk(a,k,"childNodes")}},_getSeparators:function(){var b="",g,a=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}\u201d\u201c');for(g=0;g<a.length;g++){b+="\\"+a.charAt(g)}return b},_getWords:function(){var l=this.editor,b=[],m="",k={},a=[];this._walk(l.getBody(),function(g){if(g.nodeType==3){m+=g.nodeValue+" "}});if(l.getParam("spellchecker_word_pattern")){a=m.match("("+l.getParam("spellchecker_word_pattern")+")","gi")
}else{m=m.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," ");m=tinymce.trim(m.replace(/(\s+)/g," "));a=m.split(" ")}f(a,function(g){if(!k[g]){b.push(g);k[g]=1}});return b},_removeWords:function(l){var k=this.editor,a=k.dom,b=k.selection,m=b.getBookmark();f(a.select("span").reverse(),function(g){if(g&&(a.hasClass(g,"mceItemHiddenSpellWord")||a.hasClass(g,"mceItemHidden"))){if(!l||a.decode(g.innerHTML)==l){a.remove(g,1)}}});b.moveToBookmark(m)},_markWords:function(b){var r=this.editor,s=r.dom,o=r.getDoc(),q=r.selection,p=q.getBookmark(),u=[],n=b.join("|"),a=this._getSeparators(),t=new RegExp("(^|["+a+"])("+n+")(?=["+a+"]|$)","g");this._walk(r.getBody(),function(g){if(g.nodeType==3){u.push(g)}});f(u,function(g){var k,l,v,h,m=g.nodeValue;if(t.test(m)){m=s.encode(m);l=s.create("span",{"class":"mceItemHidden"});if(tinymce.isIE){m=m.replace(t,"$1<mcespell>$2</mcespell>");while((h=m.indexOf("<mcespell>"))!=-1){v=m.substring(0,h);if(v.length){k=o.createTextNode(s.decode(v));l.appendChild(k)
}m=m.substring(h+10);h=m.indexOf("</mcespell>");v=m.substring(0,h);m=m.substring(h+11);l.appendChild(s.create("span",{"class":"mceItemHiddenSpellWord"},v))}if(m.length){k=o.createTextNode(s.decode(m));l.appendChild(k)}}else{l.innerHTML=m.replace(t,'$1<span class="mceItemHiddenSpellWord">$2</span>')}s.replace(l,g)}});q.moveToBookmark(p)},_showMenu:function(o,m){var n=this,o=n.editor,r=n._menu,a,b=o.dom,p=b.getViewPort(o.getWin()),q=m.target;m=0;if(!r){r=o.controlManager.createDropMenu("spellcheckermenu",{"class":"mceNoIcons"});n._menu=r}if(b.hasClass(q,"mceItemHiddenSpellWord")){r.removeAll();r.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1);n._sendRPC("getSuggestions",[n.selectedLang,b.decode(q.innerHTML)],function(g){var h;r.removeAll();if(g.length>0){r.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1);f(g,function(k){r.add({title:k,onclick:function(){b.replace(o.getDoc().createTextNode(k),q);n._checkDone()}})});r.addSeparator()}else{r.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1)
}h=n.editor.getParam("spellchecker_enable_ignore_rpc","");r.add({title:"spellchecker.ignore_word",onclick:function(){var k=q.innerHTML;b.remove(q,1);n._checkDone();if(h){o.setProgressState(1);n._sendRPC("ignoreWord",[n.selectedLang,k],function(l){o.setProgressState(0)})}}});r.add({title:"spellchecker.ignore_words",onclick:function(){var k=q.innerHTML;n._removeWords(b.decode(k));n._checkDone();if(h){o.setProgressState(1);n._sendRPC("ignoreWords",[n.selectedLang,k],function(l){o.setProgressState(0)})}}});if(n.editor.getParam("spellchecker_enable_learn_rpc")){r.add({title:"spellchecker.learn_word",onclick:function(){var k=q.innerHTML;b.remove(q,1);n._checkDone();o.setProgressState(1);n._sendRPC("learnWord",[n.selectedLang,k],function(l){o.setProgressState(0)})}})}r.update()});a=b.getPos(o.getContentAreaContainer());r.settings.offset_x=a.x;r.settings.offset_y=a.y;o.selection.select(q);a=b.getPos(q);r.showMenu(a.x,a.y+q.offsetHeight-p.y);return tinymce.dom.Event.cancel(m)}else{r.hideMenu()}},_checkDone:function(){var h=this,k=h.editor,a=k.dom,b;
f(a.select("span"),function(g){if(g&&a.hasClass(g,"mceItemHiddenSpellWord")){b=true;return false}});if(!b){h._done()}},_done:function(){var b=this,a=b.active;if(b.active){b.active=0;b._removeWords();if(b._menu){b._menu.hideMenu()}if(a){b.editor.nodeChanged()}}},_sendRPC:function(h,a,k){var b=this;e.sendRPC({url:b.rpcUrl,method:h,params:a,success:k,error:function(g,l){b.editor.setProgressState(0);b.editor.windowManager.alert(g.errstr||("Error response: "+l.responseText))}})}});tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)})();(function(h){var g=h.each;function e(k,d){var b=d.ownerDocument,l=b.createRange(),a;l.setStartBefore(d);l.setEnd(k.endContainer,k.endOffset);a=b.createElement("body");a.appendChild(l.cloneContents());return a.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function f(P,R,b){var am,a,X,ae;V();ae=R.getParent(b.getStart(),"th,td");if(ae){a=S(ae);X=N();ae=d(a.x,a.y)}function ad(k,l){k=k.cloneNode(l);
k.removeAttribute("id");return k}function V(){var k=0;am=[];g(["thead","tbody","tfoot"],function(m){var l=R.select("> "+m+" tr",P);g(l,function(o,n){n+=k;g(R.select("> td, > th",o),function(p,u){var t,s,r,q;if(am[n]){while(am[n][u]){u++}}r=ak(p,"rowspan");q=ak(p,"colspan");for(s=n;s<n+r;s++){if(!am[s]){am[s]=[]}for(t=u;t<u+q;t++){am[s][t]={part:m,real:s==n&&t==u,elm:p,rowspan:r,colspan:q}}}})});k+=l.length})}function d(m,k){var l;l=am[k];if(l){return l[m]}}function ak(k,l){return parseInt(k.getAttribute(l)||1)}function W(k,m,l){if(k){l=parseInt(l);if(l===1){k.removeAttribute(m,1)}else{k.setAttribute(m,l,1)}}}function aj(k){return k&&(R.hasClass(k.elm,"mceSelected")||k==ae)}function ai(){var k=[];g(P.rows,function(l){g(l.cells,function(m){if(R.hasClass(m,"mceSelected")||m==ae.elm){k.push(l);return false}})});return k}function Z(){var k=R.createRng();k.setStartAfter(P);k.setEndAfter(P);b.setRng(k);R.remove(P)}function an(l){var k;h.walk(l,function(m){var n;if(m.nodeType==3){g(R.getParents(m.parentNode,null,l).reverse(),function(o){o=ad(o,false);
if(!k){k=n=o}else{if(n){n.appendChild(o)}}n=o});if(n){n.innerHTML=h.isIE?"&nbsp;":'<br data-mce-bogus="1" />'}return false}},"childNodes");l=ad(l,false);W(l,"rowSpan",1);W(l,"colSpan",1);if(k){l.appendChild(k)}else{if(!h.isIE){l.innerHTML='<br data-mce-bogus="1" />'}}return l}function ab(){var k=R.createRng();g(R.select("tr",P),function(l){if(l.cells.length==0){R.remove(l)}});if(R.select("tr",P).length==0){k.setStartAfter(P);k.setEndAfter(P);b.setRng(k);R.remove(P);return}g(R.select("thead,tbody,tfoot",P),function(l){if(l.rows.length==0){R.remove(l)}});V();row=am[Math.min(am.length-1,a.y)];if(row){b.select(row[Math.min(row.length-1,a.x)].elm,true);b.collapse(true)}}function T(m,o,k,n){var p,r,s,q,l;p=am[o][m].elm.parentNode;for(s=1;s<=k;s++){p=R.getNext(p,"tr");if(p){for(r=m;r>=0;r--){l=am[o+s][r].elm;if(l.parentNode==p){for(q=1;q<=n;q++){R.insertAfter(an(l),l)}break}}if(r==-1){for(q=1;q<=n;q++){p.insertBefore(an(p.cells[0]),p.cells[0])}}}}}function Y(){g(am,function(l,k){g(l,function(q,r){var n,o,m,p;
if(aj(q)){q=q.elm;n=ak(q,"colspan");o=ak(q,"rowspan");if(n>1||o>1){W(q,"rowSpan",1);W(q,"colSpan",1);for(p=0;p<n-1;p++){R.insertAfter(an(q),q)}T(r,k,o-1,n)}}})})}function ac(n,q,k){var t,u,l,m,o,r,p,z,n,v,s;if(n){pos=S(n);t=pos.x;u=pos.y;l=t+(q-1);m=u+(k-1)}else{t=a.x;u=a.y;l=X.x;m=X.y}p=d(t,u);z=d(l,m);if(p&&z&&p.part==z.part){Y();V();p=d(t,u).elm;W(p,"colSpan",(l-t)+1);W(p,"rowSpan",(m-u)+1);for(r=u;r<=m;r++){for(o=t;o<=l;o++){if(!am[r]||!am[r][o]){continue}n=am[r][o].elm;if(n!=p){v=h.grep(n.childNodes);g(v,function(A){p.appendChild(A)});if(v.length){v=h.grep(p.childNodes);s=0;g(v,function(A){if(A.nodeName=="BR"&&R.getAttrib(A,"data-mce-bogus")&&s++<v.length-1){p.removeChild(A)}})}R.remove(n)}}}ab()}}function ah(p){var t,n,q,o,m,l,s,k,r;g(am,function(u,v){g(u,function(z,A){if(aj(z)){z=z.elm;m=z.parentNode;l=ad(m,false);t=v;if(p){return false}}});if(p){return !t}});for(o=0;o<am[0].length;o++){if(!am[t][o]){continue}n=am[t][o].elm;if(n!=q){if(!p){r=ak(n,"rowspan");if(r>1){W(n,"rowSpan",r+1);
continue}}else{if(t>0&&am[t-1][o]){k=am[t-1][o].elm;r=ak(k,"rowSpan");if(r>1){W(k,"rowSpan",r+1);continue}}}s=an(n);W(s,"colSpan",n.colSpan);l.appendChild(s);q=n}}if(l.hasChildNodes()){if(!p){R.insertAfter(l,m)}else{m.parentNode.insertBefore(l,m)}}}function al(l){var k,m;g(am,function(o,n){g(o,function(p,q){if(aj(p)){k=q;if(l){return false}}});if(l){return !k}});g(am,function(o,n){var r,q,p;if(!o[k]){return}r=o[k].elm;if(r!=m){p=ak(r,"colspan");q=ak(r,"rowspan");if(p==1){if(!l){R.insertAfter(an(r),r);T(k,n,q-1,p)}else{r.parentNode.insertBefore(an(r),r);T(k,n,q-1,p)}}else{W(r,"colSpan",r.colSpan+1)}m=r}})}function af(){var k=[];g(am,function(m,l){g(m,function(n,o){if(aj(n)&&h.inArray(k,o)===-1){g(am,function(p){var r=p[o].elm,q;q=ak(r,"colSpan");if(q>1){W(r,"colSpan",q-1)}else{R.remove(r)}});k.push(o)}})});ab()}function ag(){var k;function l(n){var o,m,p;o=R.getNext(n,"tr");g(n.cells,function(r){var q=ak(r,"rowSpan");if(q>1){W(r,"rowSpan",q-1);m=S(r);T(m.x,m.y,1,1)}});m=S(n.cells[0]);g(am[m.y],function(r){var q;
r=r.elm;if(r!=p){q=ak(r,"rowSpan");if(q<=1){R.remove(r)}else{W(r,"rowSpan",q-1)}p=r}})}k=ai();g(k.reverse(),function(m){l(m)});ab()}function U(){var k=ai();R.remove(k);ab();return k}function M(){var k=ai();g(k,function(l,m){k[m]=ad(l,true)});return k}function aa(m,n){var l=ai(),o=l[n?0:l.length-1],k=o.cells.length;g(am,function(p){var q;k=0;g(p,function(r,s){if(r.real){k+=r.colspan}if(r.elm.parentNode==o){q=1}});if(q){return false}});if(!n){m.reverse()}g(m,function(p){var q=p.cells.length,r;for(i=0;i<q;i++){r=p.cells[i];W(r,"colSpan",1);W(r,"rowSpan",1)}for(i=q;i<k;i++){p.appendChild(an(p.cells[q-1]))}for(i=k;i<q;i++){R.remove(p.cells[i])}if(n){o.parentNode.insertBefore(p,o)}else{R.insertAfter(p,o)}})}function S(l){var k;g(am,function(n,m){g(n,function(o,p){if(o.elm==l){k={x:p,y:m};return false}});return !k});return k}function O(k){a=S(k)}function N(){var k,l,m;l=m=0;g(am,function(o,n){g(o,function(r,s){var p,q;if(aj(r)){r=am[n][s];if(s>l){l=s}if(n>m){m=n}if(r.real){p=r.colspan-1;q=r.rowspan-1;
if(p){if(s+p>l){l=s+p}}if(q){if(n+q>m){m=n+q}}}}})});return{x:l,y:m}}function Q(m){var p,q,k,l,r,s,o,n;X=S(m);if(a&&X){p=Math.min(a.x,X.x);q=Math.min(a.y,X.y);k=Math.max(a.x,X.x);l=Math.max(a.y,X.y);r=k;s=l;for(y=q;y<=s;y++){m=am[y][p];if(!m.real){if(p-(m.colspan-1)<p){p-=m.colspan-1}}}for(x=p;x<=r;x++){m=am[q][x];if(!m.real){if(q-(m.rowspan-1)<q){q-=m.rowspan-1}}}for(y=q;y<=l;y++){for(x=p;x<=k;x++){m=am[y][x];if(m.real){o=m.colspan-1;n=m.rowspan-1;if(o){if(x+o>r){r=x+o}}if(n){if(y+n>s){s=y+n}}}}}R.removeClass(R.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=q;y<=s;y++){for(x=p;x<=r;x++){if(am[y][x]){R.addClass(am[y][x].elm,"mceSelected")}}}}}h.extend(this,{deleteTable:Z,split:Y,merge:ac,insertRow:ah,insertCol:al,deleteCols:af,deleteRows:ag,cutRows:U,copyRows:M,pasteRows:aa,getPos:S,setStartCell:O,setEndCell:Q})}h.create("tinymce.plugins.TablePlugin",{init:function(m,l){var n,a;function b(p){var k=m.selection,o=m.dom.getParent(p||k.getNode(),"table");if(o){return new f(o,m.dom,k)
}}function d(){m.getBody().style.webkitUserSelect="";m.dom.removeClass(m.dom.select("td.mceSelected,th.mceSelected"),"mceSelected")}g([["table","table.desc","mceInsertTable",true],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",true],["cell_props","table.cell_desc","mceTableCellProps",true],["split_cells","table.split_cells_desc","mceTableSplitCells",true],["merge_cells","table.merge_cells_desc","mceTableMergeCells",true]],function(k){m.addButton(k[0],{title:k[1],cmd:k[2],ui:k[3]})});if(!h.isIE){m.onClick.add(function(o,k){k=k.target;if(k.nodeName==="TABLE"){o.selection.select(k);
o.nodeChanged()}})}m.onPreProcess.add(function(k,A){var s,z,v,t=k.dom,u;s=t.select("table",A.node);z=s.length;while(z--){v=s[z];t.setAttrib(v,"data-mce-style","");if((u=t.getAttrib(v,"width"))){t.setStyle(v,"width",u);t.setAttrib(v,"width","")}if((u=t.getAttrib(v,"height"))){t.setStyle(v,"height",u);t.setAttrib(v,"height","")}}});m.onNodeChange.add(function(k,p,r){var s;r=k.selection.getStart();s=k.dom.getParent(r,"td,th,caption");p.setActive("table",r.nodeName==="TABLE"||!!s);if(s&&s.nodeName==="CAPTION"){s=0}p.setDisabled("delete_table",!s);p.setDisabled("delete_col",!s);p.setDisabled("delete_table",!s);p.setDisabled("delete_row",!s);p.setDisabled("col_after",!s);p.setDisabled("col_before",!s);p.setDisabled("row_after",!s);p.setDisabled("row_before",!s);p.setDisabled("row_props",!s);p.setDisabled("cell_props",!s);p.setDisabled("split_cells",!s);p.setDisabled("merge_cells",!s)});m.onInit.add(function(k){var r,t,s=k.dom,v;n=k.windowManager;k.onMouseDown.add(function(p,o){if(o.button!=2){d();
t=s.getParent(o.target,"td,th");r=s.getParent(t,"table")}});s.bind(k.getDoc(),"mouseover",function(o){var q,z,p=o.target;if(t&&(v||p!=t)&&(p.nodeName=="TD"||p.nodeName=="TH")){z=s.getParent(p,"table");if(z==r){if(!v){v=b(z);v.setStartCell(t);k.getBody().style.webkitUserSelect="none"}v.setEndCell(p)}q=k.selection.getSel();try{if(q.removeAllRanges){q.removeAllRanges()}else{q.empty()}}catch(A){}o.preventDefault()}});k.onMouseUp.add(function(F,E){var L,J=F.selection,q,o=J.getSel(),p,I,K,G;if(t){if(v){F.getBody().style.webkitUserSelect=""}function H(B,z){var A=new h.dom.TreeWalker(B,B);do{if(B.nodeType==3&&h.trim(B.nodeValue).length!=0){if(z){L.setStart(B,0)}else{L.setEnd(B,B.nodeValue.length)}return}if(B.nodeName=="BR"){if(z){L.setStartBefore(B)}else{L.setEndBefore(B)}return}}while(B=(z?A.next():A.prev()))}q=s.select("td.mceSelected,th.mceSelected");if(q.length>0){L=s.createRng();I=q[0];G=q[q.length-1];H(I,1);p=new h.dom.TreeWalker(I,s.getParent(q[0],"table"));do{if(I.nodeName=="TD"||I.nodeName=="TH"){if(!s.hasClass(I,"mceSelected")){break
}K=I}}while(I=p.next());H(K);J.setRng(L)}F.nodeChanged();t=v=r=null}});k.onKeyUp.add(function(p,o){d()});if(k&&k.plugins.contextmenu){k.plugins.contextmenu.onContextMenu.add(function(z,B,p){var o,q=k.selection,A=q.getNode()||k.getBody();if(k.dom.getParent(p,"td")||k.dom.getParent(p,"th")||k.dom.select("td.mceSelected,th.mceSelected").length){B.removeAll();if(A.nodeName=="A"&&!k.dom.getAttrib(A,"name")){B.add({title:"advanced.link_desc",icon:"link",cmd:k.plugins.advlink?"mceAdvLink":"mceLink",ui:true});B.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});B.addSeparator()}if(A.nodeName=="IMG"&&A.className.indexOf("mceItem")==-1){B.add({title:"advanced.image_desc",icon:"image",cmd:k.plugins.advimage?"mceAdvImage":"mceImage",ui:true});B.addSeparator()}B.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}});B.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"});B.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"});B.addSeparator();
o=B.addMenu({title:"table.cell"});o.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"});o.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"});o.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"});o=B.addMenu({title:"table.row"});o.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"});o.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"});o.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"});o.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"});o.addSeparator();o.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"});o.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"});o.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!a);o.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!a);o=B.addMenu({title:"table.col"});
o.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"});o.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"});o.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})}else{B.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})}})}if(!h.isIE){function u(){var o;for(o=k.getBody().lastChild;o&&o.nodeType==3&&!o.nodeValue.length;o=o.previousSibling){}if(o&&o.nodeName=="TABLE"){k.dom.add(k.getBody(),"p",null,'<br mce_bogus="1" />')}}if(h.isGecko){k.onKeyDown.add(function(z,p){var A,q,o=z.dom;if(p.keyCode==37||p.keyCode==38){A=z.selection.getRng();q=o.getParent(A.startContainer,"table");if(q&&z.getBody().firstChild==q){if(e(A,q)){A=o.createRng();A.setStartBefore(q);A.setEndBefore(q);z.selection.setRng(A);p.preventDefault()}}}})}k.onKeyUp.add(u);k.onSetContent.add(u);k.onVisualAid.add(u);k.onPreProcess.add(function(q,o){var p=o.node.lastChild;if(p&&p.childNodes.length==1&&p.firstChild.nodeName=="BR"){q.dom.remove(p)
}});u()}});g({mceTableSplitCells:function(k){k.split()},mceTableMergeCells:function(k){var r,q,p;p=m.dom.getParent(m.selection.getNode(),"th,td");if(p){r=p.rowSpan;q=p.colSpan}if(!m.dom.select("td.mceSelected,th.mceSelected").length){}else{k.merge()}},mceTableInsertRowBefore:function(k){k.insertRow(true)},mceTableInsertRowAfter:function(k){k.insertRow()},mceTableInsertColBefore:function(k){k.insertCol(true)},mceTableInsertColAfter:function(k){k.insertCol()},mceTableDeleteCol:function(k){k.deleteCols()},mceTableDeleteRow:function(k){k.deleteRows()},mceTableCutRow:function(k){a=k.cutRows()},mceTableCopyRow:function(k){a=k.copyRows()},mceTablePasteRowBefore:function(k){k.pasteRows(a,true)},mceTablePasteRowAfter:function(k){k.pasteRows(a)},mceTableDelete:function(k){k.deleteTable()}},function(k,o){m.addCommand(o,function(){var p=b();if(p){k(p);m.execCommand("mceRepaint");d()}})});g({mceInsertTable:function(k){n.open({url:l+"/table.htm",width:400+parseInt(m.getLang("table.table_delta_width",0)),height:320+parseInt(m.getLang("table.table_delta_height",0)),inline:1},{plugin_url:l,action:k?k.action:0})
},mceTableRowProps:function(){n.open({url:l+"/row.htm",width:400+parseInt(m.getLang("table.rowprops_delta_width",0)),height:295+parseInt(m.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:l})},mceTableCellProps:function(){n.open({url:l+"/cell.htm",width:400+parseInt(m.getLang("table.cellprops_delta_width",0)),height:295+parseInt(m.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:l})}},function(k,o){m.addCommand(o,function(q,p){k(p)})})}});h.PluginManager.add("table",h.plugins.TablePlugin)})(tinymce);(function(){var e=tinymce.explode("id,name,width,height,style,align,class,hspace,vspace,bgcolor,type"),k=tinymce.makeMap(e.join(",")),b=tinymce.html.Node,g,a,h=tinymce.util.JSON,f;g=[["Flash","d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["ShockWave","166b1bca-3f9c-11cf-8075-444553540000","application/x-director","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0"],["WindowsMedia","6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a","application/x-mplayer2","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"],["QuickTime","02bf25d5-8c17-4b23-bc80-d3488abddc6b","video/quicktime","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"],["RealMedia","cfcdaa03-8be4-11cf-b84b-0020afbbccfa","audio/x-pn-realaudio-plugin","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["Java","8ad9c840-044e-11d1-b3e9-00805f499d93","application/x-java-applet","http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0"],["Silverlight","dfeaf541-f3e1-4c24-acac-99c30715084a","application/x-silverlight-2"],["Iframe"],["Video"]];
function d(o){var n,l,m;if(o&&!o.splice){l=[];for(m=0;true;m++){if(o[m]){l[m]=o[m]}else{break}}return l}return o}tinymce.create("tinymce.plugins.MediaPlugin",{init:function(p,l){var t=this,n={},o,r,s,m;function q(u){return u&&u.nodeName==="IMG"&&p.dom.hasClass(u,"mceItemMedia")}t.editor=p;t.url=l;a="";for(o=0;o<g.length;o++){m=g[o][0];s={name:m,clsids:tinymce.explode(g[o][1]||""),mimes:tinymce.explode(g[o][2]||""),codebase:g[o][3]};for(r=0;r<s.clsids.length;r++){n["clsid:"+s.clsids[r]]=s}for(r=0;r<s.mimes.length;r++){n[s.mimes[r]]=s}n["mceItem"+m]=s;n[m.toLowerCase()]=s;a+=(a?"|":"")+m}tinymce.each(p.getParam("media_types","video=mp4,m4v,ogv,webm;silverlight=xap;flash=swf,flv;shockwave=dcr;quicktime=mov,qt,mpg,mp3,mpeg;shockwave=dcr;windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;realmedia=rm,ra,ram;java=jar").split(";"),function(A){var u,z,v;A=A.split(/=/);z=tinymce.explode(A[1].toLowerCase());for(u=0;u<z.length;u++){v=n[A[0].toLowerCase()];if(v){n[z[u]]=v}}});a=new RegExp("write("+a+")\\(([^)]+)\\)");
t.lookup=n;p.onPreInit.add(function(){p.schema.addValidElements("object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]");p.parser.addNodeFilter("object,embed,video,audio,script,iframe",function(u){var v=u.length;while(v--){t.objectToImg(u[v])}});p.serializer.addNodeFilter("img",function(u,z,v){var A=u.length,B;while(A--){B=u[A];if((B.attr("class")||"").indexOf("mceItemMedia")!==-1){t.imgToObject(B,v)}}})});p.onInit.add(function(){if(p.theme&&p.theme.onResolveName){p.theme.onResolveName.add(function(u,v){if(v.name==="img"&&p.dom.hasClass(v.node,"mceItemMedia")){v.name="media"}})}if(p&&p.plugins.contextmenu){p.plugins.contextmenu.onContextMenu.add(function(v,z,u){if(u.nodeName==="IMG"&&u.className.indexOf("mceItemMedia")!==-1){z.add({title:"media.edit",icon:"media",cmd:"mceMedia"})}})}});p.addCommand("mceMedia",function(){var v,u;u=p.selection.getNode();if(q(u)){v=h.parse(p.dom.getAttrib(u,"data-mce-json"));tinymce.each(e,function(z){var A=p.dom.getAttrib(u,z);
if(A){v[z]=A}});v.type=t.getType(u.className).name.toLowerCase()}if(!v){v={type:"flash",video:{sources:[]},params:{}}}p.windowManager.open({file:l+"/media.htm",width:476+parseInt(p.getLang("media.delta_width",0)),height:541+parseInt(p.getLang("media.delta_height",0)),inline:1},{plugin_url:l,data:v})});p.addButton("media",{title:"media.desc",cmd:"mceMedia"});p.onNodeChange.add(function(v,u,z){u.setActive("media",q(z))})},convertUrl:function(n,q){var m=this,p=m.editor,o=p.settings,r=o.url_converter,l=o.url_converter_scope||m;if(!n){return n}if(q){return p.documentBaseURI.toAbsolute(n)}return r.call(l,n,"src","object")},getInfo:function(){return{longname:"Media",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media",version:tinymce.majorVersion+"."+tinymce.minorVersion}},dataToImg:function(o,m){var t=this,q=t.editor,r=q.documentBaseURI,l,s,p,n;o.params.src=t.convertUrl(o.params.src,m);s=o.video.attrs;if(s){s.src=t.convertUrl(s.src,m)
}if(s){s.poster=t.convertUrl(s.poster,m)}l=d(o.video.sources);if(l){for(n=0;n<l.length;n++){l[n].src=t.convertUrl(l[n].src,m)}}p=t.editor.dom.create("img",{id:o.id,style:o.style,align:o.align,src:t.editor.theme.url+"/img/trans.gif","class":"mceItemMedia mceItem"+t.getType(o.type).name,"data-mce-json":h.serialize(o,"'")});p.width=o.width||"320";p.height=o.height||"240";return p},dataToHtml:function(l,m){return this.editor.serializer.serialize(this.dataToImg(l,m),{force_absolute:m})},htmlToData:function(n){var m,l,o;o={type:"flash",video:{sources:[]},params:{}};m=this.editor.parser.parse(n);l=m.getAll("img")[0];if(l){o=h.parse(l.attr("data-mce-json"));o.type=this.getType(l.attr("class")).name.toLowerCase();tinymce.each(e,function(p){var q=l.attr(p);if(q){o[p]=q}})}return o},getType:function(o){var m,l,n;l=tinymce.explode(o," ");for(m=0;m<l.length;m++){n=this.lookup[l[m]];if(n){return n}}},imgToObject:function(C,p){var v=this,q=v.editor,F,J,l,u,K,B,I,z,m,H,t,r,D,G,o,A,n,E;function s(L,M){var Q,P,R,O,N;
N=q.getParam("flash_video_player_url",v.convertUrl(v.url+"/moxieplayer.swf"));if(N){Q=q.documentBaseURI;I.params.src=N;if(q.getParam("flash_video_player_absvideourl",true)){L=Q.toAbsolute(L||"",true);M=Q.toAbsolute(M||"",true)}R="";P=q.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"});tinymce.each(P,function(T,S){T=T.replace(/\$url/,L||"");T=T.replace(/\$poster/,M||"");if(T.length>0){R+=(R?"&":"")+S+"="+escape(T)}});if(R.length){I.params.flashvars=R}O=q.getParam("flash_video_player_params",{allowfullscreen:true,allowscriptaccess:true});tinymce.each(O,function(T,S){I.params[S]=""+T})}}I=h.parse(C.attr("data-mce-json"));r=this.getType(C.attr("class"));E=C.attr("data-mce-style");if(!E){E=C.attr("style");if(E){E=q.dom.serializeStyle(q.dom.parseStyle(E,"img"))}}if(r.name==="Iframe"){A=new b("iframe",1);tinymce.each(e,function(L){var M=C.attr(L);if(L=="class"&&M){M=M.replace(/mceItem.+ ?/g,"")}if(M&&M.length>0){A.attr(L,M)}});for(K in I.params){A.attr(K,I.params[K])}A.attr({style:E,src:I.params.src});
C.replace(A);return}if(this.editor.settings.media_use_script){A=new b("script",1).attr("type","text/javascript");B=new b("#text",3);B.value="write"+r.name+"("+h.serialize(tinymce.extend(I.params,{width:C.attr("width"),height:C.attr("height")}))+");";A.append(B);C.replace(A);return}if(r.name==="Video"&&I.video.sources[0]){F=new b("video",1).attr(tinymce.extend({id:C.attr("id"),width:C.attr("width"),height:C.attr("height"),style:E},I.video.attrs));if(I.video.attrs){n=I.video.attrs.poster}m=I.video.sources=d(I.video.sources);for(D=0;D<m.length;D++){if(/\.mp4$/.test(m[D].src)){o=m[D].src}}if(!m[0].type){F.attr("src",m[0].src);m.splice(0,1)}for(D=0;D<m.length;D++){z=new b("source",1).attr(m[D]);z.shortEnded=true;F.append(z)}if(o){s(o,n);r=v.getType("flash")}else{I.params.src=""}}if(I.params.src){if(/\.flv$/i.test(I.params.src)){s(I.params.src,"")}if(p&&p.force_absolute){I.params.src=q.documentBaseURI.toAbsolute(I.params.src)}J=new b("object",1).attr({id:C.attr("id"),width:C.attr("width"),height:C.attr("height"),style:E});
tinymce.each(e,function(L){if(I[L]&&L!="type"){J.attr(L,I[L])}});for(K in I.params){t=new b("param",1);t.shortEnded=true;B=I.params[K];if(K==="src"&&r.name==="WindowsMedia"){K="url"}t.attr({name:K,value:B});J.append(t)}if(this.editor.getParam("media_strict",true)){J.attr({data:I.params.src,type:r.mimes[0]})}else{J.attr({classid:"clsid:"+r.clsids[0],codebase:r.codebase});l=new b("embed",1);l.shortEnded=true;l.attr({id:C.attr("id"),width:C.attr("width"),height:C.attr("height"),style:E,type:r.mimes[0]});for(K in I.params){l.attr(K,I.params[K])}tinymce.each(e,function(L){if(I[L]&&L!="type"){l.attr(L,I[L])}});J.append(l)}if(I.object_html){B=new b("#text",3);B.raw=true;B.value=I.object_html;J.append(B)}if(F){F.append(J)}}if(F){if(I.video_html){B=new b("#text",3);B.raw=true;B.value=I.video_html;F.append(B)}}if(F||J){C.replace(F||J)}else{C.remove()}},objectToImg:function(D){var K,l,F,r,L,M,z,B,v,G,E,s,q,I,C,m,J,p,H=this.lookup,n,A,u=this.editor.settings.url_converter,o=this.editor.settings.url_converter_scope;
function t(N){return new tinymce.html.Serializer({inner:true,validate:false}).serialize(N)}if(!D.parent){return}if(D.name==="script"){if(D.firstChild){n=a.exec(D.firstChild.value)}if(!n){return}p=n[1];J={video:{},params:h.parse(n[2])};B=J.params.width;v=J.params.height}J=J||{video:{},params:{}};L=new b("img",1);L.attr({src:this.editor.theme.url+"/img/trans.gif"});M=D.name;if(M==="video"){F=D;K=D.getAll("object")[0];l=D.getAll("embed")[0];B=F.attr("width");v=F.attr("height");z=F.attr("id");J.video={attrs:{},sources:[]};A=J.video.attrs;for(M in F.attributes.map){A[M]=F.attributes.map[M]}C=D.attr("src");if(C){J.video.sources.push({src:u.call(o,C,"src","video")})}m=F.getAll("source");for(E=0;E<m.length;E++){C=m[E].remove();J.video.sources.push({src:u.call(o,C.attr("src"),"src","source"),type:C.attr("type"),media:C.attr("media")})}if(A.poster){A.poster=u.call(o,A.poster,"poster","video")}}if(D.name==="object"){K=D;l=D.getAll("embed")[0]}if(D.name==="embed"){l=D}if(D.name==="iframe"){r=D;p="Iframe"
}if(K){B=B||K.attr("width");v=v||K.attr("height");G=G||K.attr("style");z=z||K.attr("id");I=K.getAll("param");for(E=0;E<I.length;E++){q=I[E];M=q.remove().attr("name");if(!k[M]){J.params[M]=q.attr("value")}}J.params.src=J.params.src||K.attr("data")}if(l){B=B||l.attr("width");v=v||l.attr("height");G=G||l.attr("style");z=z||l.attr("id");for(M in l.attributes.map){if(!k[M]&&!J.params[M]){J.params[M]=l.attributes.map[M]}}}if(r){B=r.attr("width");v=r.attr("height");G=G||r.attr("style");z=r.attr("id");tinymce.each(e,function(N){L.attr(N,r.attr(N))});for(M in r.attributes.map){if(!k[M]&&!J.params[M]){J.params[M]=r.attributes.map[M]}}}if(J.params.movie){J.params.src=J.params.src||J.params.movie;delete J.params.movie}if(J.params.src){J.params.src=u.call(o,J.params.src,"src","object")}if(F){p=H.video.name}if(K&&!p){p=(H[(K.attr("clsid")||"").toLowerCase()]||H[(K.attr("classid")||"").toLowerCase()]||H[(K.attr("type")||"").toLowerCase()]||{}).name}if(l&&!p){p=(H[(l.attr("type")||"").toLowerCase()]||{}).name
}D.replace(L);if(l){l.remove()}if(K){s=t(K.remove());if(s){J.object_html=s}}if(F){s=t(F.remove());if(s){J.video_html=s}}L.attr({id:z,"class":"mceItemMedia mceItem"+(p||"Flash"),style:G,width:B||"320",height:v||"240","data-mce-json":h.serialize(J,"'")})}});tinymce.PluginManager.add("media",tinymce.plugins.MediaPlugin)})();(function(){var d=tinymce.each,a={paste_auto_cleanup_on_paste:true,paste_enable_default_filters:true,paste_block_drop:false,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:false,paste_remove_styles:false,paste_remove_styles_if_webkit:true,paste_convert_middot_lists:true,paste_convert_headers_to_strong:false,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:false,paste_text_sticky:false,paste_text_sticky_default:false,paste_text_notifyalways:false,paste_text_linebreaktype:"p",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};function b(e,f){return e.getParam(f,a[f])
}tinymce.create("tinymce.plugins.PastePlugin",{init:function(e,f){var g=this;g.editor=e;g.url=f;g.onPreProcess=new tinymce.util.Dispatcher(g);g.onPostProcess=new tinymce.util.Dispatcher(g);g.onPreProcess.add(g._preProcess);g.onPostProcess.add(g._postProcess);g.onPreProcess.add(function(l,m){e.execCallback("paste_preprocess",l,m)});g.onPostProcess.add(function(l,m){e.execCallback("paste_postprocess",l,m)});e.onKeyDown.addToTop(function(l,m){if(((tinymce.isMac?m.metaKey:m.ctrlKey)&&m.keyCode==86)||(m.shiftKey&&m.keyCode==45)){return false}});e.pasteAsPlainText=b(e,"paste_text_sticky_default");function k(q,n){var p=e.dom,l,m;g.onPreProcess.dispatch(g,q);q.node=p.create("div",0,q.content);if(tinymce.isGecko){l=e.selection.getRng(true);if(l.startContainer==l.endContainer&&l.startContainer.nodeType==3){m=p.select("p,h1,h2,h3,h4,h5,h6,pre",q.node);if(m.length==1&&q.content.indexOf("__MCE_ITEM__")===-1){p.remove(m.reverse(),true)}}}g.onPostProcess.dispatch(g,q);q.content=e.serializer.serialize(q.node,{getInner:1,forced_root_block:""});
if((!n)&&(e.pasteAsPlainText)){g._insertPlainText(e,p,q.content);if(!b(e,"paste_text_sticky")){e.pasteAsPlainText=false;e.controlManager.setActive("pastetext",false)}}else{g._insert(q.content)}}e.addCommand("mceInsertClipboardContent",function(l,m){k(m,true)});if(!b(e,"paste_text_use_dialog")){e.addCommand("mcePasteText",function(m,l){var n=tinymce.util.Cookie;e.pasteAsPlainText=!e.pasteAsPlainText;e.controlManager.setActive("pastetext",e.pasteAsPlainText);if((e.pasteAsPlainText)&&(!n.get("tinymcePasteText"))){if(b(e,"paste_text_sticky")){e.windowManager.alert(e.translate("paste.plaintext_mode_sticky"))}else{e.windowManager.alert(e.translate("paste.plaintext_mode_sticky"))}if(!b(e,"paste_text_notifyalways")){n.set("tinymcePasteText","1",new Date(new Date().getFullYear()+1,12,31))}}})}e.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});e.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});function h(v){var p,s,m,z,o=e.selection,r=e.dom,t=e.getBody(),l,u;
if(v.clipboardData||r.doc.dataTransfer){u=(v.clipboardData||r.doc.dataTransfer).getData("Text");if(e.pasteAsPlainText){v.preventDefault();k({content:u.replace(/\r?\n/g,"<br />")});return}}if(r.get("_mcePaste")){return}p=r.add(t,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"\uFEFF\uFEFF");if(t!=e.getDoc().body){l=r.getPos(e.selection.getStart(),t).y}else{l=t.scrollTop+r.getViewPort().y}r.setStyles(p,{position:"absolute",left:-10000,top:l,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){z=o.getRng();m=r.doc.body.createTextRange();m.moveToElementText(p);m.execCommand("Paste");r.remove(p);if(p.innerHTML==="\uFEFF\uFEFF"){e.execCommand("mcePasteWord");v.preventDefault();return}o.setRng(z);o.setContent("");setTimeout(function(){k({content:p.innerHTML})},0);return tinymce.dom.Event.cancel(v)}else{function q(n){n.preventDefault()}r.bind(e.getDoc(),"mousedown",q);r.bind(e.getDoc(),"keydown",q);s=e.selection.getRng();p=p.firstChild;m=e.getDoc().createRange();m.setStart(p,0);
m.setEnd(p,2);o.setRng(m);window.setTimeout(function(){var A="",n;if(!r.select("div.mcePaste > div.mcePaste").length){n=r.select("div.mcePaste");d(n,function(C){var B=C.firstChild;if(B&&B.nodeName=="DIV"&&B.style.marginTop&&B.style.backgroundColor){r.remove(B,1)}d(r.select("span.Apple-style-span",C),function(D){r.remove(D,1)});d(r.select("br[data-mce-bogus]",C),function(D){r.remove(D)});if(C.parentNode.className!="mcePaste"){A+=C.innerHTML}})}else{A="<pre>"+r.encode(u).replace(/\r?\n/g,"<br />")+"</pre>"}d(r.select("div.mcePaste"),function(B){r.remove(B)});if(s){o.setRng(s)}k({content:A});r.unbind(e.getDoc(),"mousedown",q);r.unbind(e.getDoc(),"keydown",q)},0)}}if(b(e,"paste_auto_cleanup_on_paste")){if(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)){e.onKeyDown.addToTop(function(l,m){if(((tinymce.isMac?m.metaKey:m.ctrlKey)&&m.keyCode==86)||(m.shiftKey&&m.keyCode==45)){h(m)}})}else{e.onPaste.addToTop(function(l,m){return h(m)})}}e.onInit.add(function(){e.controlManager.setActive("pastetext",e.pasteAsPlainText);
if(b(e,"paste_block_drop")){e.dom.bind(e.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(l){l.preventDefault();l.stopPropagation();return false})}});g._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(k,f){var n=this.editor,m=f.content,s=tinymce.grep,r=tinymce.explode,g=tinymce.trim,p,l;function e(h){d(h,function(o){if(o.constructor==RegExp){m=m.replace(o,"")}else{m=m.replace(o[0],o[1])}})}if(n.settings.paste_enable_default_filters==false){return}if(tinymce.isIE&&document.documentMode>=9){e([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]])}if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(m)||f.wordContent){f.wordContent=true;
e([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);if(b(n,"paste_convert_headers_to_strong")){m=m.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")}if(b(n,"paste_convert_middot_lists")){e([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]])}e([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"]]);do{p=m.length;m=m.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1")}while(p!=m.length);if(b(n,"paste_retain_style_properties").replace(/^none$/i,"").length==0){m=m.replace(/<\/?span[^>]*>/gi,"")}else{e([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,h){return(h.length>0)?h.replace(/./," ").slice(Math.floor(h.length/2)).split("").join("\u00a0"):""
}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(v,h,u){var z=[],o=0,t=r(g(u).replace(/&quot;/gi,"'"),";");d(t,function(A){var B,D,E=r(A,":");function C(F){return F+((F!=="0")&&(/\d$/.test(F)))?"px":""}if(E.length==2){B=E[0].toLowerCase();D=E[1].toLowerCase();switch(B){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":z[o++]=B.replace(/^mso-|-alt$/g,"")+":"+C(D);return;case"horiz-align":z[o++]="text-align:"+D;return;case"vert-align":z[o++]="vertical-align:"+D;return;case"font-color":case"mso-foreground":z[o++]="color:"+D;return;case"mso-background":case"mso-highlight":z[o++]="background:"+D;return;case"mso-default-height":z[o++]="min-height:"+C(D);return;case"mso-default-width":z[o++]="min-width:"+C(D);
return;case"mso-padding-between-alt":z[o++]="border-collapse:separate;border-spacing:"+C(D);return;case"text-line-through":if((D=="single")||(D=="double")){z[o++]="text-decoration:line-through"}return;case"mso-zero-height":if(D=="yes"){z[o++]="display:none"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(B)){return}z[o++]=B+":"+E[1]}});if(o>0){return h+' style="'+z.join(";")+'"'}else{return h}}]])}}if(b(n,"paste_convert_headers_to_strong")){e([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]])}e([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);l=b(n,"paste_strip_class_attributes");if(l!=="none"){function q(t,o){if(l==="all"){return""}var h=s(r(o.replace(/^(["'])(.*)\1$/,"$2")," "),function(u){return(/^(?!mso)/i.test(u))});return h.length?' class="'+h.join(" ")+'"':""}m=m.replace(/ class="([^"]+)"/gi,q);
m=m.replace(/ class=([\-\w]+)/gi,q)}if(b(n,"paste_remove_spans")){m=m.replace(/<\/?span[^>]*>/gi,"")}f.content=m},_postProcess:function(h,l){var g=this,f=g.editor,k=f.dom,e;if(f.settings.paste_enable_default_filters==false){return}if(l.wordContent){d(k.select("a",l.node),function(m){if(!m.href||m.href.indexOf("#_Toc")!=-1){k.remove(m,1)}});if(b(f,"paste_convert_middot_lists")){g._convertLists(h,l)}e=b(f,"paste_retain_style_properties");if((tinymce.is(e,"string"))&&(e!=="all")&&(e!=="*")){e=tinymce.explode(e.replace(/^none$/i,""));d(k.select("*",l.node),function(p){var q={},n=0,o,r,m;if(e){for(o=0;o<e.length;o++){r=e[o];m=k.getStyle(p,r);if(m){q[r]=m;n++}}}k.setAttrib(p,"style","");if(e&&n>0){k.setStyles(p,q)}else{if(p.nodeName=="SPAN"&&!p.className){k.remove(p,true)}}})}}if(b(f,"paste_remove_styles")||(b(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit)){d(k.select("*[style]",l.node),function(m){m.removeAttribute("style");m.removeAttribute("data-mce-style")})}else{if(tinymce.isWebKit){d(k.select("*",l.node),function(m){m.removeAttribute("data-mce-style")
})}}},_convertLists:function(h,f){var l=h.editor.dom,k,p,e=-1,g,q=[],n,m;d(l.select("p",f.node),function(v){var s,z="",u,t,o,r;for(s=v.firstChild;s&&s.nodeType==3;s=s.nextSibling){z+=s.nodeValue}z=v.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");if(/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(z)){u="ul"}if(/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(z)){u="ol"}if(u){g=parseFloat(v.style.marginLeft||0);if(g>e){q.push(g)}if(!k||u!=n){k=l.create(u);l.insertAfter(k,v)}else{if(g>e){k=p.appendChild(l.create(u))}else{if(g<e){o=tinymce.inArray(q,g);r=l.getParents(k.parentNode,u);k=r[r.length-1-o]||k}}}d(l.select("span",v),function(B){var A=B.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");if(u=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(A)){l.remove(B)}else{if(/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(A)){l.remove(B)}}});t=v.innerHTML;if(u=="ul"){t=v.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,"")
}else{t=v.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,"")}p=k.appendChild(l.create("li",0,t));l.remove(v);e=g;n=u}else{k=e=0}});m=f.node.innerHTML;if(m.indexOf("__MCE_ITEM__")!=-1){f.node.innerHTML=m.replace(/__MCE_ITEM__/g,"")}},_insert:function(g,e){var f=this.editor,k=f.selection.getRng();if(!f.selection.isCollapsed()&&k.startContainer!=k.endContainer){f.getDoc().execCommand("Delete",false,null)}f.execCommand("mceInsertContent",false,g,{skip_undo:e})},_insertPlainText:function(k,A,z){var u,v,m,l,s,e,q,f,o=k.getWin(),C=k.getDoc(),t=k.selection,n=tinymce.is,B=tinymce.inArray,g=b(k,"paste_text_linebreaktype"),p=b(k,"paste_text_replacements");function r(h){d(h,function(D){if(D.constructor==RegExp){z=z.replace(D,"")}else{z=z.replace(D[0],D[1])}})}if((typeof(z)==="string")&&(z.length>0)){if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(z)){r([/[\n\r]+/g])}else{r([/\r+/g])}r([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"],/^\s+|\s+$/g]);
z=A.decode(tinymce.html.Entities.encodeRaw(z));if(!t.isCollapsed()){C.execCommand("Delete",false,null)}if(n(p,"array")||(n(p,"array"))){r(p)}else{if(n(p,"string")){r(new RegExp(p,"gi"))}}if(g=="none"){r([[/\n+/g," "]])}else{if(g=="br"){r([[/\n/g,"<br />"]])}else{r([/^\s+|\s+$/g,[/\n\n/g,"</p><p>"],[/\n/g,"<br />"]])}}if((m=z.indexOf("</p><p>"))!=-1){l=z.lastIndexOf("</p><p>");s=t.getNode();e=[];do{if(s.nodeType==1){if(s.nodeName=="TD"||s.nodeName=="BODY"){break}e[e.length]=s}}while(s=s.parentNode);if(e.length>0){q=z.substring(0,m);f="";for(u=0,v=e.length;u<v;u++){q+="</"+e[u].nodeName.toLowerCase()+">";f+="<"+e[e.length-u-1].nodeName.toLowerCase()+">"}if(m==l){z=q+f+z.substring(m+7)}else{z=q+z.substring(m+4,l+4)+f+z.substring(l+7)}}}k.execCommand("mceInsertRawHTML",false,z+'<span id="_plain_text_marker">&nbsp;</span>');window.setTimeout(function(){var h=A.get("_plain_text_marker"),G,D,F,E;t.select(h,false);C.execCommand("Delete",false,null);h=null;G=t.getStart();D=A.getViewPort(o);F=A.getPos(G).y;
E=G.clientHeight;if((F<D.y)||(F+E>D.y+D.h)){C.body.scrollTop=F<D.y?F:F-D.h+25}},0)}},_legacySupport:function(){var f=this,e=f.editor;e.addCommand("mcePasteWord",function(){e.windowManager.open({file:f.url+"/pasteword.htm",width:parseInt(b(e,"paste_dialog_width")),height:parseInt(b(e,"paste_dialog_height")),inline:1})});if(b(e,"paste_text_use_dialog")){e.addCommand("mcePasteText",function(){e.windowManager.open({file:f.url+"/pastetext.htm",width:parseInt(b(e,"paste_dialog_width")),height:parseInt(b(e,"paste_dialog_height")),inline:1})})}e.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}});tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)})();var _wrs_int_conf_file="integration/configurationjs.php";var _wrs_int_conf_async=true;var _wrs_baseURL;var _wrs_conf_editor="TinyMCE";if(typeof _wrs_isMoodle24=="undefined"){_wrs_baseURL=tinymce.baseURL;_wrs_conf_path=_wrs_baseURL+"/plugins/tiny_mce_wiris/"}else{var base=tinymce.baseURL;var search="lib/editor/tinymce";
var pos=base.indexOf(search);_wrs_baseURL=tinymce.baseURL.substr(0,pos+search.length);_wrs_conf_path=_wrs_baseURL+"/plugins/tiny_mce_wiris/tinymce/";_wrs_int_conf_async=false}var _wrs_int_path=wrs_intPath(_wrs_int_conf_file,_wrs_conf_path);if(!_wrs_int_conf_async){var httpRequest=typeof XMLHttpRequest!="undefined"?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");var configUrl=(_wrs_int_conf_file.indexOf("/")==0||_wrs_int_conf_file.indexOf("http")==0)?_wrs_int_conf_file:_wrs_conf_path+"/"+_wrs_int_conf_file;httpRequest.open("GET",configUrl,false);httpRequest.send(null);eval(httpRequest.responseText)}var _wrs_conf_pluginBasePath=_wrs_conf_path;var _wrs_int_editorIcon;var _wrs_int_CASIcon;var _wrs_int_temporalIframe;var _wrs_int_temporalElementIsIframe;var _wrs_int_window;var _wrs_int_window_opened=false;var _wrs_int_temporalImageResizing;var _wrs_int_wirisProperties;var _wrs_int_directionality;var _wrs_int_customEditors={chemistry:{name:"Chemistry",toolbar:"chemistry",icon:"chem.png",enabled:false,confVariable:"_wrs_conf_chemEnabled"}};
var _wrs_int_initParsed=false;var _wrs_addCoreQueue=typeof _wrs_addCoreQueue=="undefined"?false:_wrs_addCoreQueue;(function(){tinymce.create("tinymce.plugins.tiny_mce_wiris",{init:function(h,b){if(typeof h.getParam("external_plugins")!="undefined"&&typeof h.getParam("external_plugins")["tiny_mce_wiris"]!="undefined"){var e=h.getParam("external_plugins")["tiny_mce_wiris"];_wrs_conf_path=e.substring(0,e.lastIndexOf("/")+1);_wrs_int_conf_file=_wrs_conf_path.split("/")[0]+"//"+_wrs_conf_path.split("/")[2]+_wrs_int_conf_file;_wrs_int_path=wrs_intPath(_wrs_int_conf_file,_wrs_conf_path)}if(typeof _wrs_conf_hostPlatform!="undefined"&&_wrs_conf_hostPlatform=="Moodle"&&_wrs_conf_versionPlatform<2013111800){_wrs_int_editorIcon=_wrs_conf_path+"icons/tinymce3/formula.png";_wrs_int_CASIcon=_wrs_conf_path+"icons/tinymce3/cas.png"}else{_wrs_int_editorIcon=_wrs_conf_path+"icons/formula.png";_wrs_int_CASIcon=_wrs_conf_path+"icons/cas.png"}var f;if(typeof _wrs_isMoodle24!=="undefined"&&_wrs_isMoodle24){h.settings.extended_valid_elements+=",img[*]";
if(!_wrs_addCoreQueue){var a=new tinymce.dom.ScriptLoader();a.add(_wrs_conf_path+"core/core.js");a.loadQueue();_wrs_addCoreQueue=true}}else{if(!_wrs_addCoreQueue){tinymce.ScriptLoader.load(_wrs_conf_path+"core/core.js");tinymce.ScriptLoader.loadQueue();_wrs_addCoreQueue=true}}if(h.inline){h.settings.extended_valid_elements+=",math[*],menclose[*],merror[*],mfenced[*],mfrac[*],mglyph[*],mi[*],mlabeledtr[*],mmultiscripts[*],mn[*],mo[*],mover[*],mpadded[*],mphantom[*],mroot[*],mrow[*],ms[*],mspace[*],msqrt[*],mstyle[*],msub[*],msubsup[*],msup[*],mtable[*],mtd[*],mtext[*],mtr[*],munder[*],munderover[*],semantics[*],maction[*]";h.settings.extended_valid_elements+=",annotation[*]"}var l=function(o){var q=o.getElement();var p=("value" in q)?q.value:q.innerHTML;function n(){if(window.wrs_initParse&&typeof _wrs_conf_plugin_loaded!="undefined"){var r=o.getParam("language");_wrs_int_directionality=o.getParam("directionality");if("wiriseditorparameters" in o.settings){_wrs_int_wirisProperties=o.settings.wiriseditorparameters
}else{_wrs_int_wirisProperties={bgColor:o.settings.wirisimagebgcolor,symbolColor:o.settings.wirisimagesymbolcolor,transparency:o.settings.wiristransparency,fontSize:o.settings.wirisimagefontsize,numberColor:o.settings.wirisimagenumbercolor,identColor:o.settings.wirisimageidentcolor,color:o.settings.wirisimagecolor,dpi:o.settings.wirisdpi,backgroundColor:o.settings.wirisimagebackgroundcolor,fontFamily:o.settings.wirisfontfamily}}if(o.settings.wirisformulaeditorlang){r=o.settings.wirisformulaeditorlang}if(!o.getParam("fullscreen_is_enabled")){o.setContent(wrs_initParse(p,r));_wrs_int_initParsed=true}if(!o.inline){f=o.getContentAreaContainer().firstChild;wrs_initParseImgToIframes(f.contentWindow);wrs_addIframeEvents(f,function(t,s){wrs_int_doubleClickHandler(o,t,true,s)},wrs_int_mousedownHandler,wrs_int_mouseupHandler);if(typeof wrs_observer!="undefined"){Array.prototype.forEach.call(f.contentDocument.getElementsByClassName(_wrs_conf_imageClassName),function(s){wrs_observer.observe(s,wrs_observer_config)
})}}else{f=q;wrs_addElementEvents(f,function(t,s){wrs_int_doubleClickHandler(o,t,false,s)},wrs_int_mousedownHandler,wrs_int_mouseupHandler);Array.prototype.forEach.call(document.getElementsByClassName(_wrs_conf_imageClassName),function(s){wrs_observer.observe(s,wrs_observer_config)})}}else{setTimeout(n,50)}}n()};if("onInit" in h){h.onInit.add(l)}else{h.on("init",function(){l(h)})}var g=function(n,o){if(typeof _wrs_conf_plugin_loaded!=="undefined"){var p=n.getParam("language");_wrs_int_directionality=n.getParam("directionality");if(n.settings.wirisformulaeditorlang){p=n.settings.wirisformulaeditorlang}o.content=wrs_endParse(o.content,_wrs_int_wirisProperties,p)}};if("onSaveContent" in h){h.onSaveContent.add(g)}else{h.on("saveContent",function(n){g(h,n)})}if("onGetContent" in h){h.onGetContent.add(g)}else{h.on("getContent",function(n){g(h,n)})}if("onBeforeSetContent" in h){h.onBeforeSetContent.add(function(n,o){if(_wrs_int_initParsed){o.content=wrs_initParse(o.content,h.getParam("language"))
}})}else{h.on("beforeSetContent",function(n){if(_wrs_int_initParsed){n.content=wrs_initParse(n.content,h.getParam("language"))}})}if(_wrs_int_conf_async||_wrs_conf_editorEnabled){h.addCommand("tiny_mce_wiris_openFormulaEditor",function(){if("wiriseditorparameters" in h.settings){_wrs_int_wirisProperties=h.settings.wiriseditorparameters}else{_wrs_int_wirisProperties={bgColor:h.settings.wirisimagebgcolor,symbolColor:h.settings.wirisimagesymbolcolor,transparency:h.settings.wiristransparency,fontSize:h.settings.wirisimagefontsize,numberColor:h.settings.wirisimagenumbercolor,identColor:h.settings.wirisimageidentcolor,color:h.settings.wirisimagecolor,dpi:h.settings.wirisdpi,backgroundColor:h.settings.wirisimagebackgroundcolor,fontFamily:h.settings.wirisfontfamily}}var n=h.getParam("language");_wrs_int_directionality=h.getParam("directionality");if(h.settings.wirisformulaeditorlang){n=h.settings.wirisformulaeditorlang}wrs_int_openNewFormulaEditor(f,n,h.inline?false:true)});h.addButton("tiny_mce_wiris_formulaEditor",{title:"Math editor",cmd:"tiny_mce_wiris_openFormulaEditor",image:_wrs_int_editorIcon})
}if(_wrs_int_conf_async||_wrs_conf_CASEnabled){h.addCommand("tiny_mce_wiris_openCAS",function(){var n=h.settings.language;if(h.settings.wirisformulaeditorlang){n=h.settings.wirisformulaeditorlang}wrs_int_openNewCAS(f,n,h.inline?false:true)});h.addButton("tiny_mce_wiris_CAS",{title:"Calculator",cmd:"tiny_mce_wiris_openCAS",image:_wrs_int_CASIcon})}for(var m in _wrs_int_customEditors){if(_wrs_int_customEditors.hasOwnProperty(m)){if(_wrs_int_conf_async||window[_wrs_int_customEditors[m].confVariable]){var d="tiny_mce_wiris_openFormulaEditor"+_wrs_int_customEditors[m].name;h.addCommand(d,function(){if("wiriseditorparameters" in h.settings){_wrs_int_wirisProperties=h.settings.wiriseditorparameters}else{_wrs_int_wirisProperties={bgColor:h.settings.wirisimagebgcolor,symbolColor:h.settings.wirisimagesymbolcolor,transparency:h.settings.wiristransparency,fontSize:h.settings.wirisimagefontsize,numberColor:h.settings.wirisimagenumbercolor,identColor:h.settings.wirisimageidentcolor,color:h.settings.wirisimagecolor,dpi:h.settings.wirisdpi,backgroundColor:h.settings.wirisimagebackgroundcolor,fontFamily:h.settings.wirisfontfamily}
}var n=h.getParam("language");_wrs_int_directionality=h.getParam("directionality");if(h.settings.wirisformulaeditorlang){n=h.settings.wirisformulaeditorlang}wrs_int_enableCustomEditor(m);wrs_int_openNewFormulaEditor(f,n,h.inline?false:true)});var k;if(typeof _wrs_conf_hostPlatform!="undefined"&&_wrs_conf_hostPlatform=="Moodle"&&_wrs_conf_versionPlatform<2013111800){k=_wrs_conf_path+"icons/tinymce3/"+_wrs_int_customEditors[m].icon}else{k=_wrs_conf_path+"icons/"+_wrs_int_customEditors[m].icon}h.addButton("tiny_mce_wiris_formulaEditor"+_wrs_int_customEditors[m].name,{title:_wrs_int_customEditors[m].name+" editor",cmd:d,image:k})}}}},getInfo:function(){return{longname:"tiny_mce_wiris",author:"Maths for More",authorurl:"http://www.wiris.com",infourl:"http://www.wiris.com",version:"1.0"}}});tinymce.PluginManager.add("tiny_mce_wiris",tinymce.plugins.tiny_mce_wiris)})();function wrs_intPath(b,a){var d=b.split("/");d.pop();d=d.join("/");d=d.indexOf("/")==0||d.indexOf("http")==0?d:a+d;return d}function wrs_int_openNewFormulaEditor(b,d,a){if(_wrs_int_window_opened){_wrs_int_window.focus()
}else{_wrs_int_window_opened=true;_wrs_isNewElement=true;_wrs_int_temporalIframe=b;_wrs_int_temporalElementIsIframe=a;_wrs_int_window=wrs_openEditorWindow(d,b,a)}}function wrs_int_openNewCAS(b,d,a){if(_wrs_int_window_opened){_wrs_int_window.focus()}else{_wrs_int_window_opened=true;_wrs_isNewElement=true;_wrs_int_temporalIframe=b;_wrs_int_temporalElementIsIframe=a;_wrs_int_window=wrs_openCASWindow(b,a,d)}}function wrs_int_doubleClickHandler(e,f,b,d){while(!wrs_containsClass(d,"Wirisformula")&&!wrs_containsClass(d,"Wiriscas")&&d.parentNode){d=d.parentNode}var a=d.nodeName.toLowerCase();if(a=="img"||a=="iframe"||a=="span"){if(wrs_containsClass(d,"Wirisformula")){if(customEditor=d.getAttribute("data-custom-editor")){if(window[_wrs_int_customEditors[customEditor].confVariable]){wrs_int_enableCustomEditor(customEditor)}}if("wiriseditorparameters" in e.settings){_wrs_int_wirisProperties=e.settings.wiriseditorparameters}else{_wrs_int_wirisProperties={bgColor:e.settings.wirisimagebgcolor,symbolColor:e.settings.wirisimagesymbolcolor,transparency:e.settings.wiristransparency,fontSize:e.settings.wirisimagefontsize,numberColor:e.settings.wirisimagenumbercolor,identColor:e.settings.wirisimageidentcolor,color:e.settings.wirisimagecolor,dpi:e.settings.wirisdpi,backgroundColor:e.settings.wirisimagebackgroundcolor,fontFamily:e.settings.wirisfontfamily}
}if(!_wrs_int_window_opened){var g=e.settings.language;if(e.settings.wirisformulaeditorlang){g=e.settings.wirisformulaeditorlang}_wrs_temporalImage=d;wrs_int_openExistingFormulaEditor(f,b,g)}else{_wrs_int_window.focus()}}else{if(wrs_containsClass(d,"Wiriscas")){if(!_wrs_int_window_opened){var g=e.settings.language;if(e.settings.wirisformulaeditorlang){g=e.settings.wirisformulaeditorlang}_wrs_temporalImage=d;wrs_int_openExistingCAS(f,b,g)}else{_wrs_int_window.focus()}}}}}function wrs_int_openExistingFormulaEditor(b,a,d){_wrs_int_window_opened=true;_wrs_isNewElement=false;_wrs_int_temporalIframe=b;_wrs_int_temporalElementIsIframe=a;_wrs_int_window=wrs_openEditorWindow(d,b,a)}function wrs_int_openExistingCAS(b,a,d){_wrs_int_window_opened=true;_wrs_isNewElement=false;_wrs_int_temporalIframe=b;_wrs_int_temporalElementIsIframe=a;_wrs_int_window=wrs_openCASWindow(b,a,d)}function wrs_int_mousedownHandler(b,a){if(a.nodeName.toLowerCase()=="img"){if(wrs_containsClass(a,"Wirisformula")||wrs_containsClass(a,"Wiriscas")){_wrs_int_temporalImageResizing=a
}}}function wrs_int_mouseupHandler(){if(_wrs_int_temporalImageResizing){setTimeout(function(){wrs_fixAfterResize(_wrs_int_temporalImageResizing)},10)}}function wrs_int_updateFormula(b,a,d){if(_wrs_int_temporalElementIsIframe){wrs_updateFormula(_wrs_int_temporalIframe.contentWindow,_wrs_int_temporalIframe.contentWindow,b,{},a,d)}else{wrs_updateFormula(_wrs_int_temporalIframe,window,b,{},a,d)}if(typeof tinymce.activeEditor.fire!="undefined"){tinymce.activeEditor.fire("change")}}function wrs_int_updateCAS(d,e,b,a){if(_wrs_int_temporalElementIsIframe){wrs_updateCAS(_wrs_int_temporalIframe.contentWindow,_wrs_int_temporalIframe.contentWindow,d,e,b,a)}else{wrs_updateCAS(_wrs_int_temporalIframe,window,d,e,b,a)}}function wrs_int_notifyWindowClosed(){_wrs_int_window_opened=false}var sTinymceOpts={};function sTinyMceIsIE10(){var e=tinymce,f=document,a=navigator,b=a.userAgent;return !e.isWebKit&&!e.isOpera&&(/MSIE/gi).test(b)&&/MSIE [10]/.test(b)&&(/Explorer/gi).test(a.appName)}Drupal.behaviors.s_tinymce=function(e){if(!Drupal.settings.s_tinymce){return
}var d=Drupal.settings.s_tinymce;if(!d.editors||typeof d.editors!="object"){return}if(tinyMCE.activeEditor){var f=tinyMCE.activeEditor.editorId;if(f&&f!="edit-tme-textarea"){var h=false;$.each(d.editors,function(k,l){if($.inArray(f,l)==-1){h=true}});if(!h){return}}}if($("#tinymce-toggle-html",e).hasClass("tinymce-toggle-active")){return}var b=[];$.each(d.editors,function(k,l){$.each(l,function(m,n){var o=$("#"+n);if(!o.hasClass("sTinymce-processed")){b.push(n);o.addClass("sTinymce-processed")}})});if(!b.length){return}var g=$(".tinymce-html-btn",e),a=$(".tinymce-visual-btn",e);g.each(function(){$(this).unbind("click").bind("click",function(){if(tinyMCE.activeEditor==null){return}var n=$(this).attr("editor_id");var l=$(this).parents("form");var m=$("textarea#"+n,l);tinyMCE.execCommand("mceRemoveControl",false,n);$("#"+n).focus();$("#tinymce-toolbar-placeholder",l).css("display","block");m.css("visibility","visible").focus();$(".tinymce-ext-buttons",l).hide();$("#topic-content-select-wrapper",l).hide();
if(m.closest(".s-tme-with-attachments")){var k=m.siblings(".s-tme-attachment-row");if(!k.length){var k=$("<div/>").addClass("s-tme-attachment-row");k.insertAfter(m)}k.show()}$(this).addClass("tinymce-toggle-active");$(this).siblings(".tinymce-visual-btn").removeClass("tinymce-toggle-active");sPopupsResizeCenter()})});a.each(function(){$(this).unbind("click").bind("click",function(){var m=$(this).attr("editor_id");var k=$(this).parents("form");if(tinyMCE.activeEditor&&tinyMCE.activeEditor.editorId==m){return}var l=$("textarea#"+m,k);tinyMCE.execCommand("mceAddControl",true,m);$("#tinymce-toolbar-placeholder",k).hide();l.css("visibility","hidden");$(".tinymce-ext-buttons",k).show();$("#topic-content-select-wrapper",k).show();if(l.closest(".s-tme-with-attachments")){l.siblings(".s-tme-attachment-row").hide()}sTinymcePopup.updateEditorHeight();$(this).addClass("tinymce-toggle-active");$(this).siblings(".tinymce-html-btn").removeClass("tinymce-toggle-active");sPopupsResizeCenter()})});g.add(a).tipsy({gravity:"s",title:function(){return $(this).attr("original-title")
}});$(".scontent-image-insert",e).each(function(){$(this).unbind("click").bind("click",function(){tinyMCE.activeEditor.execCommand("sContentImageInsert")})});$(".scontent-media-insert",e).each(function(){$(this).unbind("click").bind("click",function(){tinyMCE.activeEditor.execCommand("sContentMediaInsert")})});$(".scontent-formula-insert",e).each(function(){$(this).unbind("click").bind("click",function(){tinyMCE.activeEditor.execCommand("sContentFormulaInsert")})});$(".scontent-latex-insert",e).each(function(){$(this).unbind("click").bind("click",function(){tinyMCE.activeEditor.execCommand("sContentLatexInsert")})});$(".s-tinymce-loader",e).each(function(){$(this).remove()});if($("#"+b[0],e).parents(".popups-box").length>0){$(document).data("sTinymcePopupActiveEditors",b.join(","));sTinymceInit({mode:"none"});$(document).unbind("popups_open_path_done.s_tinymce").bind("popups_open_path_done.s_tinymce",function(){var m=$(document).data("sTinymcePopupActiveEditors");if(!m){return}var k=Popups.activePopup();
var l=$("#"+m).parents(".popups-box");if(k&&k.id&&k.id!=l.attr("id")){return}tinyMCE.onAddEditor.add(function(o,n){if(n.id==m){n.onInit.add(function(){sPopupsResizeCenter()})}});tinyMCE.execCommand("mceRemoveControl",false,"edit-tme-textarea");tinyMCE.execCommand("mceAddControl",false,m);sTinymcePopup.initializeEditors(b,e)});$(document).bind("popups_before_submit",function(p,r,k,l){tinyMCE.triggerSave();var o=new Array();var n=new Array();$.each(tinyMCE.editors,function(s,t){o.push(t.editorId)});if(o.length==0){return}$("textarea",k).each(function(){var t=$(this).attr("id");if($.inArray(t,o)!=-1){var s=$(this).attr("name");n.push(s)}});if(n.length==0){return}var q=tinyMCE.get(tinyMCE.activeEditor.editorId).getContent();$.each(r,function(t,s){if($.inArray(s.name,n)!=-1){r[t].value=q}});var m=$(document).data("sTinymcePopupActiveEditors");tinyMCE.execCommand("mceRemoveControl",true,m)});$(document).bind("popups_form_success_notdone",function(m,l,n){sTinymcePopup.initializeEditors(b,e);var k=$(document).data("sTinymcePopupActiveEditors");
if(!k){return}tinyMCE.execCommand("mceAddControl",true,k)});$(document).bind("popups_before_remove",function(l,k,m){if(typeof k=="object"&&k.id&&typeof tinyMCE=="object"&&tinyMCE.activeEditor&&tinyMCE.activeEditor.s_tinymce_popup==k.id){var n=tinyMCE.activeEditor.editorId;tinyMCE.activeEditor.execCommand("sContentRemovePopups");tinyMCE.execCommand("mceFocus",false,n);tinyMCE.execCommand("mceRemoveControl",false,n);$(document).data("sTinymcePopupActiveEditors",false);Drupal.settings.s_tinymce={}}})}else{$.each(b,function(l,n){var m=tinyMCE.get(n);if(typeof m=="object"){tinyMCE.remove(m)}});sTinymceInit({elements:b.join(",")})}};var sTinymceInit=function(e){var g=typeof Drupal.settings.s_tinymce_alt_opts!="undefined"?Drupal.settings.s_tinymce_alt_opts:{};var f=typeof Drupal.settings.s_tinymce!="undefined"&&typeof Drupal.settings.s_tinymce.language!="undefined"?Drupal.settings.s_tinymce.language:"en";var a="full";if(typeof g.toolbar!="undefined"){a=g.toolbar}else{if(typeof e.toolbar!="undefined"){a=e.toolbar
}}if(typeof a=="object"){a=a[0]}function b(k){k.onPaste.add(function(l){l._itemPasted=true});k.onChange.add(function(n){if(!n._itemPasted){return}n._itemPasted=null;var m=$(document.createElement("div"));m.html(n.getContent());var o="data:image/";var l=m.find("[src]").filter(function(){return this.src.substring(0,o.length).toLowerCase()===o});if(!l.length){return}l.remove();n.setContent(m.html())})}sTinymceOpts={mode:"exact",theme:"advanced",language:f,cache_string:Drupal.settings.s_tinymce&&Drupal.settings.s_tinymce.cache?Drupal.settings.s_tinymce.cache:"",elements:"",relative_urls:false,remove_script_host:true,paste_retain_style_properties:"all",paste_remove_styles_if_webkit:false,setup:function(k){b(k);k.onInit.add(function(l){$(".mceButton","#"+l.id+"_tbl").tipsy({gravity:"s",title:function(){return $(this).attr("original-title")}});var m=$("#"+k.editorId).parents(".popups-box");k.s_tinymce_popup=m.attr("id")})},theme_advanced_layout_manager:"SimpleLayout",theme_advanced_buttons1:"",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:true,theme_advanced_resize_horizontal:false,theme_advanced_resizing_use_cookie:false,plugins:"",apply_source_formatting:true,extended_valid_elements:"label[id|class|style],span[id|class|style|cluetip],object[classid|codebase|width|height|align],param[name|value],embed[quality|type|pluginspage|width|height|src|align],iframe[src|width|height|name|align|scrolling|frameborder|style|allowfullscreen],img[src|alt|width|height|style|id|name|formula|class|align|title|border|cluetip],td[id|class|style|title|lang|dir|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup|abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height]",media_strict:false,s_dropmenu_menus:{},paste_postprocess:function(l,m){if(tinyMCE.isWebKit){var k=new RegExp('style="line-height: [0-9]*.[0-9]{10,}px;"',"ig");
m.node.innerHTML=m.content.replace(k,"")}}};if(sTinyMceIsIE10()||tinymce.isIDevice){sTinymceOpts.browser_spellcheck=true}var h=false;switch(a){case"discussion":sTinymceOpts.theme_advanced_resizing_min_height=sTinymceOpts.min_height=60;sTinymceOpts.theme_advanced_buttons1="bold,italic,underline,bullist,numlist,indent,outdent,spellchecker,fontsizeselect,insert_content,removeformat";sTinymceOpts.plugins="-s_dropmenu,-s_content,spellchecker,-paste,inlinepopups";h=[11,12,13,14];sTinymceOpts.s_dropmenu_menus={insert_content:{title:Drupal.t("Insert Content"),items:sTinymce.getDropMenu("s_insert_link,s_insert_symbol,s_insert_equation")}};if($("body").hasClass("s-enable-mathml")){sTinymceOpts.theme_advanced_buttons1+=",tiny_mce_wiris_formulaEditor";sTinymceOpts.plugins+=",tiny_mce_wiris"}break;case"basic_update":sTinymceOpts.theme_advanced_buttons1="bold,italic,underline,bullist,numlist,indent,outdent,spellchecker,fontsizeselect,insert_content,removeformat";sTinymceOpts.plugins="-s_dropmenu,-s_content,spellchecker,-paste,inlinepopups";
h=[11,12,13,14];sTinymceOpts.s_dropmenu_menus={insert_content:{title:Drupal.t("Insert Content"),items:sTinymce.getDropMenu("s_insert_link,s_insert_symbol,s_insert_equation")}};break;case"basic_comment":sTinymceOpts.theme_advanced_resizing_min_height=sTinymceOpts.min_height=60;sTinymceOpts.theme_advanced_buttons1="bold,italic,underline,bullist,numlist,indent,outdent,spellchecker";sTinymceOpts.plugins="spellchecker,paste";sTinymceOpts.theme_advanced_buttons1="bold,italic,underline,bullist,numlist,indent,outdent,spellchecker";break;case"basic_folder_description":sTinymceOpts.theme_advanced_buttons1="bold,italic,underline,bullist,numlist,forecolor,formatting,indent,outdent,justifyleft,justifycenter,justifyright,insert_content,spellchecker";sTinymceOpts.plugins="-s_dropmenu,-s_content,-s_image_hover,spellchecker,media,-paste,inlinepopups";sTinymceOpts.s_dropmenu_menus={insert_content:{title:Drupal.t("Insert Content"),items:sTinymce.getDropMenu("s_insert_image,s_insert_link,s_insert_symbol,s_insert_equation,s_insert_latex")},formatting:{title:Drupal.t("Formatting"),items:sTinymce.getDropMenu("strikethrough,sup,sub,separator,s_format_remove")}};
sTinymceOpts.theme_advanced_resizing=false;sTinymceOpts.theme_advanced_statusbar_location="";break;default:case"full":sTinymceOpts.plugins="-s_dropmenu,-s_content,-s_image_hover,-s_cluetip,-s_table,spellchecker,media,-paste,table,inlinepopups";sTinymceOpts.theme_advanced_buttons1="bold,italic,underline,bullist,numlist,forecolor,backcolor,formatting,indent,outdent,justifyleft,justifycenter,justifyright,s_link,insert_content,s_table_button,spellchecker,formatselect,fontsizeselect";sTinymceOpts.theme_advanced_buttons2="s_table_border,row_before,row_after,delete_row,col_before,col_after,delete_col,merge_cells,split_cells,delete_table";sTinymceOpts.s_dropmenu_menus={insert_content:{title:Drupal.t("Insert Content"),items:sTinymce.getDropMenu("s_insert_imagemedia,s_insert_link,s_insert_symbol,s_insert_equation,s_insert_latex,s_cluetip_toggle_note")},formatting:{title:Drupal.t("Formatting"),items:sTinymce.getDropMenu("strikethrough,sup,sub,separator,s_format_remove")}};if($("body").hasClass("s-enable-mathml")){sTinymceOpts.theme_advanced_buttons1+=",tiny_mce_wiris_formulaEditor";
sTinymceOpts.plugins+=",tiny_mce_wiris"}break}var d=sCommonGetSetting("s_tinymce","s_content_menu_items");if(d&&(a=="basic_folder_description"||a=="full")){d=sTinymceOpts.s_dropmenu_menus.insert_content.items.concat(d);sTinymceOpts.s_dropmenu_menus.insert_content.items=d;sTinymceOpts.s_dropmenu_menus.insert_content.isMegaDropdown=true}sTinymceOpts.theme_advanced_font_sizes={};if(h===false){h=[11,12,13,14,16,18,24]}$.each(h,function(l,m){sTinymceOpts.theme_advanced_font_sizes[m]={fontSize:m+"px"}});sTinymceOpts=$.extend({},sTinymceOpts,e,g);tinyMCE.init(sTinymceOpts)};if(typeof sTinymce=="undefined"){var sTinymce=(function(){var b={};var a={s_insert_imagemedia:{id:"s_insert_imagemedia",title:Drupal.t("Image/Media"),cmd:"sContentMediaInsert"},s_insert_image:{id:"s_insert_image",title:Drupal.t("Image"),cmd:"sContentImageInsert"},s_insert_link:{id:"s_insert_link",title:Drupal.t("Link"),cmd:"mceLink"},s_insert_symbol:{id:"s_insert_symbol",title:Drupal.t("Symbol"),cmd:"mceCharMap"},s_insert_equation:{id:"s_insert_equation",title:Drupal.t("Equation"),cmd:"sContentFormulaInsert"},s_insert_latex:{id:"s_insert_latex",title:Drupal.t("LaTeX"),cmd:"sContentLatexInsert"},s_cluetip_toggle_note:{id:"s_cluetip_toggle_note",title:Drupal.t("Tooltip"),cmd:"sCluetipToggleNote",disabled:true},strikethrough:{id:"strikethrough",title:Drupal.t("Strikethrough"),cmd:"strikethrough"},sup:{id:"sup",title:Drupal.t("Superscript"),cmd:"superscript"},sub:{id:"sub",title:Drupal.t("Subscript"),cmd:"subscript"},separator:{type:"separator"},s_format_remove:{id:"s_format_remove",title:Drupal.t("Clear Formatting"),cmd:"removeformat"}};
b.updateRichtextContent=function(d){var f=tinyMCE&&tinyMCE.activeEditor?tinyMCE.activeEditor.editorId:null;if(f){var g=$("#"+f,d);if(g.length){var e=tinyMCE.get(tinyMCE.activeEditor.editorId).getContent();g.val(e)}}};b.getDropMenu=function(e){var d=[];$.each(e.split(","),function(f,g){if(typeof a[g]!="undefined"){d.push(a[g])}});return d};b.findContentBody=function(d){var e=tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.getBody();if(!e){return}return $(d,e)};b.checkInlineImgBeforeSubmit=function(d){$("input[type=submit]:not(.sTinymce-imgCheck-processed)",d).addClass("sTinymce-imgCheck-processed").each(function(){var e=$(this);e.data("beforeSubmitHandler",function(g){if(!g){return}var h="data:image/";var f=sTinymce.findContentBody("[src]").filter(function(){return this.src.substring(0,h.length).toLowerCase()===h});if(!(f&&f.length)){return}g.preventDefault();e.closest("form").prepend('<div class="messages error"><ul><li>'+Drupal.t("You must delete images in your post and upload them as attachments.")+"</ul></li></div>")
})})};return b}())}if(typeof sTinymcePopup=="undefined"){var sTinymcePopup=(function(){var a={};a.viewModeHeights={"edit-description-wrapper":{lite:128,standard:228},"edit-post-wrapper":{lite:128,standard:228},"edit-template-fields-body-wrapper":{lite:128,standard:228}};a.initializeEditors=function(b,e){var f=sUserGetUISettings("rte","view_mode")=="standard"?"standard":"lite";var d=false;$.each(b,function(m,l){var g=$("#"+l,e);if(g.hasClass("s-tinymce-view-modes")){d=true;var o=$('<span class="s-tinymce-toggle-view" />'),n=Drupal.t("Expand"),h=Drupal.t("Minimize");o.appendTo(g.parent());o.click(function(){sTinymcePopup.setView(sTinymcePopup.getView()=="standard"?"lite":"standard")}).tipsy({gravity:"s",title:function(){return sTinymcePopup.getView()=="standard"?h:n}})}});if(d){sTinymcePopup.setView(f,false)}};a.setView=function(e,b){var f={standard:true,lite:true},d=this.getPopupContainer();if(d){$.each(f,function(g,k){var h="s-tinymce-view-"+g;if(e==g){d.addClass(h)}else{d.removeClass(h)
}});if(typeof b=="undefined"||b){sUserSetUISettings("rte","view_mode",e)}a.updateEditorHeight(e);sPopupsResizeCenter()}};a.getView=function(){var e=null,d=this.getPopupContainer();if(d){var b=/s-tinymce-view-([^\s]+)/.exec(d.attr("class"));if(b.length>1){e=b[1]}}return e};a.updateEditorHeight=function(f){var d=tinyMCE.activeEditor;if(d){if(typeof f=="undefined"){f=a.getCurrentViewMode()}var e=$(d.contentAreaContainer).closest(".form-item").attr("id"),b=null;if(typeof a.viewModeHeights[e]=="object"&&typeof a.viewModeHeights[e][f]!="undefined"){d.theme.resizeTo(null,a.viewModeHeights[e][f])}}};a.getPopupContainer=function(){var e=$(document).data("sTinymcePopupActiveEditors"),d=null;if(e){var b=Popups.activePopup();d=$("#"+e).parents(".popups-box")}return d};a.getCurrentViewMode=function(){var e=this.getPopupContainer(),b=null,d=null;if(e){b=/s-tinymce-view-(\w+)/.exec(e.attr("class"));if(b){d=b[1]}}return d};return a}())}(function(){var a=tinymce.dom.Event;var b=false;tinymce.create("tinymce.plugins.SImageHoverPlugin",{init:function(d,e){var f=this;
d.onInit.add(function(g){f._createBtns();a.add(g.getWin(),"scroll",function(h){if(!tinyMCE.activeEditor){a.remove(g,"scroll");return true}tinyMCE.activeEditor.execCommand("sImageHover_removeModBtns",false,false,{skip_focus:true})})});d.addCommand("sImageHover_removeModBtns",this._removeBtns,this);d.addCommand("sImageHover_positionModBtns",this._positionBtns,this);d.addCommand("sImageHover_getEnabledImage",this._getEnabledImage,this);d.addCommand("sImageHover_setEnabledImage",this._setEnabledImage,this);$("body").bind("mousedown",function(k){if(typeof tinyMCE=="undefined"||typeof tinyMCE.activeEditor=="undefined"){$(this).unbind(k);return true}var h=$(k.target);var g=String(h.attr("id"));if(g=="undefined"){g=h.parent().attr("id")}if(g=="undefined"||g=="tme_imgModBtn"||g=="tme_imgDelBtn"){return}tinyMCE.activeEditor.execCommand("sImageHover_removeModBtns",false,false,{skip_focus:true})});d.onRemove.add(function(g){$("#tme_imgModEnabled").attr("id","");$("#tme_modBtnContainer").hide()});d.onClick.add(function(g,h){var k=tinyMCE.activeEditor.execCommand("sImageHover_getEnabledImage");
if(typeof k=="undefined"||(k!=false&&$(h.target)[0]==k[0])){return}tinyMCE.activeEditor.execCommand("sImageHover_removeModBtns")});d.onMouseUp.add(function(h,m){if(m.target.nodeName=="IMG"){var g=$(m.target);var k=String(g.attr("class"));var l=$("span",$("#tme_imgModBtn"));var n=k.match(/^.*(mceItemQuickTime|mceItemMedia|mceItemFlash|mceItemWindowsMedia|mceItemRealMedia).*$/gi)?"media":false;if(!n){n=k.match(/^.*tutortrove-formula.*$/gi)?"tt-formula":false}if(!n){n=k.match(/^.*latex-formula.*$/gi)?"latex-formula":false}if(!n){n=k.match(/^.*mathquill-formula.*$/gi)?"mathquill-formula":false}switch(n){case"media":l.css("background-image","url(/sites/all/libraries/tinymce/jscripts/tiny_mce/themes/advanced/img/icons.gif)");l.css({"background-position":"-323px -24px","background-repeat":"no-repeat"});l.data("mceMethod","mceMedia");break;case"tt-formula":l.css("background-image","url(/sites/all/themes/schoology_theme/images/math-icon.png)");l.css({"background-position":"1px 1px","background-repeat":"no-repeat"});
l.data("mceMethod","sContentFormulaInsert");l.data("mceParams",g);break;case"latex-formula":l.css("background-image","url(/sites/all/themes/schoology_theme/images/math-icon.png)");l.css({"background-position":"-1px -16px","background-repeat":"no-repeat"});l.data("mceMethod","sContentLatexInsert");l.data("mceParams",g);break;case"mathquill-formula":l.css("background-image","url(/sites/all/themes/schoology_theme/images/math-icon.png)");l.css({"background-position":"1px 1px","background-repeat":"no-repeat"});l.data("mceMethod","sContentFormulaInsert");l.data("mceParams",g);break;default:l.css("background-image","url(/sites/all/libraries/tinymce/jscripts/tiny_mce/themes/advanced/img/icons.gif)");l.css({"background-position":"-384px -4px","background-repeat":"no-repeat"});l.data("mceMethod","mceImage");break}h.execCommand("sImageHover_setEnabledImage",m.target);h.execCommand("sImageHover_positionModBtns")}})},_getEnabledImage:function(){return this._enabledImage},_setEnabledImage:function(d){this._enabledImage=$(d);
this._enabledImage.attr("id","tme_imgModEnabled")},_createBtns:function(){if($("#tme_modBtnContainer").length){return}var f=$("<div></div>");f.attr("id","tme_modBtnContainer");var d=$("<span></span>");d.attr("id","tme_imgModBtn");d.append($("<span></span>"));d.bind("click",function(){var h=tinyMCE.activeEditor;if(jQuery.browser.msie){h.selection.select(h.dom.select("img#tme_imgModEnabled")[0])}var g=$("span",$(this));h.execCommand("sImageHover_removeModBtns");h.execCommand(g.data("mceMethod"),g.data("mceParams"))});var e=$("<span></span>");e.attr("id","tme_imgDelBtn");e.append($("<span></span>"));e.bind("click",function(){tinyMCE.activeEditor.execCommand("sImageHover_removeModBtns",true)});f.append(d);f.append(e);f.css("display","none");$("body").append(f);f.hide()},_removeBtns:function(d){if(typeof d!="boolean"){d=false}$(this._enabledImage).attr("id","");if(d){tinyMCE.activeEditor.dom.remove(this._enabledImage);tinyMCE.activeEditor.execCommand("sContentSaveLastNode")}if(tinyMCE.activeEditor==null){return
}$("#tme_modBtnContainer").hide();this._enabledImage=false},_positionBtns:function(e){if(this._enabledImage==false){return}if(typeof e!="boolean"){e=true}var l=$(this._enabledImage).position();var k=$("iframe",$(tinyMCE.activeEditor.contentAreaContainer));var d=k.offset();var h=tinyMCE.activeEditor.contentWindow.pageYOffset;if(typeof h=="undefined"){h=tinymce.DOM.getViewPort(tinymce.activeEditor.getWin()).y}var g=d.top+l.top+5-h;if(d.top>g){g=d.top+10}var f=$("#tme_modBtnContainer");f.css("left",String(d.left+l.left+5)+"px");f.css("top",String(g)+"px");if(e){f.show()}},getInfo:function(){return{longname:"S_Image_Hover",author:"Schoology, Inc.",authorurl:"http://"+sCommonGetDefaultDomain()+".schoology.com",infourl:"http://"+sCommonGetDefaultDomain()+".schoology.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("s_image_hover",tinymce.plugins.SImageHoverPlugin)})();(function(){var a=tinymce.dom.Event;tinymce.create("tinymce.plugins.SContentPlugin",{init:function(b,d){var e=this;
b.addCommand("sContentMediaInsert",function(){e._mediaInsert()});b.addCommand("sContentImageInsert",function(){e._mediaInsert({type:"image"})});b.addCommand("sContentFormulaInsert",this._formulaInsert);b.addCommand("sContentLatexInsert",this._latexInsert);b.addCommand("sContentInsert",this._insertContent);b.addCommand("sContentSaveLastNode",this._saveLastNode);b.addCommand("sContentToggleSubmitBtns",this._toggleSubmitButtons);b.addCommand("sContentGetRealmFromUrl",this._getRealmFromUrl);b.addCommand("sContentSetWmodeOpaque",this._setWmodeOpaque);b.addCommand("sContentResourcesInsert",this._insertResourceContent);b.addCommand("sContentResourcesInsertPopup",this._insertResourcesContentPopup);b.addCommand("sContentRemovePopups",this._removePopups);b.onEvent.add(function(f,g){if(g.type=="submit"){return}tinyMCE.activeEditor.execCommand("sContentSaveLastNode")});b.addButton("sContentFormula",{title:Drupal.t("Equation"),cmd:"sContentFormulaInsert"});b.addButton("sContentImage",{title:Drupal.t("Image/Media"),cmd:"sContentMediaInsert"})
},createControl:function(d,b){if(d=="s_link"){return b.createButton("s_link",{title:"advlink.link_desc",cmd:"mceLink"})}},_removePopups:function(){var e=Popups.popupStack;for(var f=0;f<e.length;f++){var d=e[f];var b=d.extraClass;if(b&&b.indexOf("tinymce")>=0){d.close()}}},_saveLastNode:function(){var b=tinyMCE.activeEditor.selection.getNode();if(typeof b=="object"&&b.nodeName=="#document"){b=b.body}$(document).data("tinymceLastNode",b)},_mediaInsert:function(e){if(typeof e=="undefined"){e={}}if(typeof e.type=="undefined"){e.type="both"}sAfu.onUpload=function(l){if(!l.url||l.url==""||!l.type){return}if(l.type=="image"){var h='<img src="'+l.url+'" alt="" title="" />';tinyMCE.activeEditor.execCommand("sContentInsert",h);var g=Popups.activePopup();Popups.close(g);tinyMCE.activeEditor.focus()}else{var k=l.url;var m=l.fid?l.fid:"";if(sCommonIsEmbed(k)){Popups.close();k=tinyMCE.activeEditor.execCommand("sContentSetWmodeOpaque",k);tinyMCE.activeEditor.execCommand("sContentInsert",k);return}$.ajax({url:"/media/richtext/embedcode",data:{fid:m,url:k},type:"POST",dataType:"json",success:function(p,o){var n=Popups.activePopup();
Popups.close(n);tinyMCE.activeEditor.execCommand("sContentInsert",p.embedCode)},error:function(o,n,p){alert(Drupal.t("There was an internal error. Please try again in a few moments."))}})}};var b=tinyMCE.activeEditor.execCommand("sContentGetRealmFromUrl");var d="/tinymceinsertmedia?r="+String(b[0])+"&id="+String(b[1]);if(e.type=="image"){d+="&type=image"}var f={ajaxForm:false,extraClass:"tinymce-insert-popup",updateMethod:"none",href:d,hijackDestination:false,disableCursorMod:true,disableAttachBehaviors:false,formOnSubmit:function(){if($("#mediaInsertTabURL").hasClass("active")&&$("#edit-submit-upload").hasClass("disabled")){return false}var h=$("#edit-media-url"),l=$(".edit-media-type.active"),g=h.val();if(g==""){if($("#mediaInsertTabUpload").hasClass("active")){alert(Drupal.t("Please enter either a URL or embed code."));h.focus();tinyMCE.activeEditor.execCommand("sContentToggleSubmitBtns");return false}var k={success:function(n,m){if(n.status!=0){tinyMCE.activeEditor.execCommand("sContentToggleSubmitBtns");
alert(Drupal.t("There was an internal error. Please try again in a few moments."));return}sAfu.onUpload(n.file)},error:function(n,m,o){tinyMCE.activeEditor.execCommand("sContentToggleSubmitBtns");alert(Drupal.t("There was an internal error. Please try again in a few moments."))},url:"/tinymceinsertmedia"};sAfu.uploadFormAjax({},k)}else{sAfu.onUpload({type:l.hasClass("edit-media-type-image")?"image":"media",url:g});tinyMCE.activeEditor.focus()}return false}};tinyMCE.activeEditor.execCommand("sContentSaveLastNode");Popups.openPath(this,f,window)},_formulaInsert:function(g){var d=tinyMCE.activeEditor.execCommand("sContentGetRealmFromUrl");var k=g?$(g).attr("formula"):"";var b=true;if(k&&Base64.is_encoded(k)){k=Base64.decode(k)}if(g){$(document).data("s_content_saved_formula_image",g);b=g.hasClass("mathquill-formula")}if(b){var f="/tinymceinsertmathquill";var h=" tinymce-mathquill-formula-popup"}else{var f="/tinymceinsertformula";var h=" tinymce-formula-popup"}var e={ajaxForm:false,extraClass:"tinymce-insert-popup popups-large"+h,width:550,updateMethod:"none",href:f+"?r="+String(d[0])+"&id="+String(d[1])+"&formula="+encodeURIComponent(k),hijackDestination:false,disableCursorMod:true,disableAttachBehaviors:false,formOnSubmit:function(){}};
tinyMCE.activeEditor.execCommand("sContentSaveLastNode");Popups.openPath(this,e,window)},_latexInsert:function(e){var b=tinyMCE.activeEditor.execCommand("sContentGetRealmFromUrl");var f=e?$(e).attr("formula"):"";if(e){$(document).data("s_content_saved_latex_image",e)}var d={ajaxForm:false,extraClass:"tinymce-insert-popup tinymce-latex-popup popups-large",width:550,updateMethod:"none",href:"/tinymceinsertlatex?r="+String(b[0])+"&id="+String(b[1])+"&formula="+encodeURIComponent(f),hijackDestination:false,disableCursorMod:true,disableAttachBehaviors:false,formOnSubmit:function(){}};tinyMCE.activeEditor.execCommand("sContentSaveLastNode");Popups.openPath(this,d,window)},_insertContent:function(m,b){var h={use_native_insert:false};if(typeof b=="undefined"){b={}}b=$.extend({},h,b);var g=typeof m=="string"?m:$("<div />").append(m.clone()).remove().html();var d=$(document).data("tinymceLastNode");var f=$(d);var k=tinyMCE.activeEditor;try{if(!b.use_native_insert&&f.length>0){var n=d.nodeName.toLowerCase();
g=new tinyMCE.html.Serializer().serialize(k.parser.parse(g));g=g.replace(/(['"])[\.\/]+media\/ifr/,"$1/media/ifr");if(!k.settings.relative_urls){g=g.replace(/data-mce-src="(\.+\/)+/,'data-mce-src="/')}if(n=="td"||n=="body"){f.append(g)}else{f.after(g)}}else{k.execCommand("mceInsertContent",false,"");k.execCommand("mceInsertContent",false,g)}}catch(l){}},_toggleSubmitButtons:function(){var b=$("#edit-submit-url");if(b.attr("disabled")==true){b.attr("disabled",false);b.parent().removeClass("disabled")}else{b.attr("disabled",true);b.parent().addClass("disabled")}},_getRealmFromUrl:function(){var e=String(window.location.pathname).split("/");var h=["user","school","district","course","group","page","topic","assignment","event","message","scorm","resources"];var d="",k=null,g=null;var b=String(window.location.pathname).match(/^\/template\/([0-9]+)\/assessment\/(questions|settings|preview)/);if(b){e=["resources",b[1]]}for(var f=0;f<e.length;f++){d=e[f];if($.inArray(d,h)!=-1){k=d;g=e[f+1];break
}}return[k,g]},_setWmodeOpaque:function(e){var d=$(e);if(e.match(/^<iframe.+/i)){var f=d.attr("src");if(f.match(/^http(s?):\/\/.*((youtube\.com)|(youtu\.be)|(vimeo\.com)).+/gi)){if(f.match(/^.+(\&|\?).*wmode=.+$/i)){f=f.replace(/^(.+(\&|\?).*wmode=)([^\&]+)(.*)$/i,"$1opaque$4");d.attr("src",f)}else{var b=f.indexOf("?")==-1?"?":"&";d.attr("src",f+b+"wmode=opaque")}}}if(e.match(/^<(object|embed).+/i)){$("param[name=wmode]",d).remove();d.append('<param name="wmode" value="opaque"/>');d.attr("wmode","opaque")}return $("<div />").append(d).html()},_insertResourceContent:function(g){var e,f,b;$.each(g.content,function(h,l){e="";if(l.type=="link"){e='<a href="'+l.href+'" class="s-content-insert" />'+l.title+"</a>"}else{if(l.type=="image"){e='<img src="'+l.src+'" alt="'+l.title+'" title="'+l.title+'" />'}else{if(l.type=="iframe"){e='<iframe src="'+l.src+'" width="'+l.width+'" height="'+l.height+'" frameborder="0" allowfullscreen></iframe>';e=tinyMCE.activeEditor.execCommand("sContentSetWmodeOpaque",e)
}}}tinyMCE.activeEditor.execCommand("sContentInsert",e)});var d=Popups.activePopup();Popups.close(d)},_insertResourcesContentPopup:function(f,k){var b=tinyMCE.activeEditor.execCommand("sContentGetRealmFromUrl");var e="/tinymceinsertresourcesapp?r="+String(b[0])+"&id="+String(b[1])+"&a="+String(k.nid);Popups.saveSettings();var d=Popups.activePopup();var h=Popups.options({ajaxForm:false,extraClass:"popups-extra-large popups-insert-library tinymce-resource-popup",updateMethod:"none",href:e,hijackDestination:false,disableCursorMod:true,disableAttachBehaviors:false});tinyMCE.activeEditor.execCommand("sContentSaveLastNode");var g=sCommonGetSetting("s_app","cookie_preload_urls",k.nid);if(g){sAppMenuCookiePreloadRun(k.nid,g,function(){sAppLauncherClearCache(k.nid);sAppMenuCookiePreloadDelete(k.nid);Popups.openPath(this,h,d)})}else{Popups.openPath(this,h,d)}},getInfo:function(){return{longname:"S_Content",author:"Schoology, Inc.",authorurl:"http://"+sCommonGetDefaultDomain()+".schoology.com",infourl:"http://"+sCommonGetDefaultDomain()+".schoology.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}
}});tinymce.PluginManager.add("s_content",tinymce.plugins.SContentPlugin)})();(function(){var o="s_cluetip_highlight";var f="."+o;var n=o+"_tmp";var k="."+n;var a=null;var g="-10000px";function l(){var p=tinymce.activeEditor,r=$("#"+p.editorContainer),q=$(".add-note-popup",r);return(q.css("top")!=g)}function h(t){var H=0,q,u=null,A=null,D=null,v=tinymce.activeEditor,z=$("#"+v.editorContainer),F=$(v.contentAreaContainer),s=F.offset().top-z.offset().top,B=$(".add-note-popup",z),r=$(".arrow-n",B),E=B.outerWidth(),C=B.outerHeight(),G=5;t.each(function(J,K){var I=$(K);var L=I.offset();if(!u||L.left<u){u=L.left}if(!A||(L.left+I.outerWidth())>A){A=L.left+I.outerWidth()}if(L.top+I.outerHeight()>H){H=L.top+I.outerHeight()}});D=(u+A)/2;q=D-(E/2);if(q<0){q=G;r.css("margin-left",(D-(r.innerWidth()/2)-G)+"px")}else{if(q+E>F.outerWidth()){q=F.outerWidth()-E-G;r.css("margin-left",(D-q-(r.innerWidth()/2))+"px")}else{r.css("margin-left","47%")}}var p=z.height()-C-r.outerHeight();H=Math.min(H-$(v.contentDocument).scrollTop()+s,p);
B.css({left:q+"px",top:H+"px"})}function m(s){var q=tinymce.activeEditor,t=$("#"+q.editorContainer),r=$(".add-note-popup",t);var p=s.attr("cluetip");if(Base64.is_encoded(p)){p=Base64.decode(p)}$(".cluetip_text",r).val(p);$(".check-mark-icon",r).unbind("mousedown").bind("mousedown",function(v){v.stopPropagation();var u=$(".cluetip_text",r).val();if(u.length>0){u=Base64.encode(u);s.each(function(z,A){$(A).attr("cluetip",u).removeClass(n)})}a=null;d()});if(p&&p.length>0){$(".delete-icon",r).unbind("mousedown").bind("mousedown",function(u){u.stopPropagation();e(s);a=null;d()}).show()}else{$(".delete-icon",r).unbind("mousedown").hide()}h(s)}function e(q){var p=tinymce.activeEditor.formatter;q.each(function(u,v){var r=$(v),t=r.children(),s=r.find(k);if(t.length&&!s.length){r.replaceWith(r.html())}else{p.toggle("highlight",null,r.get(0))}})}function d(){var p=tinymce.activeEditor,q=$(".add-note-popup",$("#"+p.editorContainer));q.css("top",g);q.find(".cluetip_text").val("");e($(k,$(p.contentDocument)))
}function b(){var p=tinymce.activeEditor,r=$(".add-note-popup",$("#"+p.editorContainer)),q=r.find(".cluetip_text").val();if(q&&q.length>0){$(".check-mark-icon",r).trigger("mousedown")}}tinymce.create("tinymce.plugins.SCluetipPlugin",{init:function(p,q){p.addCommand("sCluetipToggleNote",this._toggleNote);p.onNodeChange.add(this._nodeChanged,this);p.onBeforeGetContent.add(this._beforeGetContent,this);p.onInit.add(function(t){t.formatter.register({highlight:{inline:"span",classes:[o,n],attributes:{cluetip:""},onmatch:function(z,B,C){var A=$(z);return(A.hasClass(o)&&A.hasClass(n))}}});var v=$("#"+t.editorContainer);var s=$("<div></div>").css("position","absolute").addClass("add-note-popup").prependTo(v);$("<div></div>").addClass("arrow-n").appendTo(s);var r=$("<div></div>").addClass("add-note-popup-content").appendTo(s);$('<input type="text"/>').addClass("cluetip_text").appendTo(r);$("<span></span>").addClass("inline-icon mini check-mark-icon").appendTo(r);$("<span></span>").addClass("inline-icon mini delete-icon").appendTo(r);
var u=v.closest(".popups-box");if(u.length>0){u.addClass("allow-overflow")}d()})},_toggleNote:function(){var q=tinymce.activeEditor,s=$(q.selection.getNode()),p=s.parents(f),r=null;if(s.hasClass(o)){e(s)}else{if(p.length>0){p.eq(-1);e(p)}else{q.execCommand("mceToggleFormat",false,"highlight");if(!s.is(":visible")){s=$(q.selection.getNode())}r=s.find(k);if(!r.length){r=s.addClass(n).addClass(o)}m(r)}}},_nodeChanged:function(t,A,r,z,q){var p=$(r);var u=p.hasClass(o);var v=p.parents(f);var B=u||v.length>0;if(c=A.get("s_cluetip_toggle_note")){c.setDisabled(!B&&z);c.setActive(B)}if(B){var s=u?p:v;if(a!=r){b();m(s)}}else{if(l()){b();d()}}a=r},_beforeGetContent:function(p){var q=$(".add-note-popup",$("#"+p.editorContainer));if(q.length>0&&l()){b();d()}},getInfo:function(){return{longname:"S_Cluetip",author:"Schoology, Inc.",authorurl:"http://"+sCommonGetDefaultDomain()+".schoology.com",infourl:"http://"+sCommonGetDefaultDomain()+".schoology.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}
}});tinymce.PluginManager.add("s_cluetip",tinymce.plugins.SCluetipPlugin)})();(function(){var a={};tinymce.create("tinymce.plugins.SDropMenu",{init:function(b,d){var e=this;a=typeof b.settings.s_dropmenu_menus=="object"?b.settings.s_dropmenu_menus:{}},createControl:function(k,b){var f=this;if(typeof a[k]!="undefined"){var d=a[k],e=null,h=null,g=null;if(d.isMegaDropdown===true){h=tinymce.ui.SMenuButton;g=tinymce.ui.SMegaDropMenu}e=b.createMenuButton(k,{title:d.title,label:d.label,icons:false,ccDropMenu:g},h);e.onRenderMenu.add(function(n,l){f._createSubMenu(n.editor,l,d.items)});e.renderMenu();return e}},_createSubMenu:function(d,f,b){var e=this;$.each(b,function(g,n){if(typeof n.items!="undefined"){var m=f.addMenu({title:n.title});e._createSubMenu(d,m,n.items)}else{if(typeof n.type!="undefined"){if(n.type=="separator"){f.addSeparator()}}else{var h={title:n.title},l=null;if(typeof n.onclick=="function"){h.onclick=function(k){n.onclick(k,d)}}else{if(typeof n.cmd=="string"){h.cmd=n.cmd}}if(typeof n.id!="undefined"){h.id=n.id
}if(typeof n.value!="undefined"){h.value=n.value}if(typeof n.icon_src!="undefined"){h.icon_src=n.icon_src}if(typeof n["class"]!="undefined"){h["class"]=n["class"]}l=f.add(h);if(typeof n.disabled!="undefined"&&n.disabled){l.setDisabled(true)}d.controlManager.add(l)}}})},getInfo:function(){return{longname:"S_DropMenu",author:"Schoology, Inc.",authorurl:"http://"+sCommonGetDefaultDomain()+".schoology.com",infourl:"http://"+sCommonGetDefaultDomain()+".schoology.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("s_dropmenu",tinymce.plugins.SDropMenu)})();(function(){var b=tinymce.DOM,a=tinymce.dom.Event,d=tinymce.each;tinymce.create("tinymce.ui.SMenuButton:tinymce.ui.MenuButton",{SMenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new tinymce.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons},f.settings.ccDropMenu);
e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e}})})();(function(){var e=tinymce.is,d=tinymce.DOM,f=tinymce.each,a=tinymce.dom.Event,b=tinymce.dom.Element;tinymce.create("tinymce.ui.SMegaDropMenu:tinymce.ui.DropMenu",{SMegaDropMenu:function(h,g){g=g||{};g.container=g.container||d.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(e(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new tinymce.util.Dispatcher(this);this.onHideMenu=new tinymce.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(l){var h=this,k=h.settings,g;l.container=l.container||k.container;l.parent=h;l.constrain=l.constrain||k.constrain;l["class"]=l["class"]||k["class"];l.vp_offset_x=l.vp_offset_x||k.vp_offset_x;l.vp_offset_y=l.vp_offset_y||k.vp_offset_y;l.keyboard_focus=k.keyboard_focus;g=new tinymce.ui.SMegaDropMenu(l.id||d.uniqueId(),l);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);
return g},showMenu:function(r,p,v){var B=this,C=B.settings,q,g=d.getViewPort(),z,n,A,u,k=2,m,l,o=B.classPrefix;B.collapse(1);if(B.isMenuVisible){return}if(!B.rendered){q=d.add(B.settings.container,B.renderNode());f(B.items,function(h){h.postRender()});B.element=new b("menu_"+B.id,{blocker:1,container:C.container})}else{q=d.get("menu_"+B.id)}if(!tinymce.isOpera){d.setStyles(q,{left:-65535,top:-65535})}d.show(q);B.update();r+=C.offset_x||0;p+=C.offset_y||0;g.w-=4;g.h-=4;if(C.constrain){z=q.clientWidth-k;n=q.clientHeight-k;A=g.x+g.w;u=g.y+g.h;if((r+C.vp_offset_x+z)>A){r=v?v-z:Math.max(0,(A-C.vp_offset_x)-z)}if((p+C.vp_offset_y+n)>u){p=Math.max(0,(u-C.vp_offset_y)-n)}}d.setStyles(q,{left:r,top:p});B.element.update();B.isMenuVisible=1;B.mouseClickFunc=a.add(q,"click",function(s){var h;s=s.target;if(s&&(s=d.getParent(s,"td"))&&!d.hasClass(s,o+"ItemSub")&&!d.hasClass(s,"s-js-resource-items-empty")){h=B.items[s.id];if(h.isDisabled()){return}m=B;while(m){if(m.hideMenu){m.hideMenu()}m=m.settings.parent
}if(h.settings.onclick){h.settings.onclick(s)}return false}});if(B.hasMenus()){B.mouseOverFunc=a.add(q,"mouseover",function(D){var h,t,s;D=D.target;if(D&&(D=d.getParent(D,"td"))){h=B.items[D.id];if(B.lastMenu){B.lastMenu.collapse(1)}if(h.isDisabled()){return}if(D&&d.hasClass(D,o+"ItemSub")){t=d.getRect(D);h.showMenu((t.x+t.w-k),t.y-k,t.x);B.lastMenu=h;d.addClass(d.get(h.id).firstChild,o+"ItemActive")}}})}a.add(q,"keydown",B._keyHandler,B);B.onShowMenu.dispatch(B);if(C.keyboard_focus){B._setupKeyboardNav()}},renderNode:function(){var B=this,C=B.settings,k,q,z,A;A=d.create("div",{role:"listbox",id:"menu_"+B.id,"class":C["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(B.settings.parent){d.setAttrib(A,"aria-parent","menu_"+B.settings.parent.id)}z=d.add(A,"div",{role:"presentation",id:"menu_"+B.id+"_co","class":B.classPrefix+(C["class"]?" "+C["class"]:"")});B.element=new b("menu_"+B.id,{blocker:1,container:C.container});var h=d.add(z,"div",{"class":"s-content-resources-menu"});
k=d.add(h,"table",{role:"presentation",id:"menu_"+B.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});q=d.add(k,"tbody");var v=[[],[]],u;f(B.items,function(n){u=n.settings["class"]&&n.settings["class"].search(/s\-js\-resources\-insert\-item/)!=-1?1:0;v[u].push(n)});d.addClass(h,"s-content-resources-menu-col-"+(v[1].length?2:1));var p,l=v[0].length,m=v.length,g,o;if(v[1].length>l){l=v[1].length}for(g=0;g<l;g++){p=[];for(o=0;o<m;o++){p.push((v[o][g]!=undefined?v[o][g]:null))}B._add(q,p)}B.rendered=true;return A},_add:function(k,q){var h,t,r,o,l,p=this.classPrefix,g,m;o=d.add(k,"tr");f(q,function(n){if(n!=null){t=n.settings;l=d.add(o,"td",{id:n.id,"class":t["class"]+" "+p+"Item "+p+"ItemEnabled"});r=d.add(l,"a",{id:n.id+"_aria",role:t.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(t.icon_src){m=d.add(r,"span",{"class":"mceIcon"});d.add(m,"img",{src:t.icon_src})}d.add(r,"span",{"class":"mceText",title:n.settings.title},n.settings.title)
}else{l=d.add(o,"td",{"class":"s-js-resource-items-empty"})}});if(k.childNodes.length==1){d.addClass(o,"mceFirst")}if(h=o.previousSibling){d.removeClass(h,"mceLast")}d.addClass(o,"mceLast")}})})();(function(){var a={};function b(k){var l=null,f=4,p=4,o=15,m=10,h=25,n=17;if(typeof a[k.id]=="object"&&a[k.id].closest("body").length){l=a[k.id]}else{l=a[k.id]=$("#menu_"+k.id+"_co")}if(!l.children(".table-picker-wrapper").length){var e='<div class="table-picker-wrapper"><div class="table-picker-cells"><div class="picker table-picker-selected-cell"></div></div><p class="table-picker-desc"></p></div>';l.append(e);var g=l.find(".table-picker-selected-cell"),d=l.find(".table-picker-cells");l.resetSelection=function(){l.updateSelection(1,1)};l.getColsRows=function(s,r){var v=d.offset(),q=s-v.left,z=r-v.top,u=Math.min(Math.max(Math.ceil(q/h),1),m),t=Math.min(Math.max(Math.ceil(z/n),1),o);return[u,t]};l.updateSelection=function(t,s){var r=Math.max(t,p),q=Math.max(s,f);g.css({width:t*h+1,height:s*n+1});
d.css({width:r*h+1,height:q*n+1});l.find(".table-picker-desc").text(t+" x "+s)};d.bind("mousemove.tablepicker",function(r){r.stopPropagation();var q=l.getColsRows(r.pageX,r.pageY);l.updateSelection(q[0],q[1])}).bind("mouseleave.tablepicker",function(q){$("body").bind("mousemove.tablepicker",function(s){if(l.is(":visible")){var r=l.getColsRows(s.pageX,s.pageY);l.updateSelection(r[0],r[1])}})}).bind("mouseenter.tablepicker",function(q){$("body").unbind("mousemove.tablepicker")}).bind("click.tablepicker",function(t){var s=l.getColsRows(t.pageX,t.pageY),r=0,q='<table class="s_table s_table_border">';for(r=0;r<s[1];r++){q+="<tr>";for(j=0;j<s[0];j++){q+="<td><br/></td>"}q+="</tr>"}q+="</table>";tinyMCE.activeEditor.execCommand("mceInsertContent",false,q);k.hideMenu()})}if(typeof l.resetSelection=="function"){l.resetSelection()}}tinymce.create("tinymce.plugins.STablePlugin",{init:function(e,f){var g=this,d=null,k=null,h=null;e.addCommand("mceTablePicker",function(){if(k){var l=tinyMCE.activeEditor.controlManager;
button=$("#"+k.id),offset=button.offset(),x=offset.left,y=offset.top+button.height();if(d.isMenuVisible){d.hideMenu()}else{d.showMenu(x,y);b(d)}}});e.addCommand("mceToggleTableBorder",this.toggleTableBorder,this);e.onInit.add(function(){var l=e.controlManager;k=l.get(l.prefix+"s_table_button");d=l.createDropMenu("createtable");d.onHideMenu.add(function(){$("body").unbind("mousemove.tablepicker");tinyMCE.dom.Event.unbind(tinyMCE.DOM.doc,"mousedown")});d.onShowMenu.add(function(){tinyMCE.dom.Event.bind(tinyMCE.DOM.doc,"mousedown",function(m){if(!$(m.target).closest("#"+k.id+", #menu_"+d.id).length){d.hideMenu()}})});h=$("#"+e.editorId+"_delete_table").closest(".mceToolbar");if(h){g.isVisible=false;g._resizeIframe(e,31);sPopupsResizeCenter()}});e.onNodeChange.add(function(m,l,t,r,q){var p=m.dom.getParent(m.selection.getStart(),"table");if(k){k.setActive(p)}if(h){if(p){if(!g.isVisible){g.isVisible=true;h.show();g._resizeIframe(m,-31)}}else{if(g.isVisible){g.isVisible=false;h.hide();g._resizeIframe(m,31)
}}}if(c=l.get("s_table_border")){var s=$(p);c.setActive(s.hasClass("s_table_border"));c.setDisabled(!p)}});e.onClick.add(function(){if(d){d.hideMenu()}});g.isVisible=false},toggleTableBorder:function(){var d=tinymce.activeEditor,e=$(d.dom.getParent(d.selection.getStart(),"table"));e.toggleClass("s_table_border")},createControl:function(g,d){switch(g){case"s_table_button":var f=d.createButton(g,{title:"table.desc","class":"mce_table",onclick:function(){tinymce.activeEditor.execCommand("mceTablePicker")}});return f;case"s_table_border":var e=d.createButton(g,{title:Drupal.t("Border"),"class":"mce_table_border",cmd:"mceToggleTableBorder"});return e}return null},_resizeIframe:function(d,f){var e=$(d.getContentAreaContainer().firstChild);e.height(e.height()+f);d.theme.deltaHeight+=f}});tinymce.PluginManager.add("s_table",tinymce.plugins.STablePlugin)})();